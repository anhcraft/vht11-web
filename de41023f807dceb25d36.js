(self.webpackChunkvht11=self.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\mathjax-full\\js\\core\\MmlTree\\MmlNodes\\mo"],{"./node_modules/mathjax-full/js/core/MmlTree/MmlNodes/mo.js":function(t,e,r){"use strict";var i,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,s,n=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(t){s={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMo=void 0;var l=r("./node_modules/mathjax-full/js/core/MmlTree/MmlNode.js"),c=r("./node_modules/mathjax-full/js/core/MmlTree/OperatorDictionary.js"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._texClass=null,e.lspace=5/18,e.rspace=5/18,e}return s(e,t),Object.defineProperty(e.prototype,"texClass",{get:function(){if(null===this._texClass){var t=this.getText(),e=o(this.handleExplicitForm(this.getForms()),3),r=e[0],i=e[1],s=e[2],n=this.constructor.OPTABLE,a=n[r][t]||n[i][t]||n[s][t];return a?a[2]:l.TEXCLASS.REL}return this._texClass},set:function(t){this._texClass=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return"mo"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbellished",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNewLine",{get:function(){return"newline"===this.attributes.get("linebreak")},enumerable:!1,configurable:!0}),e.prototype.coreParent=function(){for(var t=this,e=this,r=this.factory.getNodeClass("math");e&&e.isEmbellished&&e.coreMO()===this&&!(e instanceof r);)t=e,e=e.Parent;return t},e.prototype.coreText=function(t){if(!t)return"";if(t.isEmbellished)return t.coreMO().getText();for(;((t.isKind("mrow")||t.isKind("TeXAtom")||t.isKind("mstyle")||t.isKind("mphantom"))&&1===t.childNodes.length||t.isKind("munderover"))&&t.childNodes[0];)t=t.childNodes[0];return t.isToken?t.getText():""},e.prototype.hasSpacingAttributes=function(){return this.attributes.isSet("lspace")||this.attributes.isSet("rspace")},Object.defineProperty(e.prototype,"isAccent",{get:function(){var t=!1,e=this.coreParent().parent;if(e){var r=e.isKind("mover")?e.childNodes[e.over].coreMO()?"accent":"":e.isKind("munder")?e.childNodes[e.under].coreMO()?"accentunder":"":e.isKind("munderover")?this===e.childNodes[e.over].coreMO()?"accent":this===e.childNodes[e.under].coreMO()?"accentunder":"":"";if(r)t=void 0!==e.attributes.getExplicit(r)?t:this.attributes.get("accent")}return t},enumerable:!1,configurable:!0}),e.prototype.setTeXclass=function(t){var e=this.attributes.getList("form","fence"),r=e.form,i=e.fence;return void 0===this.getProperty("texClass")&&(this.attributes.isSet("lspace")||this.attributes.isSet("rspace"))?null:(i&&this.texClass===l.TEXCLASS.REL&&("prefix"===r&&(this.texClass=l.TEXCLASS.OPEN),"postfix"===r&&(this.texClass=l.TEXCLASS.CLOSE)),"‚Å°"===this.getText()?(t&&(t.texClass=l.TEXCLASS.OP,t.setProperty("fnOP",!0)),this.texClass=this.prevClass=l.TEXCLASS.NONE,t):this.adjustTeXclass(t))},e.prototype.adjustTeXclass=function(t){var e=this.texClass,r=this.prevClass;if(e===l.TEXCLASS.NONE)return t;if(t?(!t.getProperty("autoOP")||e!==l.TEXCLASS.BIN&&e!==l.TEXCLASS.REL||(r=t.texClass=l.TEXCLASS.ORD),r=this.prevClass=t.texClass||l.TEXCLASS.ORD,this.prevLevel=this.attributes.getInherited("scriptlevel")):r=this.prevClass=l.TEXCLASS.NONE,e!==l.TEXCLASS.BIN||r!==l.TEXCLASS.NONE&&r!==l.TEXCLASS.BIN&&r!==l.TEXCLASS.OP&&r!==l.TEXCLASS.REL&&r!==l.TEXCLASS.OPEN&&r!==l.TEXCLASS.PUNCT)if(r!==l.TEXCLASS.BIN||e!==l.TEXCLASS.REL&&e!==l.TEXCLASS.CLOSE&&e!==l.TEXCLASS.PUNCT){if(e===l.TEXCLASS.BIN){for(var i=this,s=this.parent;s&&s.parent&&s.isEmbellished&&(1===s.childNodes.length||!s.isKind("mrow")&&s.core()===i);)i=s,s=s.parent;s.childNodes[s.childNodes.length-1]===i&&(this.texClass=l.TEXCLASS.ORD)}}else t.texClass=this.prevClass=l.TEXCLASS.ORD;else this.texClass=l.TEXCLASS.ORD;return this},e.prototype.setInheritedAttributes=function(e,r,i,s){var n,l;void 0===e&&(e={}),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===s&&(s=!1),t.prototype.setInheritedAttributes.call(this,e,r,i,s);var c=this.getText(),u=o(this.handleExplicitForm(this.getForms()),3),h=u[0],f=u[1],p=u[2];this.attributes.setInherited("form",h);var d=this.constructor.OPTABLE,S=d[h][c]||d[f][c]||d[p][c];if(S){void 0===this.getProperty("texClass")&&(this.texClass=S[2]);try{for(var m=a(Object.keys(S[3]||{})),y=m.next();!y.done;y=m.next()){var C=y.value;this.attributes.setInherited(C,S[3][C])}}catch(t){n={error:t}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(n)throw n.error}}this.lspace=(S[0]+1)/18,this.rspace=(S[1]+1)/18}else{var v=this.getRange(c);if(v){void 0===this.getProperty("texClass")&&(this.texClass=v[2]);var b=this.constructor.MMLSPACING[v[2]];this.lspace=(b[0]+1)/18,this.rspace=(b[1]+1)/18}}},e.prototype.getForms=function(){for(var t=this,e=this.parent,r=this.Parent;r&&r.isEmbellished;)t=e,e=r.parent,r=r.Parent;if(e&&e.isKind("mrow")&&1!==e.nonSpaceLength()){if(e.firstNonSpace()===t)return["prefix","infix","postfix"];if(e.lastNonSpace()===t)return["postfix","infix","prefix"]}return["infix","prefix","postfix"]},e.prototype.handleExplicitForm=function(t){if(this.attributes.isSet("form")){var e=this.attributes.get("form");t=[e].concat(t.filter((function(t){return t!==e})))}return t},e.prototype.getRange=function(t){var e,r;if(!t.match(/^[\uD800-\uDBFF]?.$/))return null;var i=t.codePointAt(0),s=this.constructor.RANGES;try{for(var n=a(s),o=n.next();!o.done;o=n.next()){var l=o.value;if(l[0]<=i&&i<=l[1])return l;if(i<l[0])return null}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},e.defaults=n(n({},l.AbstractMmlTokenNode.defaults),{form:"infix",fence:!1,separator:!1,lspace:"thickmathspace",rspace:"thickmathspace",stretchy:!1,symmetric:!1,maxsize:"infinity",minsize:"0em",largeop:!1,movablelimits:!1,accent:!1,linebreak:"auto",lineleading:"1ex",linebreakstyle:"before",indentalign:"auto",indentshift:"0",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),e.RANGES=c.RANGES,e.MMLSPACING=c.MMLSPACING,e.OPTABLE=c.OPTABLE,e}(l.AbstractMmlTokenNode);e.MmlMo=u}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9tYXRoamF4LWZ1bGwvanMvY29yZS9NbWxUcmVlL01tbE5vZGVzL21vLmpzIl0sIm5hbWVzIjpbImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9fYXNzaWduIiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNhbGwiLCJhcHBseSIsIl9fcmVhZCIsIm8iLCJtIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJyIiwiZSIsImFyIiwibmV4dCIsImRvbmUiLCJwdXNoIiwidmFsdWUiLCJlcnJvciIsIl9fdmFsdWVzIiwiVHlwZUVycm9yIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiTW1sTW8iLCJNbWxOb2RlX2pzXzEiLCJPcGVyYXRvckRpY3Rpb25hcnlfanNfMSIsIl9zdXBlciIsIl90aGlzIiwiX3RleENsYXNzIiwibHNwYWNlIiwicnNwYWNlIiwiZ2V0IiwibW8iLCJnZXRUZXh0IiwiX2EiLCJoYW5kbGVFeHBsaWNpdEZvcm0iLCJnZXRGb3JtcyIsImZvcm0xIiwiZm9ybTIiLCJmb3JtMyIsIk9QVEFCTEVfMSIsIk9QVEFCTEUiLCJkZWYiLCJURVhDTEFTUyIsIlJFTCIsInNldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJhdHRyaWJ1dGVzIiwiY29yZVBhcmVudCIsImVtYmVsbGlzaGVkIiwicGFyZW50IiwibWF0aCIsImZhY3RvcnkiLCJnZXROb2RlQ2xhc3MiLCJpc0VtYmVsbGlzaGVkIiwiY29yZU1PIiwiUGFyZW50IiwiY29yZVRleHQiLCJpc0tpbmQiLCJjaGlsZE5vZGVzIiwiaXNUb2tlbiIsImhhc1NwYWNpbmdBdHRyaWJ1dGVzIiwiaXNTZXQiLCJhY2NlbnQiLCJub2RlIiwia2V5Iiwib3ZlciIsInVuZGVyIiwidW5kZWZpbmVkIiwiZ2V0RXhwbGljaXQiLCJzZXRUZVhjbGFzcyIsInByZXYiLCJnZXRMaXN0IiwiZm9ybSIsImZlbmNlIiwiZ2V0UHJvcGVydHkiLCJ0ZXhDbGFzcyIsIk9QRU4iLCJDTE9TRSIsIk9QIiwic2V0UHJvcGVydHkiLCJwcmV2Q2xhc3MiLCJOT05FIiwiYWRqdXN0VGVYY2xhc3MiLCJCSU4iLCJPUkQiLCJwcmV2TGV2ZWwiLCJnZXRJbmhlcml0ZWQiLCJQVU5DVCIsImNoaWxkIiwicGFyZW50XzEiLCJjb3JlIiwic2V0SW5oZXJpdGVkQXR0cmlidXRlcyIsImRpc3BsYXkiLCJsZXZlbCIsInByaW1lIiwiZV8xIiwiX2IiLCJzZXRJbmhlcml0ZWQiLCJfYyIsImtleXMiLCJfZCIsIm5hbWVfMSIsImVfMV8xIiwicmV0dXJuIiwicmFuZ2UiLCJnZXRSYW5nZSIsInNwYWNpbmciLCJNTUxTUEFDSU5HIiwibm9uU3BhY2VMZW5ndGgiLCJmaXJzdE5vblNwYWNlIiwibGFzdE5vblNwYWNlIiwiZm9ybXMiLCJmb3JtXzEiLCJjb25jYXQiLCJmaWx0ZXIiLCJuYW1lIiwiZV8yIiwibWF0Y2giLCJjb2RlUG9pbnRBdCIsInJhbmdlcyIsIlJBTkdFUyIsInJhbmdlc18xIiwicmFuZ2VzXzFfMSIsImVfMl8xIiwiZGVmYXVsdHMiLCJBYnN0cmFjdE1tbFRva2VuTm9kZSIsInNlcGFyYXRvciIsInN0cmV0Y2h5Iiwic3ltbWV0cmljIiwibWF4c2l6ZSIsIm1pbnNpemUiLCJsYXJnZW9wIiwibW92YWJsZWxpbWl0cyIsImxpbmVicmVhayIsImxpbmVsZWFkaW5nIiwibGluZWJyZWFrc3R5bGUiLCJpbmRlbnRhbGlnbiIsImluZGVudHNoaWZ0IiwiaW5kZW50dGFyZ2V0IiwiaW5kZW50YWxpZ25maXJzdCIsImluZGVudHNoaWZ0Zmlyc3QiLCJpbmRlbnRhbGlnbmxhc3QiLCJpbmRlbnRzaGlmdGxhc3QiXSwi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OUIsS0FBS3VILEdBRTFFLFFBQVUsR0FBSUwsRUFBSyxNQUFNQSxFQUFJcEcsT0FFakMsT0FBTyxNQUVYSyxFQUFNdUcsU0FBV2xJLEVBQVNBLEVBQVMsR0FBSTRCLEVBQWF1RyxxQkFBcUJELFVBQVcsQ0FBRXBELEtBQU0sUUFBU0MsT0FBTyxFQUFPcUQsV0FBVyxFQUFPbkcsT0FBUSxpQkFBa0JDLE9BQVEsaUJBQWtCbUcsVUFBVSxFQUFPQyxXQUFXLEVBQU9DLFFBQVMsV0FBWUMsUUFBUyxNQUFPQyxTQUFTLEVBQU9DLGVBQWUsRUFBT3RFLFFBQVEsRUFBT3VFLFVBQVcsT0FBUUMsWUFBYSxNQUFPQyxlQUFnQixTQUFVQyxZQUFhLE9BQVFDLFlBQWEsSUFBS0MsYUFBYyxHQUFJQyxpQkFBa0IsY0FBZUMsaUJBQWtCLGNBQWVDLGdCQUFpQixjQUFlQyxnQkFBaUIsZ0JBQ25pQnpILEVBQU1tRyxPQUFTakcsRUFBd0JpRyxPQUN2Q25HLEVBQU1zRixXQUFhcEYsRUFBd0JvRixXQUMzQ3RGLEVBQU1rQixRQUFVaEIsRUFBd0JnQixRQUNqQ2xCLEVBM1FDLENBNFFWQyxFQUFhdUcsc0JBQ2Z6RyxFQUFRQyxNQUFRQSIsImZpbGUiOiJkZTQxMDIzZjgwN2RjZWIyNWQzNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgICBpZiAoIW0pIHJldHVybiBvO1xuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICAgIH1cbiAgICByZXR1cm4gYXI7XG59O1xudmFyIF9fdmFsdWVzID0gKHRoaXMgJiYgdGhpcy5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykge1xuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5NbWxNbyA9IHZvaWQgMDtcbnZhciBNbWxOb2RlX2pzXzEgPSByZXF1aXJlKFwiLi4vTW1sTm9kZS5qc1wiKTtcbnZhciBPcGVyYXRvckRpY3Rpb25hcnlfanNfMSA9IHJlcXVpcmUoXCIuLi9PcGVyYXRvckRpY3Rpb25hcnkuanNcIik7XG52YXIgTW1sTW8gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNbWxNbywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNbWxNbygpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl90ZXhDbGFzcyA9IG51bGw7XG4gICAgICAgIF90aGlzLmxzcGFjZSA9IDUgLyAxODtcbiAgICAgICAgX3RoaXMucnNwYWNlID0gNSAvIDE4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNbWxNby5wcm90b3R5cGUsIFwidGV4Q2xhc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl90ZXhDbGFzcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBtbyA9IHRoaXMuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF9fcmVhZCh0aGlzLmhhbmRsZUV4cGxpY2l0Rm9ybSh0aGlzLmdldEZvcm1zKCkpLCAzKSwgZm9ybTEgPSBfYVswXSwgZm9ybTIgPSBfYVsxXSwgZm9ybTMgPSBfYVsyXTtcbiAgICAgICAgICAgICAgICB2YXIgT1BUQUJMRV8xID0gdGhpcy5jb25zdHJ1Y3Rvci5PUFRBQkxFO1xuICAgICAgICAgICAgICAgIHZhciBkZWYgPSBPUFRBQkxFXzFbZm9ybTFdW21vXSB8fCBPUFRBQkxFXzFbZm9ybTJdW21vXSB8fCBPUFRBQkxFXzFbZm9ybTNdW21vXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmID8gZGVmWzJdIDogTW1sTm9kZV9qc18xLlRFWENMQVNTLlJFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXhDbGFzcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RleENsYXNzID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTW1sTW8ucHJvdG90eXBlLCBcImtpbmRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnbW8nO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1tbE1vLnByb3RvdHlwZSwgXCJpc0VtYmVsbGlzaGVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNbWxNby5wcm90b3R5cGUsIFwiaGFzTmV3TGluZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlcy5nZXQoJ2xpbmVicmVhaycpID09PSAnbmV3bGluZSc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBNbWxNby5wcm90b3R5cGUuY29yZVBhcmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVtYmVsbGlzaGVkID0gdGhpcztcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgICAgIHZhciBtYXRoID0gdGhpcy5mYWN0b3J5LmdldE5vZGVDbGFzcygnbWF0aCcpO1xuICAgICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5pc0VtYmVsbGlzaGVkICYmIHBhcmVudC5jb3JlTU8oKSA9PT0gdGhpcyAmJiAhKHBhcmVudCBpbnN0YW5jZW9mIG1hdGgpKSB7XG4gICAgICAgICAgICBlbWJlbGxpc2hlZCA9IHBhcmVudDtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5QYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtYmVsbGlzaGVkO1xuICAgIH07XG4gICAgTW1sTW8ucHJvdG90eXBlLmNvcmVUZXh0ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnQuaXNFbWJlbGxpc2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5jb3JlTU8oKS5nZXRUZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKCgoKHBhcmVudC5pc0tpbmQoJ21yb3cnKSB8fCBwYXJlbnQuaXNLaW5kKCdUZVhBdG9tJykgfHwgcGFyZW50LmlzS2luZCgnbXN0eWxlJykgfHxcbiAgICAgICAgICAgIHBhcmVudC5pc0tpbmQoJ21waGFudG9tJykpICYmIHBhcmVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkgfHxcbiAgICAgICAgICAgIHBhcmVudC5pc0tpbmQoJ211bmRlcm92ZXInKSkgJiYgcGFyZW50LmNoaWxkTm9kZXNbMF0pIHtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocGFyZW50LmlzVG9rZW4gPyBwYXJlbnQuZ2V0VGV4dCgpIDogJycpO1xuICAgIH07XG4gICAgTW1sTW8ucHJvdG90eXBlLmhhc1NwYWNpbmdBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLmlzU2V0KCdsc3BhY2UnKSB8fFxuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmlzU2V0KCdyc3BhY2UnKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNbWxNby5wcm90b3R5cGUsIFwiaXNBY2NlbnRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhY2NlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5jb3JlUGFyZW50KCkucGFyZW50O1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gKG5vZGUuaXNLaW5kKCdtb3ZlcicpID9cbiAgICAgICAgICAgICAgICAgICAgKG5vZGUuY2hpbGROb2Rlc1tub2RlLm92ZXJdLmNvcmVNTygpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICdhY2NlbnQnIDogJycpIDpcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pc0tpbmQoJ211bmRlcicpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIChub2RlLmNoaWxkTm9kZXNbbm9kZS51bmRlcl0uY29yZU1PKCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY2NlbnR1bmRlcicgOiAnJykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5pc0tpbmQoJ211bmRlcm92ZXInKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgPT09IG5vZGUuY2hpbGROb2Rlc1tub2RlLm92ZXJdLmNvcmVNTygpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjY2VudCcgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzID09PSBub2RlLmNoaWxkTm9kZXNbbm9kZS51bmRlcl0uY29yZU1PKCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjY2VudHVuZGVyJyA6ICcnKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJycpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbm9kZS5hdHRyaWJ1dGVzLmdldEV4cGxpY2l0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGFjY2VudCA9ICh2YWx1ZSAhPT0gdW5kZWZpbmVkID8gYWNjZW50IDogdGhpcy5hdHRyaWJ1dGVzLmdldCgnYWNjZW50JykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2NlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBNbWxNby5wcm90b3R5cGUuc2V0VGVYY2xhc3MgPSBmdW5jdGlvbiAocHJldikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0TGlzdCgnZm9ybScsICdmZW5jZScpLCBmb3JtID0gX2EuZm9ybSwgZmVuY2UgPSBfYS5mZW5jZTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0UHJvcGVydHkoJ3RleENsYXNzJykgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKHRoaXMuYXR0cmlidXRlcy5pc1NldCgnbHNwYWNlJykgfHwgdGhpcy5hdHRyaWJ1dGVzLmlzU2V0KCdyc3BhY2UnKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmZW5jZSAmJiB0aGlzLnRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuUkVMKSB7XG4gICAgICAgICAgICBpZiAoZm9ybSA9PT0gJ3ByZWZpeCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleENsYXNzID0gTW1sTm9kZV9qc18xLlRFWENMQVNTLk9QRU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybSA9PT0gJ3Bvc3RmaXgnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXhDbGFzcyA9IE1tbE5vZGVfanNfMS5URVhDTEFTUy5DTE9TRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nZXRUZXh0KCkgPT09ICdcXHUyMDYxJykge1xuICAgICAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2LnRleENsYXNzID0gTW1sTm9kZV9qc18xLlRFWENMQVNTLk9QO1xuICAgICAgICAgICAgICAgIHByZXYuc2V0UHJvcGVydHkoJ2ZuT1AnLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGV4Q2xhc3MgPSB0aGlzLnByZXZDbGFzcyA9IE1tbE5vZGVfanNfMS5URVhDTEFTUy5OT05FO1xuICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRqdXN0VGVYY2xhc3MocHJldik7XG4gICAgfTtcbiAgICBNbWxNby5wcm90b3R5cGUuYWRqdXN0VGVYY2xhc3MgPSBmdW5jdGlvbiAocHJldikge1xuICAgICAgICB2YXIgdGV4Q2xhc3MgPSB0aGlzLnRleENsYXNzO1xuICAgICAgICB2YXIgcHJldkNsYXNzID0gdGhpcy5wcmV2Q2xhc3M7XG4gICAgICAgIGlmICh0ZXhDbGFzcyA9PT0gTW1sTm9kZV9qc18xLlRFWENMQVNTLk5PTkUpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICBpZiAocHJldi5nZXRQcm9wZXJ0eSgnYXV0b09QJykgJiYgKHRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuQklOIHx8IHRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuUkVMKSkge1xuICAgICAgICAgICAgICAgIHByZXZDbGFzcyA9IHByZXYudGV4Q2xhc3MgPSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1JEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldkNsYXNzID0gdGhpcy5wcmV2Q2xhc3MgPSAocHJldi50ZXhDbGFzcyB8fCBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1JEKTtcbiAgICAgICAgICAgIHRoaXMucHJldkxldmVsID0gdGhpcy5hdHRyaWJ1dGVzLmdldEluaGVyaXRlZCgnc2NyaXB0bGV2ZWwnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXZDbGFzcyA9IHRoaXMucHJldkNsYXNzID0gTW1sTm9kZV9qc18xLlRFWENMQVNTLk5PTkU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuQklOICYmXG4gICAgICAgICAgICAocHJldkNsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuTk9ORSB8fCBwcmV2Q2xhc3MgPT09IE1tbE5vZGVfanNfMS5URVhDTEFTUy5CSU4gfHwgcHJldkNsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1AgfHxcbiAgICAgICAgICAgICAgICBwcmV2Q2xhc3MgPT09IE1tbE5vZGVfanNfMS5URVhDTEFTUy5SRUwgfHwgcHJldkNsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1BFTiB8fCBwcmV2Q2xhc3MgPT09IE1tbE5vZGVfanNfMS5URVhDTEFTUy5QVU5DVCkpIHtcbiAgICAgICAgICAgIHRoaXMudGV4Q2xhc3MgPSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1JEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByZXZDbGFzcyA9PT0gTW1sTm9kZV9qc18xLlRFWENMQVNTLkJJTiAmJlxuICAgICAgICAgICAgKHRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuUkVMIHx8IHRleENsYXNzID09PSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuQ0xPU0UgfHwgdGV4Q2xhc3MgPT09IE1tbE5vZGVfanNfMS5URVhDTEFTUy5QVU5DVCkpIHtcbiAgICAgICAgICAgIHByZXYudGV4Q2xhc3MgPSB0aGlzLnByZXZDbGFzcyA9IE1tbE5vZGVfanNfMS5URVhDTEFTUy5PUkQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGV4Q2xhc3MgPT09IE1tbE5vZGVfanNfMS5URVhDTEFTUy5CSU4pIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFyZW50XzEgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnRfMSAmJiBwYXJlbnRfMS5wYXJlbnQgJiYgcGFyZW50XzEuaXNFbWJlbGxpc2hlZCAmJlxuICAgICAgICAgICAgICAgIChwYXJlbnRfMS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSB8fFxuICAgICAgICAgICAgICAgICAgICAoIXBhcmVudF8xLmlzS2luZCgnbXJvdycpICYmIHBhcmVudF8xLmNvcmUoKSA9PT0gY2hpbGQpKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkID0gcGFyZW50XzE7XG4gICAgICAgICAgICAgICAgcGFyZW50XzEgPSBwYXJlbnRfMS5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50XzEuY2hpbGROb2Rlc1twYXJlbnRfMS5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdID09PSBjaGlsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4Q2xhc3MgPSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1MuT1JEO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTW1sTW8ucHJvdG90eXBlLnNldEluaGVyaXRlZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoYXR0cmlidXRlcywgZGlzcGxheSwgbGV2ZWwsIHByaW1lKSB7XG4gICAgICAgIHZhciBlXzEsIF9hO1xuICAgICAgICBpZiAoYXR0cmlidXRlcyA9PT0gdm9pZCAwKSB7IGF0dHJpYnV0ZXMgPSB7fTsgfVxuICAgICAgICBpZiAoZGlzcGxheSA9PT0gdm9pZCAwKSB7IGRpc3BsYXkgPSBmYWxzZTsgfVxuICAgICAgICBpZiAobGV2ZWwgPT09IHZvaWQgMCkgeyBsZXZlbCA9IDA7IH1cbiAgICAgICAgaWYgKHByaW1lID09PSB2b2lkIDApIHsgcHJpbWUgPSBmYWxzZTsgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldEluaGVyaXRlZEF0dHJpYnV0ZXMuY2FsbCh0aGlzLCBhdHRyaWJ1dGVzLCBkaXNwbGF5LCBsZXZlbCwgcHJpbWUpO1xuICAgICAgICB2YXIgbW8gPSB0aGlzLmdldFRleHQoKTtcbiAgICAgICAgdmFyIF9iID0gX19yZWFkKHRoaXMuaGFuZGxlRXhwbGljaXRGb3JtKHRoaXMuZ2V0Rm9ybXMoKSksIDMpLCBmb3JtMSA9IF9iWzBdLCBmb3JtMiA9IF9iWzFdLCBmb3JtMyA9IF9iWzJdO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMuc2V0SW5oZXJpdGVkKCdmb3JtJywgZm9ybTEpO1xuICAgICAgICB2YXIgT1BUQUJMRSA9IHRoaXMuY29uc3RydWN0b3IuT1BUQUJMRTtcbiAgICAgICAgdmFyIGRlZiA9IE9QVEFCTEVbZm9ybTFdW21vXSB8fCBPUFRBQkxFW2Zvcm0yXVttb10gfHwgT1BUQUJMRVtmb3JtM11bbW9dO1xuICAgICAgICBpZiAoZGVmKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRQcm9wZXJ0eSgndGV4Q2xhc3MnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXhDbGFzcyA9IGRlZlsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyhPYmplY3Qua2V5cyhkZWZbM10gfHwge30pKSwgX2QgPSBfYy5uZXh0KCk7ICFfZC5kb25lOyBfZCA9IF9jLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZV8xID0gX2QudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5zZXRJbmhlcml0ZWQobmFtZV8xLCBkZWZbM11bbmFtZV8xXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sc3BhY2UgPSAoZGVmWzBdICsgMSkgLyAxODtcbiAgICAgICAgICAgIHRoaXMucnNwYWNlID0gKGRlZlsxXSArIDEpIC8gMTg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldFJhbmdlKG1vKTtcbiAgICAgICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFByb3BlcnR5KCd0ZXhDbGFzcycpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXhDbGFzcyA9IHJhbmdlWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3BhY2luZyA9IHRoaXMuY29uc3RydWN0b3IuTU1MU1BBQ0lOR1tyYW5nZVsyXV07XG4gICAgICAgICAgICAgICAgdGhpcy5sc3BhY2UgPSAoc3BhY2luZ1swXSArIDEpIC8gMTg7XG4gICAgICAgICAgICAgICAgdGhpcy5yc3BhY2UgPSAoc3BhY2luZ1sxXSArIDEpIC8gMTg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1tbE1vLnByb3RvdHlwZS5nZXRGb3JtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvcmUgPSB0aGlzO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIHZhciBQYXJlbnQgPSB0aGlzLlBhcmVudDtcbiAgICAgICAgd2hpbGUgKFBhcmVudCAmJiBQYXJlbnQuaXNFbWJlbGxpc2hlZCkge1xuICAgICAgICAgICAgY29yZSA9IHBhcmVudDtcbiAgICAgICAgICAgIHBhcmVudCA9IFBhcmVudC5wYXJlbnQ7XG4gICAgICAgICAgICBQYXJlbnQgPSBQYXJlbnQuUGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LmlzS2luZCgnbXJvdycpICYmIHBhcmVudC5ub25TcGFjZUxlbmd0aCgpICE9PSAxKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50LmZpcnN0Tm9uU3BhY2UoKSA9PT0gY29yZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbJ3ByZWZpeCcsICdpbmZpeCcsICdwb3N0Zml4J107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50Lmxhc3ROb25TcGFjZSgpID09PSBjb3JlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsncG9zdGZpeCcsICdpbmZpeCcsICdwcmVmaXgnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWydpbmZpeCcsICdwcmVmaXgnLCAncG9zdGZpeCddO1xuICAgIH07XG4gICAgTW1sTW8ucHJvdG90eXBlLmhhbmRsZUV4cGxpY2l0Rm9ybSA9IGZ1bmN0aW9uIChmb3Jtcykge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzLmlzU2V0KCdmb3JtJykpIHtcbiAgICAgICAgICAgIHZhciBmb3JtXzEgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0KCdmb3JtJyk7XG4gICAgICAgICAgICBmb3JtcyA9IFtmb3JtXzFdLmNvbmNhdChmb3Jtcy5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIChuYW1lICE9PSBmb3JtXzEpOyB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm1zO1xuICAgIH07XG4gICAgTW1sTW8ucHJvdG90eXBlLmdldFJhbmdlID0gZnVuY3Rpb24gKG1vKSB7XG4gICAgICAgIHZhciBlXzIsIF9hO1xuICAgICAgICBpZiAoIW1vLm1hdGNoKC9eW1xcdUQ4MDAtXFx1REJGRl0/LiQvKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG4gPSBtby5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuY29uc3RydWN0b3IuUkFOR0VTO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgcmFuZ2VzXzEgPSBfX3ZhbHVlcyhyYW5nZXMpLCByYW5nZXNfMV8xID0gcmFuZ2VzXzEubmV4dCgpOyAhcmFuZ2VzXzFfMS5kb25lOyByYW5nZXNfMV8xID0gcmFuZ2VzXzEubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VbMF0gPD0gbiAmJiBuIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG4gPCByYW5nZVswXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZXNfMV8xICYmICFyYW5nZXNfMV8xLmRvbmUgJiYgKF9hID0gcmFuZ2VzXzEucmV0dXJuKSkgX2EuY2FsbChyYW5nZXNfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBNbWxNby5kZWZhdWx0cyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBNbWxOb2RlX2pzXzEuQWJzdHJhY3RNbWxUb2tlbk5vZGUuZGVmYXVsdHMpLCB7IGZvcm06ICdpbmZpeCcsIGZlbmNlOiBmYWxzZSwgc2VwYXJhdG9yOiBmYWxzZSwgbHNwYWNlOiAndGhpY2ttYXRoc3BhY2UnLCByc3BhY2U6ICd0aGlja21hdGhzcGFjZScsIHN0cmV0Y2h5OiBmYWxzZSwgc3ltbWV0cmljOiBmYWxzZSwgbWF4c2l6ZTogJ2luZmluaXR5JywgbWluc2l6ZTogJzBlbScsIGxhcmdlb3A6IGZhbHNlLCBtb3ZhYmxlbGltaXRzOiBmYWxzZSwgYWNjZW50OiBmYWxzZSwgbGluZWJyZWFrOiAnYXV0bycsIGxpbmVsZWFkaW5nOiAnMWV4JywgbGluZWJyZWFrc3R5bGU6ICdiZWZvcmUnLCBpbmRlbnRhbGlnbjogJ2F1dG8nLCBpbmRlbnRzaGlmdDogJzAnLCBpbmRlbnR0YXJnZXQ6ICcnLCBpbmRlbnRhbGlnbmZpcnN0OiAnaW5kZW50YWxpZ24nLCBpbmRlbnRzaGlmdGZpcnN0OiAnaW5kZW50c2hpZnQnLCBpbmRlbnRhbGlnbmxhc3Q6ICdpbmRlbnRhbGlnbicsIGluZGVudHNoaWZ0bGFzdDogJ2luZGVudHNoaWZ0JyB9KTtcbiAgICBNbWxNby5SQU5HRVMgPSBPcGVyYXRvckRpY3Rpb25hcnlfanNfMS5SQU5HRVM7XG4gICAgTW1sTW8uTU1MU1BBQ0lORyA9IE9wZXJhdG9yRGljdGlvbmFyeV9qc18xLk1NTFNQQUNJTkc7XG4gICAgTW1sTW8uT1BUQUJMRSA9IE9wZXJhdG9yRGljdGlvbmFyeV9qc18xLk9QVEFCTEU7XG4gICAgcmV0dXJuIE1tbE1vO1xufShNbWxOb2RlX2pzXzEuQWJzdHJhY3RNbWxUb2tlbk5vZGUpKTtcbmV4cG9ydHMuTW1sTW8gPSBNbWxNbztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=