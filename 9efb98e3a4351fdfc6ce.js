(global.webpackChunkvht11=global.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\pixi-scrollbox\\dist\\scrollbox.es"],{"./node_modules/pixi-scrollbox/dist/scrollbox.es.js":(t,i,o)=>{"use strict";o.r(i),o.d(i,{Scrollbox:()=>a});var s=o("./node_modules/pixi.js/lib/pixi.es.js"),r=o("./node_modules/pixi-viewport/dist/viewport.es.js"),e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var l,n=(function(t,i){(function(){var i,o;o=i={linear:function(t,i,o,s){return o*t/s+i},easeInQuad:function(t,i,o,s){return o*(t/=s)*t+i},easeOutQuad:function(t,i,o,s){return-o*(t/=s)*(t-2)+i},easeInOutQuad:function(t,i,o,s){return(t/=s/2)<1?o/2*t*t+i:-o/2*(--t*(t-2)-1)+i},easeInCubic:function(t,i,o,s){return o*(t/=s)*t*t+i},easeOutCubic:function(t,i,o,s){return o*((t=t/s-1)*t*t+1)+i},easeInOutCubic:function(t,i,o,s){return(t/=s/2)<1?o/2*t*t*t+i:o/2*((t-=2)*t*t+2)+i},easeInQuart:function(t,i,o,s){return o*(t/=s)*t*t*t+i},easeOutQuart:function(t,i,o,s){return-o*((t=t/s-1)*t*t*t-1)+i},easeInOutQuart:function(t,i,o,s){return(t/=s/2)<1?o/2*t*t*t*t+i:-o/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(t,i,o,s){return o*(t/=s)*t*t*t*t+i},easeOutQuint:function(t,i,o,s){return o*((t=t/s-1)*t*t*t*t+1)+i},easeInOutQuint:function(t,i,o,s){return(t/=s/2)<1?o/2*t*t*t*t*t+i:o/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(t,i,o,s){return-o*Math.cos(t/s*(Math.PI/2))+o+i},easeOutSine:function(t,i,o,s){return o*Math.sin(t/s*(Math.PI/2))+i},easeInOutSine:function(t,i,o,s){return-o/2*(Math.cos(Math.PI*t/s)-1)+i},easeInExpo:function(t,i,o,s){return 0===t?i:o*Math.pow(2,10*(t/s-1))+i},easeOutExpo:function(t,i,o,s){return t===s?i+o:o*(1-Math.pow(2,-10*t/s))+i},easeInOutExpo:function(t,i,o,s){return(t/=s/2)<1?o/2*Math.pow(2,10*(t-1))+i:o/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(t,i,o,s){return-o*(Math.sqrt(1-(t/=s)*t)-1)+i},easeOutCirc:function(t,i,o,s){return o*Math.sqrt(1-(t=t/s-1)*t)+i},easeInOutCirc:function(t,i,o,s){return(t/=s/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+i:o/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(t,i,o,s){var r,e,l;return l=1.70158,0===t||(t/=s),(e=0)||(e=.3*s),(r=o)<Math.abs(o)?(r=o,l=e/4):l=e/(2*Math.PI)*Math.asin(o/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*s-l)*(2*Math.PI)/e)+i},easeOutElastic:function(t,i,o,s){var r,e,l;return l=1.70158,0===t||(t/=s),(e=0)||(e=.3*s),(r=o)<Math.abs(o)?(r=o,l=e/4):l=e/(2*Math.PI)*Math.asin(o/r),r*Math.pow(2,-10*t)*Math.sin((t*s-l)*(2*Math.PI)/e)+o+i},easeInOutElastic:function(t,i,o,s){var r,e,l;return l=1.70158,0===t||(t/=s/2),(e=0)||(e=s*(.3*1.5)),(r=o)<Math.abs(o)?(r=o,l=e/4):l=e/(2*Math.PI)*Math.asin(o/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*s-l)*(2*Math.PI)/e)*-.5+i:r*Math.pow(2,-10*(t-=1))*Math.sin((t*s-l)*(2*Math.PI)/e)*.5+o+i},easeInBack:function(t,i,o,s,r){return void 0===r&&(r=1.70158),o*(t/=s)*t*((r+1)*t-r)+i},easeOutBack:function(t,i,o,s,r){return void 0===r&&(r=1.70158),o*((t=t/s-1)*t*((r+1)*t+r)+1)+i},easeInOutBack:function(t,i,o,s,r){return void 0===r&&(r=1.70158),(t/=s/2)<1?o/2*(t*t*((1+(r*=1.525))*t-r))+i:o/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+i},easeInBounce:function(t,o,s,r){return s-i.easeOutBounce(r-t,0,s,r)+o},easeOutBounce:function(t,i,o,s){return(t/=s)<1/2.75?o*(7.5625*t*t)+i:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+i:o*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,o,s,r){return t<r/2?.5*i.easeInBounce(2*t,0,s,r)+o:.5*i.easeOutBounce(2*t-r,0,s,r)+.5*s+o}},t.exports=o}).call(e)}(l={exports:{}},l.exports),l.exports);const h={boxWidth:100,boxHeight:100,scrollbarSize:10,scrollbarBackground:14540253,scrollbarBackgroundAlpha:1,scrollbarForeground:8947848,scrollbarForegroundAlpha:1,dragScroll:!0,stopPropagation:!0,scrollbarOffsetHorizontal:0,scrollbarOffsetVertical:0,underflow:"top-left",fadeScrollbar:!1,fadeScrollbarTime:1e3,fadeScrollboxWait:3e3,fadeScrollboxEase:"easeInOutSine",passiveWheel:!1,clampWheel:!0};class a extends s.Container{constructor(t={}){if(super(),this.options=Object.assign({},h,t),t.overflow&&(this.options.overflowX=this.options.overflowY=t.overflow),this.ease="function"==typeof this.options.fadeScrollboxEase?this.options.fadeScrollboxEase:n[this.options.fadeScrollboxEase],this.content=this.addChild(new r.Viewport({passiveWheel:this.options.passiveWheel,stopPropagation:this.options.stopPropagation,screenWidth:this.options.boxWidth,screenHeight:this.options.boxHeight,interaction:this.options.interaction})),this.content.decelerate().on("moved",(()=>this._drawScrollbars())),t.ticker)this.options.ticker=t.ticker;else{let i;const o=s;i=parseInt(/^(\d+)\./.exec(s.VERSION)[1])<5?o.ticker.shared:o.Ticker.shared,this.options.ticker=t.ticker||i}this.scrollbar=this.addChild(new s.Graphics),this.scrollbar.interactive=!0,this.scrollbar.on("pointerdown",this.scrollbarDown,this),this.interactive=!0,this.on("pointermove",this.scrollbarMove,this),this.on("pointerup",this.scrollbarUp,this),this.on("pointercancel",this.scrollbarUp,this),this.on("pointerupoutside",this.scrollbarUp,this),this._maskContent=this.addChild(new s.Graphics),this.update(),this.options.noTicker||(this.tickerFunction=()=>this.updateLoop(Math.min(this.options.ticker.elapsedMS,16.6667)),this.options.ticker.add(this.tickerFunction))}get scrollbarOffsetHorizontal(){return this.options.scrollbarOffsetHorizontal}set scrollbarOffsetHorizontal(t){this.options.scrollbarOffsetHorizontal=t}get scrollbarOffsetVertical(){return this.options.scrollbarOffsetVertical}set scrollbarOffsetVertical(t){this.options.scrollbarOffsetVertical=t}get disable(){return this._disabled}set disable(t){this._disabled!==t&&(this._disabled=t,this.update())}get stopPropagation(){return this.options.stopPropagation}set stopPropagation(t){this.options.stopPropagation=t}get dragScroll(){return this.options.dragScroll}set dragScroll(t){this.options.dragScroll=t,t?this.content.drag():void 0!==this.content.removePlugin?this.content.removePlugin("drag"):this.content.plugins.remove("drag"),this.update()}get boxWidth(){return this.options.boxWidth}set boxWidth(t){this.options.boxWidth=t,this.content.screenWidth=t,this.update()}get overflow(){return this.options.overflow}set overflow(t){this.options.overflow=t,this.options.overflowX=t,this.options.overflowY=t,this.update()}get overflowX(){return this.options.overflowX}set overflowX(t){this.options.overflowX=t,this.update()}get overflowY(){return this.options.overflowY}set overflowY(t){this.options.overflowY=t,this.update()}get boxHeight(){return this.options.boxHeight}set boxHeight(t){this.options.boxHeight=t,this.content.screenHeight=t,this.update()}get scrollbarSize(){return this.options.scrollbarSize}set scrollbarSize(t){this.options.scrollbarSize=t}get contentWidth(){return this.options.boxWidth-(this.isScrollbarVertical?this.options.scrollbarSize:0)}get contentHeight(){return this.options.boxHeight-(this.isScrollbarHorizontal?this.options.scrollbarSize:0)}get isScrollbarVertical(){return this._isScrollbarVertical}get isScrollbarHorizontal(){return this._isScrollbarHorizontal}get scrollTop(){return this.content.top}set scrollTop(t){this.content.top=t,this._drawScrollbars()}get scrollLeft(){return this.content.left}set scrollLeft(t){this.content.left=t,this._drawScrollbars()}get scrollWidth(){return this._scrollWidth||this.content.width}set scrollWidth(t){this._scrollWidth=t}get scrollHeight(){return this._scrollHeight||this.content.height}set scrollHeight(t){this._scrollHeight=t}_drawScrollbars(){this._isScrollbarHorizontal="scroll"===this.overflowX||-1===["hidden","none"].indexOf(this.overflowX)&&this.scrollWidth>this.options.boxWidth,this._isScrollbarVertical="scroll"===this.overflowY||-1===["hidden","none"].indexOf(this.overflowY)&&this.scrollHeight>this.options.boxHeight,this.scrollbar.clear();let t={left:0};t.right=this.scrollWidth+(this._isScrollbarVertical?this.options.scrollbarSize:0),t.top=0,t.bottom=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);const i=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0),o=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop=this.content.top/o*this.boxHeight,this.scrollbarTop=this.scrollbarTop<0?0:this.scrollbarTop,this.scrollbarHeight=this.boxHeight/o*this.boxHeight,this.scrollbarHeight=this.scrollbarTop+this.scrollbarHeight>this.boxHeight?this.boxHeight-this.scrollbarTop:this.scrollbarHeight,this.scrollbarLeft=this.content.left/i*this.boxWidth,this.scrollbarLeft=this.scrollbarLeft<0?0:this.scrollbarLeft,this.scrollbarWidth=this.boxWidth/i*this.boxWidth,this.scrollbarWidth=this.scrollbarWidth+this.scrollbarLeft>this.boxWidth?this.boxWidth-this.scrollbarLeft:this.scrollbarWidth,this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,0,this.scrollbarSize,this.boxHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(0,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.boxWidth,this.scrollbarSize).endFill(),this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,this.scrollbarTop,this.scrollbarSize,this.scrollbarHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.scrollbarLeft,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.scrollbarWidth,this.scrollbarSize).endFill(),this.activateFade()}_drawMask(){this._maskContent.beginFill(0).drawRect(0,0,this.boxWidth,this.boxHeight).endFill(),this.content.mask=this._maskContent}update(){if(this.content.mask=null,this._maskContent.clear(),!this._disabled){this._drawScrollbars(),this._drawMask();const t=this.isScrollbarHorizontal&&this.isScrollbarVertical?"all":this.isScrollbarHorizontal?"x":"y";null!==t&&(this.options.dragScroll&&this.content.drag({clampWheel:this.options.clampWheel,direction:t}),this.content.clamp({direction:t,underflow:this.options.underflow}))}}updateLoop(t){if(this.fade){if(this.fade.wait>0){if(this.fade.wait-=t,!(this.fade.wait<=0))return;t+=this.fade.wait}this.fade.duration+=t,this.fade.duration>=this.options.fadeScrollbarTime?(this.fade=null,this.scrollbar.alpha=0):this.scrollbar.alpha=this.ease(this.fade.duration,1,-1,this.options.fadeScrollbarTime),this.content.dirty=!0}}get dirty(){return this.content.dirty}set dirty(t){this.content.dirty=t}activateFade(){!this.fade&&this.options.fade&&(this.scrollbar.alpha=1,this.fade={wait:this.options.fadeScrollboxWait,duration:0})}scrollbarDown(t){const i=this.toLocal(t.data.global);return this.isScrollbarHorizontal&&i.y>this.boxHeight-this.scrollbarSize?(i.x>=this.scrollbarLeft&&i.x<=this.scrollbarLeft+this.scrollbarWidth?this.pointerDown={type:"horizontal",last:i}:i.x>this.scrollbarLeft?(this.content.left+=this.content.worldScreenWidth,this.update()):(this.content.left-=this.content.worldScreenWidth,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):this.isScrollbarVertical&&i.x>this.boxWidth-this.scrollbarSize?(i.y>=this.scrollbarTop&&i.y<=this.scrollbarTop+this.scrollbarWidth?this.pointerDown={type:"vertical",last:i}:i.y>this.scrollbarTop?(this.content.top+=this.content.worldScreenHeight,this.update()):(this.content.top-=this.content.worldScreenHeight,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):void 0}scrollbarMove(t){if(this.pointerDown){if("horizontal"===this.pointerDown.type){const i=this.toLocal(t.data.global),o=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0);this.scrollbarLeft+=i.x-this.pointerDown.last.x,this.content.left=this.scrollbarLeft/this.boxWidth*o,this.pointerDown.last=i,this.update()}else if("vertical"===this.pointerDown.type){const i=this.toLocal(t.data.global),o=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop+=i.y-this.pointerDown.last.y,this.content.top=this.scrollbarTop/this.boxHeight*o,this.pointerDown.last=i,this.update()}this.options.stopPropagation&&t.stopPropagation()}}scrollbarUp(){this.pointerDown=null}resize(t){this.options.boxWidth=void 0!==t.boxWidth?t.boxWidth:this.options.boxWidth,this.options.boxHeight=void 0!==t.boxHeight?t.boxHeight:this.options.boxHeight,t.scrollWidth&&(this.scrollWidth=t.scrollWidth),t.scrollHeight&&(this.scrollHeight=t.scrollHeight),this.content.resize(this.options.boxWidth,this.options.boxHeight,this.scrollWidth,this.scrollHeight),this.update()}ensureVisible(t,i,o,s){this.content.ensureVisible(t,i,o,s),this._drawScrollbars()}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9waXhpLXNjcm9sbGJveC9kaXN0L3Njcm9sbGJveC5lcy5qcyJdLCJuYW1lcyI6WyJjb21tb25qc0dsb2JhbCIsImdsb2JhbFRoaXMiLCJ3aW5kb3ciLCJnbG9iYWwiLCJzZWxmIiwibW9kdWxlIiwicGVubmVyIiwiZXhwb3J0cyIsImZhY3RvcnkiLCJsaW5lYXIiLCJ0IiwiYiIsImMiLCJkIiwiZWFzZUluUXVhZCIsImVhc2VPdXRRdWFkIiwiZWFzZUluT3V0UXVhZCIsImVhc2VJbkN1YmljIiwiZWFzZU91dEN1YmljIiwiZWFzZUluT3V0Q3ViaWMiLCJlYXNlSW5RdWFydCIsImVhc2VPdXRRdWFydCIsImVhc2VJbk91dFF1YXJ0IiwiZWFzZUluUXVpbnQiLCJlYXNlT3V0UXVpbnQiLCJlYXNlSW5PdXRRdWludCIsImVhc2VJblNpbmUiLCJNYXRoIiwiY29zIiwiUEkiLCJlYXNlT3V0U2luZSIsInNpbiIsImVhc2VJbk91dFNpbmUiLCJlYXNlSW5FeHBvIiwicG93IiwiZWFzZU91dEV4cG8iLCJlYXNlSW5PdXRFeHBvIiwiZWFzZUluQ2lyYyIsInNxcnQiLCJlYXNlT3V0Q2lyYyIsImVhc2VJbk91dENpcmMiLCJlYXNlSW5FbGFzdGljIiwiYSIsInAiLCJzIiwiYWJzIiwiYXNpbiIsImVhc2VPdXRFbGFzdGljIiwiZWFzZUluT3V0RWxhc3RpYyIsImVhc2VJbkJhY2siLCJlYXNlT3V0QmFjayIsImVhc2VJbk91dEJhY2siLCJlYXNlSW5Cb3VuY2UiLCJlYXNlT3V0Qm91bmNlIiwiZWFzZUluT3V0Qm91bmNlIiwiY2FsbCIsImZuIiwic2Nyb2xsYm94T3B0aW9ucyIsIlNjcm9sbGJveCIsIkNvbnRhaW5lciIsIm9wdGlvbnMiLCJzdXBlciIsInRoaXMiLCJPYmplY3QiLCJhc3NpZ24iLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsIm92ZXJmbG93WSIsImVhc2UiLCJmYWRlU2Nyb2xsYm94RWFzZSIsImNvbnRlbnQiLCJhZGRDaGlsZCIsIlZpZXdwb3J0IiwicGFzc2l2ZVdoZWVsIiwic3RvcFByb3BhZ2F0aW9uIiwic2NyZWVuV2lkdGgiLCJib3hXaWR0aCIsInNjcmVlbkhlaWdodCIsImJveEhlaWdodCIsImludGVyYWN0aW9uIiwiZGVjZWxlcmF0ZSIsIm9uIiwiX2RyYXdTY3JvbGxiYXJzIiwidGlja2VyIiwicGl4aU5TIiwicGFyc2VJbnQiLCJleGVjIiwiVkVSU0lPTiIsInNoYXJlZCIsIlRpY2tlciIsInNjcm9sbGJhciIsIkdyYXBoaWNzIiwiaW50ZXJhY3RpdmUiLCJzY3JvbGxiYXJEb3duIiwic2Nyb2xsYmFyTW92ZSIsInNjcm9sbGJhclVwIiwiX21hc2tDb250ZW50IiwidXBkYXRlIiwibm9UaWNrZXIiLCJ0aWNrZXJGdW5jdGlvbiIsInVwZGF0ZUxvb3AiLCJtaW4iLCJlbGFwc2VkTVMiLCJhZGQiLCJzY3JvbGxiYXJPZmZzZXRIb3Jpem9udGFsIiwidmFsdWUiLCJzY3JvbGxiYXJPZmZzZXRWZXJ0aWNhbCIsIl9kaXNhYmxlZCIsImRyYWdTY3JvbGwiLCJkcmFnIiwicmVtb3ZlUGx1Z2luIiwicGx1Z2lucyIsInJlbW92ZSIsInNjcm9sbGJhclNpemUiLCJpc1Njcm9sbGJhclZlcnRpY2FsIiwiaXNTY3JvbGxiYXJIb3Jpem9udGFsIiwiX2lzU2Nyb2xsYmFyVmVydGljYWwiLCJfaXNTY3JvbGxiYXJIb3Jpem9udGFsIiwidG9wIiwibGVmdCIsIl9zY3JvbGxXaWR0aCIsIndpZHRoIiwiX3Njcm9sbEhlaWdodCIsImhlaWdodCIsImluZGV4T2YiLCJzY3JvbGxXaWR0aCIsInNjcm9sbEhlaWdodCIsImNsZWFyIiwicmlnaHQiLCJib3R0b20iLCJzY3JvbGxiYXJUb3AiLCJzY3JvbGxiYXJIZWlnaHQiLCJzY3JvbGxiYXJMZWZ0Iiwic2Nyb2xsYmFyV2lkdGgiLCJiZWdpbkZpbGwiLCJzY3JvbGxiYXJCYWNrZ3JvdW5kIiwic2Nyb2xsYmFyQmFja2dyb3VuZEFscGhhIiwiZHJhd1JlY3QiLCJlbmRGaWxsIiwic2Nyb2xsYmFyRm9yZWdyb3VuZCIsInNjcm9sbGJhckZvcmVncm91bmRBbHBoYSIsImFjdGl2YXRlRmFkZSIsIm1hc2siLCJfZHJhd01hc2siLCJkaXJlY3Rpb24iLCJjbGFtcFdoZWVsIiwiY2xhbXAiLCJ1bmRlcmZsb3ciLCJlbGFwc2VkIiwiZmFkZSIsIndhaXQiLCJkdXJhdGlvbiIsImZhZGVTY3JvbGxiYXJUaW1lIiwiYWxwaGEiLCJkaXJ0eSIsImZhZGVTY3JvbGxib3hXYWl0IiwiZSIsImxvY2FsIiwidG9Mb2NhbCIsImRhdGEiLCJ5IiwieCIsInBvaW50ZXJEb3duIiwidHlwZSIsImxhc3QiLCJ3b3JsZFNjcmVlbldpZHRoIiwid29ybGRTY3JlZW5IZWlnaHQiLCJyZXNpemUiLCJlbnN1cmVWaXNpYmxlIl0sIm1hcHBpbmdzIjoiZ1hBSUlBLEVBQXVDLG9CQUFmQyxXQUE2QkEsV0FBK0Isb0JBQVhDLE9BQXlCQSxPQUEyQixvQkFBWEMsT0FBeUJBLE9BQXlCLG9CQUFUQyxLQUF1QkEsS0FBTyxHQU83TCxJQUpNQyxFQUlGQyxHQUE4QixTQUFVRCxFQUFRRSxJQTRCcEQsV0FDRSxJQUFJRCxFQUVXRSxJQU1mRixFQUFTLENBQ1BHLE9BQVEsU0FBU0MsRUFBR0MsRUFBR0MsRUFBR0MsR0FDeEIsT0FBT0QsRUFBSUYsRUFBSUcsRUFBSUYsR0FFckJHLFdBQVksU0FBU0osRUFBR0MsRUFBR0MsRUFBR0MsR0FDNUIsT0FBT0QsR0FBS0YsR0FBS0csR0FBS0gsRUFBSUMsR0FFNUJJLFlBQWEsU0FBU0wsRUFBR0MsRUFBR0MsRUFBR0MsR0FDN0IsT0FBUUQsR0FBS0YsR0FBS0csSUFBTUgsRUFBSSxHQUFLQyxHQUVuQ0ssY0FBZSxTQUFTTixFQUFHQyxFQUFHQyxFQUFHQyxHQUMvQixPQUFLSCxHQUFLRyxFQUFJLEdBQUssRUFDVkQsRUFBSSxFQUFJRixFQUFJQSxFQUFJQyxHQUVmQyxFQUFJLEtBQVFGLEdBQU1BLEVBQUksR0FBSyxHQUFLQyxHQUc1Q00sWUFBYSxTQUFTUCxF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QUFZRSxLQUFLSixFQUNyRGxHLEtBQUtRLFFBQVFnRCxJQUFNeEQsS0FBS29FLGFBQWVwRSxLQUFLZ0IsVUFBWTZDLEVBQ3hEN0QsS0FBS29HLFlBQVlFLEtBQU9QLEVBQ3hCL0YsS0FBS21DLFNBRUxuQyxLQUFLRixRQUFRYyxpQkFFYmtGLEVBQUVsRixtQkFTZCxjQUVJWixLQUFLb0csWUFBYyxLQVd2QixPQUFPdEcsR0FFSEUsS0FBS0YsUUFBUWdCLGNBQXVDLElBQXJCaEIsRUFBUWdCLFNBQTJCaEIsRUFBUWdCLFNBQVdkLEtBQUtGLFFBQVFnQixTQUNsR2QsS0FBS0YsUUFBUWtCLGVBQXlDLElBQXRCbEIsRUFBUWtCLFVBQTRCbEIsRUFBUWtCLFVBQVloQixLQUFLRixRQUFRa0IsVUFDakdsQixFQUFRaUUsY0FFUi9ELEtBQUsrRCxZQUFjakUsRUFBUWlFLGFBRTNCakUsRUFBUWtFLGVBRVJoRSxLQUFLZ0UsYUFBZWxFLEVBQVFrRSxjQUVoQ2hFLEtBQUtRLFFBQVFpRyxPQUFPekcsS0FBS0YsUUFBUWdCLFNBQVVkLEtBQUtGLFFBQVFrQixVQUFXaEIsS0FBSytELFlBQWEvRCxLQUFLZ0UsY0FDMUZoRSxLQUFLbUMsU0FVVCxjQUFjZ0UsRUFBR0QsRUFBR3ZDLEVBQU9FLEdBRXZCN0QsS0FBS1EsUUFBUWtHLGNBQWNQLEVBQUdELEVBQUd2QyxFQUFPRSxHQUN4QzdELEtBQUtvQiIsImZpbGUiOiI5ZWZiOThlM2E0MzUxZmRmYzZjZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBDb250YWluZXIsIFZFUlNJT04sIEdyYXBoaWNzIH0gZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJ3BpeGktdmlld3BvcnQnO1xuXG52YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxuZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4pIHtcbiAgdmFyIG1vZHVsZSA9IHsgZXhwb3J0czoge30gfTtcblx0cmV0dXJuIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0cztcbn1cblxudmFyIHBlbm5lciA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHtcbi8qXG5cdENvcHlyaWdodCDCqSAyMDAxIFJvYmVydCBQZW5uZXJcblx0QWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuXHRSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLCBcblx0YXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG5cdFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIFxuXHRjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cdFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IFxuXHRvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBcblx0cHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG5cdE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGF1dGhvciBub3IgdGhlIG5hbWVzIG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIFxuXHRvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuXG5cdFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORCBBTlkgXG5cdEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRlxuXHRNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcblx0Q09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxuXHRFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEVcblx0R09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIFxuXHRBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElOR1xuXHRORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBcblx0T0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIHBlbm5lciwgdW1kO1xuXG4gIHVtZCA9IGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICB7XG4gICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5O1xuICAgIH1cbiAgfTtcblxuICBwZW5uZXIgPSB7XG4gICAgbGluZWFyOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gYyAqIHQgLyBkICsgYjtcbiAgICB9LFxuICAgIGVhc2VJblF1YWQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRRdWFkOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gLWMgKiAodCAvPSBkKSAqICh0IC0gMikgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0UXVhZDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgoLS10KSAqICh0IC0gMikgLSAxKSArIGI7XG4gICAgICB9XG4gICAgfSxcbiAgICBlYXNlSW5DdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiB0ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRDdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRDdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICsgYjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICsgMikgKyBiO1xuICAgICAgfVxuICAgIH0sXG4gICAgZWFzZUluUXVhcnQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCAqIHQgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dFF1YXJ0OiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gLWMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0IC0gMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0UXVhcnQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSB7XG4gICAgICAgIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAtIDIpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJblF1aW50OiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqIHQgKiB0ICogdCArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0UXVpbnQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAqIHQgKyAxKSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRRdWludDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJblNpbmU6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHJldHVybiAtYyAqIE1hdGguY29zKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBjICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRTaW5lOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gYyAqIE1hdGguc2luKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluT3V0U2luZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgcmV0dXJuIC1jIC8gMiAqIChNYXRoLmNvcyhNYXRoLlBJICogdCAvIGQpIC0gMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZUluRXhwbzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgaWYgKHQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYyAqIE1hdGgucG93KDIsIDEwICogKHQgLyBkIC0gMSkpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VPdXRFeHBvOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICBpZiAodCA9PT0gZCkge1xuICAgICAgICByZXR1cm4gYiArIGM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYyAqICgtTWF0aC5wb3coMiwgLTEwICogdCAvIGQpICsgMSkgKyBiO1xuICAgICAgfVxuICAgIH0sXG4gICAgZWFzZUluT3V0RXhwbzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSArIGI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIGI7XG4gICAgICB9XG4gICAgfSxcbiAgICBlYXNlSW5DaXJjOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICByZXR1cm4gLWMgKiAoTWF0aC5zcXJ0KDEgLSAodCAvPSBkKSAqIHQpIC0gMSkgKyBiO1xuICAgIH0sXG4gICAgZWFzZU91dENpcmM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHJldHVybiBjICogTWF0aC5zcXJ0KDEgLSAodCA9IHQgLyBkIC0gMSkgKiB0KSArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRDaXJjOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkge1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgKyBiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKE1hdGguc3FydCgxIC0gKHQgLT0gMikgKiB0KSArIDEpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJbkVsYXN0aWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIHZhciBhLCBwLCBzO1xuICAgICAgcyA9IDEuNzAxNTg7XG4gICAgICBwID0gMDtcbiAgICAgIGEgPSBjO1xuICAgICAgaWYgKHQgPT09IDApIDsgZWxzZSBpZiAoKHQgLz0gZCkgPT09IDEpIDtcbiAgICAgIGlmICghcCkge1xuICAgICAgICBwID0gZCAqIC4zO1xuICAgICAgfVxuICAgICAgaWYgKGEgPCBNYXRoLmFicyhjKSkge1xuICAgICAgICBhID0gYztcbiAgICAgICAgcyA9IHAgLyA0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0RWxhc3RpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgdmFyIGEsIHAsIHM7XG4gICAgICBzID0gMS43MDE1ODtcbiAgICAgIHAgPSAwO1xuICAgICAgYSA9IGM7XG4gICAgICBpZiAodCA9PT0gMCkgOyBlbHNlIGlmICgodCAvPSBkKSA9PT0gMSkgO1xuICAgICAgaWYgKCFwKSB7XG4gICAgICAgIHAgPSBkICogLjM7XG4gICAgICB9XG4gICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgIGEgPSBjO1xuICAgICAgICBzID0gcCAvIDQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzID0gcCAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oYyAvIGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgYyArIGI7XG4gICAgfSxcbiAgICBlYXNlSW5PdXRFbGFzdGljOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICB2YXIgYSwgcCwgcztcbiAgICAgIHMgPSAxLjcwMTU4O1xuICAgICAgcCA9IDA7XG4gICAgICBhID0gYztcbiAgICAgIGlmICh0ID09PSAwKSA7IGVsc2UgaWYgKCh0IC89IGQgLyAyKSA9PT0gMikgO1xuICAgICAgaWYgKCFwKSB7XG4gICAgICAgIHAgPSBkICogKC4zICogMS41KTtcbiAgICAgIH1cbiAgICAgIGlmIChhIDwgTWF0aC5hYnMoYykpIHtcbiAgICAgICAgYSA9IGM7XG4gICAgICAgIHMgPSBwIC8gNDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHMgPSBwIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihjIC8gYSk7XG4gICAgICB9XG4gICAgICBpZiAodCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIC0uNSAqIChhICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSkgKyBiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGQgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIC41ICsgYyArIGI7XG4gICAgICB9XG4gICAgfSxcbiAgICBlYXNlSW5CYWNrOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG4gICAgICBpZiAocyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHMgPSAxLjcwMTU4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKSArIGI7XG4gICAgfSxcbiAgICBlYXNlT3V0QmFjazogZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuICAgICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgICBzID0gMS43MDE1ODtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDEpICsgYjtcbiAgICB9LFxuICAgIGVhc2VJbk91dEJhY2s6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgIGlmIChzID09PSB2b2lkIDApIHtcbiAgICAgICAgcyA9IDEuNzAxNTg7XG4gICAgICB9XG4gICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkge1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAodCAqIHQgKiAoKChzICo9IDEuNTI1KSArIDEpICogdCAtIHMpKSArIGI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogKCgocyAqPSAxLjUyNSkgKyAxKSAqIHQgKyBzKSArIDIpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJbkJvdW5jZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgdmFyIHY7XG4gICAgICB2ID0gcGVubmVyLmVhc2VPdXRCb3VuY2UoZCAtIHQsIDAsIGMsIGQpO1xuICAgICAgcmV0dXJuIGMgLSB2ICsgYjtcbiAgICB9LFxuICAgIGVhc2VPdXRCb3VuY2U6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgIGlmICgodCAvPSBkKSA8IDEgLyAyLjc1KSB7XG4gICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqIHQgKiB0KSArIGI7XG4gICAgICB9IGVsc2UgaWYgKHQgPCAyIC8gMi43NSkge1xuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAxLjUgLyAyLjc1KSAqIHQgKyAuNzUpICsgYjtcbiAgICAgIH0gZWxzZSBpZiAodCA8IDIuNSAvIDIuNzUpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gMi4yNSAvIDIuNzUpICogdCArIC45Mzc1KSArIGI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYyAqICg3LjU2MjUgKiAodCAtPSAyLjYyNSAvIDIuNzUpICogdCArIC45ODQzNzUpICsgYjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVhc2VJbk91dEJvdW5jZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgdmFyIHY7XG4gICAgICBpZiAodCA8IGQgLyAyKSB7XG4gICAgICAgIHYgPSBwZW5uZXIuZWFzZUluQm91bmNlKHQgKiAyLCAwLCBjLCBkKTtcbiAgICAgICAgcmV0dXJuIHYgKiAuNSArIGI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gcGVubmVyLmVhc2VPdXRCb3VuY2UodCAqIDIgLSBkLCAwLCBjLCBkKTtcbiAgICAgICAgcmV0dXJuIHYgKiAuNSArIGMgKiAuNSArIGI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHVtZChwZW5uZXIpO1xuXG59KS5jYWxsKGNvbW1vbmpzR2xvYmFsKTtcbn0pO1xuXG5jb25zdCBzY3JvbGxib3hPcHRpb25zID0ge1xuICAgICdib3hXaWR0aCc6IDEwMCxcbiAgICAnYm94SGVpZ2h0JzogMTAwLFxuICAgICdzY3JvbGxiYXJTaXplJzogMTAsXG4gICAgJ3Njcm9sbGJhckJhY2tncm91bmQnOiAxNDU0MDI1MyxcbiAgICAnc2Nyb2xsYmFyQmFja2dyb3VuZEFscGhhJzogMSxcbiAgICAnc2Nyb2xsYmFyRm9yZWdyb3VuZCc6IDg5NDc4NDgsXG4gICAgJ3Njcm9sbGJhckZvcmVncm91bmRBbHBoYSc6IDEsXG4gICAgJ2RyYWdTY3JvbGwnOiB0cnVlLFxuICAgICdzdG9wUHJvcGFnYXRpb24nOiB0cnVlLFxuICAgICdzY3JvbGxiYXJPZmZzZXRIb3Jpem9udGFsJzogMCxcbiAgICAnc2Nyb2xsYmFyT2Zmc2V0VmVydGljYWwnOiAwLFxuICAgICd1bmRlcmZsb3cnOiAndG9wLWxlZnQnLFxuICAgICdmYWRlU2Nyb2xsYmFyJzogZmFsc2UsXG4gICAgJ2ZhZGVTY3JvbGxiYXJUaW1lJzogMTAwMCxcbiAgICAnZmFkZVNjcm9sbGJveFdhaXQnOiAzMDAwLFxuICAgICdmYWRlU2Nyb2xsYm94RWFzZSc6ICdlYXNlSW5PdXRTaW5lJyxcbiAgICAncGFzc2l2ZVdoZWVsJzogZmFsc2UsXG4gICAgJ2NsYW1wV2hlZWwnOiB0cnVlXG59O1xuXG4vKipcbiAqIHBpeGkuanMgc2Nyb2xsYm94OiBhIG1hc2tlZCBjb250ZW50IGJveCB0aGF0IGNhbiBzY3JvbGwgdmVydGljYWxseSBvciBob3Jpem9udGFsbHkgd2l0aCBzY3JvbGxiYXJzXG4gKi9cbmNsYXNzIFNjcm9sbGJveCBleHRlbmRzIENvbnRhaW5lclxue1xuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBhIHNjcm9sbGJveFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kcmFnU2Nyb2xsPXRydWVdIHVzZXIgbWF5IGRyYWcgdGhlIGNvbnRlbnQgYXJlYSB0byBzY3JvbGwgY29udGVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vdmVyZmxvd1g9YXV0b10gKG5vbmUsIHNjcm9sbCwgaGlkZGVuLCBhdXRvKSB0aGlzIGNoYW5nZXMgd2hldGhlciB0aGUgc2Nyb2xsYmFyIGlzIHNob3duXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm92ZXJmbG93WT1hdXRvXSAobm9uZSwgc2Nyb2xsLCBoaWRkZW4sIGF1dG8pIHRoaXMgY2hhbmdlcyB3aGV0aGVyIHRoZSBzY3JvbGxiYXIgaXMgc2hvd25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3ZlcmZsb3ddIChub25lLCBzY3JvbGwsIGhpZGRlbiwgYXV0bykgc2V0cyBvdmVyZmxvd1ggYW5kIG92ZXJmbG93WSB0byB0aGlzIHZhbHVlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmJveFdpZHRoPTEwMF0gd2lkdGggb2Ygc2Nyb2xsYm94IGluY2x1ZGluZyBzY3JvbGxiYXIgKGluIHBpeGVscylcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuYm94SGVpZ2h0PTEwMF0gaGVpZ2h0IG9mIHNjcm9sbGJveCBpbmNsdWRpbmcgc2Nyb2xsYmFyIChpbiBwaXhlbHMpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjcm9sbGJhclNpemU9MTBdIHNpemUgb2Ygc2Nyb2xsYmFyIChpbiBwaXhlbHMpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjcm9sbGJhck9mZnNldEhvcml6b250YWw9MF0gb2Zmc2V0IG9mIGhvcml6b250YWwgc2Nyb2xsYmFyIChpbiBwaXhlbHMpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjcm9sbGJhck9mZnNldFZlcnRpY2FsPTBdIG9mZnNldCBvZiB2ZXJ0aWNhbCBzY3JvbGxiYXIgKGluIHBpeGVscylcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnN0b3BQcm9wYWdhdGlvbj10cnVlXSBjYWxsIHN0b3BQcm9wYWdhdGlvbiBvbiBhbnkgZXZlbnRzIHRoYXQgaW1wYWN0IHNjcm9sbGJveFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zY3JvbGxiYXJCYWNrZ3JvdW5kPTB4ZGRkZGRkXSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHNjcm9sbGJhclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zY3JvbGxiYXJCYWNrZ3JvdW5kQWxwaGE9MV0gYWxwaGEgb2YgYmFja2dyb3VuZCBvZiBzY3JvbGxiYXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc2Nyb2xsYmFyRm9yZWdyb3VuZD0weDg4ODg4OF0gZm9yZWdyb3VuZCBjb2xvciBvZiBzY3JvbGxiYXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc2Nyb2xsYmFyRm9yZWdyb3VuZEFscGhhPTFdIGFscGhhIG9mIGZvcmVncm91bmQgb2Ygc2Nyb2xsYmFyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnVuZGVyZmxvdz10b3AtbGVmdF0gd2hhdCB0byBkbyB3aGVuIGNvbnRlbnQgdW5kZXJmbG93cyB0aGUgc2Nyb2xsYm94IHNpemU6IG5vbmU6IGRvIG5vdGhpbmc7IChsZWZ0L3JpZ2h0L2NlbnRlciBBTkQgdG9wL2JvdHRvbS9jZW50ZXIpOyBPUiBjZW50ZXIgKGUuZy4sICd0b3AtbGVmdCcsICdjZW50ZXInLCAnbm9uZScsICdib3R0b21yaWdodCcpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5ub1RpY2tlcl0gZG8gbm90IHVzZSBQSVhJLlRpY2tlciAoZm9yIGZhZGUgdG8gd29yayBwcm9wZXJseSB5b3Ugd2lsbCBuZWVkIHRvIG1hbnVhbGx5IGNhbGwgdXBkYXRlTG9vcChlbGFwc2VkKSBvbiBlYWNoIGZyYW1lKVxuICAgICAqIEBwYXJhbSB7UElYSS5UaWNrZXJ9IFtvcHRpb25zLnRpY2tlcj1QSVhJLlRpY2tlci5zaGFyZWRdIHVzZSB0aGlzIFBJWEkuVGlja2VyIGZvciB1cGRhdGVzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mYWRlXSBmYWRlIHRoZSBzY3JvbGxiYXIgd2hlbiBub3QgaW4gdXNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmZhZGVTY3JvbGxiYXJUaW1lPTEwMDBdIHRpbWUgdG8gZmFkZSBzY3JvbGxiYXIgaWYgb3B0aW9ucy5mYWRlIGlzIHNldFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5mYWRlU2Nyb2xsYm94V2FpdD0zMDAwXSB0aW1lIHRvIHdhaXQgYmVmb3JlIGZhZGluZyB0aGUgc2Nyb2xsYmFyIGlmIG9wdGlvbnMuZmFkZSBpcyBzZXRcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24pfSBbb3B0aW9ucy5mYWRlU2Nyb2xsYm94RWFzZT1lYXNlSW5PdXRTaW5lXSBlYXNpbmcgZnVuY3Rpb24gdG8gdXNlIGZvciBmYWRpbmdcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnBhc3NpdmVXaGVlbD1mYWxzZV0gd2hldGhlciB3aGVlbCBldmVudHMgYXJlIHByb3BvZ2F0ZWQgYmV5b25kIHRoZSBzY3JvbGxib3ggKE5PVEU6IGRlZmF1bHQgaXMgbm93IGZhbHNlKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xhbXBXaGVlbD10cnVlXSB3aGVlbCBldmVudHMgc2hvdWxkIGJlIGNsYW1wZWQgKHRvIGF2b2lkIHdlaXJkIGJvdW5jZSB3aXRoIG1vdXNlIHdoZWVsKVxuICAgICAqIEBwYXJhbSB7UElYSS5JbnRlcmFjdGlvbk1hbmFnZXJ9IFtvcHRpb25zLmludGVyYWN0aW9uXSBJbnRlcmFjdGlvbk1hbmFnZXIsIGF2YWlsYWJsZSBmcm9tIGluc3RhbnRpYXRlZCBQSVhJLlJlbmRlcmVyLnBsdWdpbnMuaW50ZXJhY3Rpb24gLSB1c2VkIHRvIGNhbGN1bGF0ZSBwb2ludGVyIHBvc3Rpb24gcmVsYXRpdmUgdG8gY2FudmFzIGxvY2F0aW9uIG9uIHNjcmVlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM9e30pXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBzY3JvbGxib3hPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMub3ZlcmZsb3cpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vdmVyZmxvd1ggPSB0aGlzLm9wdGlvbnMub3ZlcmZsb3dZID0gb3B0aW9ucy5vdmVyZmxvdztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVhc2UgPSB0eXBlb2YgdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxib3hFYXNlID09PSAnZnVuY3Rpb24nID8gdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxib3hFYXNlIDogcGVubmVyW3RoaXMub3B0aW9ucy5mYWRlU2Nyb2xsYm94RWFzZV07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNvbnRlbnQgaW4gcGxhY2VkIGluIGhlcmVcbiAgICAgICAgICogeW91IGNhbiB1c2UgYW55IGZ1bmN0aW9uIGZyb20gcGl4aS12aWV3cG9ydCBvbiBjb250ZW50IHRvIG1hbnVhbGx5IG1vdmUgdGhlIGNvbnRlbnQgKHNlZSBodHRwczovL2RhdmlkZmlnLmdpdGh1Yi5pby9waXhpLXZpZXdwb3J0L2pzZG9jLylcbiAgICAgICAgICogQHR5cGUge1ZpZXdwb3J0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5hZGRDaGlsZChuZXcgVmlld3BvcnQoeyBwYXNzaXZlV2hlZWw6IHRoaXMub3B0aW9ucy5wYXNzaXZlV2hlZWwsIHN0b3BQcm9wYWdhdGlvbjogdGhpcy5vcHRpb25zLnN0b3BQcm9wYWdhdGlvbiwgc2NyZWVuV2lkdGg6IHRoaXMub3B0aW9ucy5ib3hXaWR0aCwgc2NyZWVuSGVpZ2h0OiB0aGlzLm9wdGlvbnMuYm94SGVpZ2h0LCBpbnRlcmFjdGlvbjogdGhpcy5vcHRpb25zLmludGVyYWN0aW9uIH0pKTtcbiAgICAgICAgdGhpcy5jb250ZW50XG4gICAgICAgICAgICAuZGVjZWxlcmF0ZSgpXG4gICAgICAgICAgICAub24oJ21vdmVkJywgKCkgPT4gdGhpcy5fZHJhd1Njcm9sbGJhcnMoKSk7XG5cbiAgICAgICAgLy8gbmVlZGVkIHRvIHB1bGwgdGhpcyBvdXQgb2Ygdmlld3BvcnRPcHRpb25zIGJlY2F1c2Ugb2YgcGl4aS5qcyB2NCBzdXBwb3J0ICh3aGljaCBjaGFuZ2VkIGZyb20gUElYSS50aWNrZXIuc2hhcmVkIHRvIFBJWEkuVGlja2VyLnNoYXJlZC4uLnNpZ2gpXG4gICAgICAgIGlmIChvcHRpb25zLnRpY2tlcilcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRpY2tlciA9IG9wdGlvbnMudGlja2VyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdG8gYXZvaWQgUm9sbHVwIHRyYW5zZm9ybWluZyBvdXIgaW1wb3J0LCBzYXZlIHBpeGkgbmFtZXNwYWNlIGluIGEgdmFyaWFibGVcbiAgICAgICAgICAgIC8vIGZyb20gaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL3BpeGlqcy9waXhpLmpzL2lzc3Vlcy81NzU3XG4gICAgICAgICAgICBsZXQgdGlja2VyO1xuICAgICAgICAgICAgY29uc3QgcGl4aU5TID0gUElYSTtcbiAgICAgICAgICAgIGlmIChwYXJzZUludCgvXihcXGQrKVxcLi8uZXhlYyhWRVJTSU9OKVsxXSkgPCA1KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpY2tlciA9IHBpeGlOUy50aWNrZXIuc2hhcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpY2tlciA9IHBpeGlOUy5UaWNrZXIuc2hhcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRpY2tlciA9IG9wdGlvbnMudGlja2VyIHx8IHRpY2tlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBncmFwaGljcyBlbGVtZW50IGZvciBkcmF3aW5nIHRoZSBzY3JvbGxiYXJzXG4gICAgICAgICAqIEB0eXBlIHtQSVhJLkdyYXBoaWNzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zY3JvbGxiYXIgPSB0aGlzLmFkZENoaWxkKG5ldyBHcmFwaGljcygpKTtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuaW50ZXJhY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5vbigncG9pbnRlcmRvd24nLCB0aGlzLnNjcm9sbGJhckRvd24sIHRoaXMpO1xuICAgICAgICB0aGlzLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbigncG9pbnRlcm1vdmUnLCB0aGlzLnNjcm9sbGJhck1vdmUsIHRoaXMpO1xuICAgICAgICB0aGlzLm9uKCdwb2ludGVydXAnLCB0aGlzLnNjcm9sbGJhclVwLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vbigncG9pbnRlcmNhbmNlbCcsIHRoaXMuc2Nyb2xsYmFyVXAsIHRoaXMpO1xuICAgICAgICB0aGlzLm9uKCdwb2ludGVydXBvdXRzaWRlJywgdGhpcy5zY3JvbGxiYXJVcCwgdGhpcyk7XG4gICAgICAgIHRoaXMuX21hc2tDb250ZW50ID0gdGhpcy5hZGRDaGlsZChuZXcgR3JhcGhpY3MoKSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMubm9UaWNrZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudGlja2VyRnVuY3Rpb24gPSAoKSA9PiB0aGlzLnVwZGF0ZUxvb3AoTWF0aC5taW4odGhpcy5vcHRpb25zLnRpY2tlci5lbGFwc2VkTVMsIDE2LjY2NjcpKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50aWNrZXIuYWRkKHRoaXMudGlja2VyRnVuY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogb2Zmc2V0IG9mIGhvcml6b250YWwgc2Nyb2xsYmFyIChpbiBwaXhlbHMpXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc2Nyb2xsYmFyT2Zmc2V0SG9yaXpvbnRhbCgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNjcm9sbGJhck9mZnNldEhvcml6b250YWxcbiAgICB9XG4gICAgc2V0IHNjcm9sbGJhck9mZnNldEhvcml6b250YWwodmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyT2Zmc2V0SG9yaXpvbnRhbCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG9mZnNldCBvZiB2ZXJ0aWNhbCBzY3JvbGxiYXIgKGluIHBpeGVscylcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBzY3JvbGxiYXJPZmZzZXRWZXJ0aWNhbCgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNjcm9sbGJhck9mZnNldFZlcnRpY2FsXG4gICAgfVxuICAgIHNldCBzY3JvbGxiYXJPZmZzZXRWZXJ0aWNhbCh2YWx1ZSlcbiAgICB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJPZmZzZXRWZXJ0aWNhbCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRpc2FibGUgdGhlIHNjcm9sbGJveCAoaWYgc2V0IHRvIHRydWUgdGhpcyB3aWxsIGFsc28gcmVtb3ZlIHRoZSBtYXNrKVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBkaXNhYmxlKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZFxuICAgIH1cbiAgICBzZXQgZGlzYWJsZSh2YWx1ZSlcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLl9kaXNhYmxlZCAhPT0gdmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2FsbCBzdG9wUHJvcGFnYXRpb24gb24gYW55IGV2ZW50cyB0aGF0IGltcGFjdCBzY3JvbGxib3hcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgc3RvcFByb3BhZ2F0aW9uKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc3RvcFByb3BhZ2F0aW9uXG4gICAgfVxuICAgIHNldCBzdG9wUHJvcGFnYXRpb24odmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLm9wdGlvbnMuc3RvcFByb3BhZ2F0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXNlciBtYXkgZHJhZyB0aGUgY29udGVudCBhcmVhIHRvIHNjcm9sbCBjb250ZW50XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGRyYWdTY3JvbGwoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kcmFnU2Nyb2xsXG4gICAgfVxuICAgIHNldCBkcmFnU2Nyb2xsKHZhbHVlKVxuICAgIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmRyYWdTY3JvbGwgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuZHJhZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbnRlbnQucmVtb3ZlUGx1Z2luICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlUGx1Z2luKCdkcmFnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnBsdWdpbnMucmVtb3ZlKCdkcmFnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB3aWR0aCBvZiBzY3JvbGxib3ggaW5jbHVkaW5nIHRoZSBzY3JvbGxiYXIgKGlmIHZpc2libGUpLSB0aGlzIGNoYW5nZXMgdGhlIHNpemUgYW5kIG5vdCB0aGUgc2NhbGUgb2YgdGhlIGJveFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGJveFdpZHRoKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYm94V2lkdGhcbiAgICB9XG4gICAgc2V0IGJveFdpZHRoKHZhbHVlKVxuICAgIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmJveFdpZHRoID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY29udGVudC5zY3JlZW5XaWR0aCA9IHZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldHMgb3ZlcmZsb3dYIGFuZCBvdmVyZmxvd1kgdG8gKHNjcm9sbCwgaGlkZGVuLCBhdXRvKSBjaGFuZ2luZyB3aGV0aGVyIHRoZSBzY3JvbGxiYXIgaXMgc2hvd25cbiAgICAgKiBzY3JvbGwgPSBhbHdheXMgc2hvdyBzY3JvbGxiYXJcbiAgICAgKiBoaWRkZW4gPSBoaWRlIG92ZXJmbG93IGFuZCBkbyBub3Qgc2hvdyBzY3JvbGxiYXJcbiAgICAgKiBhdXRvID0gaWYgY29udGVudCBpcyBsYXJnZXIgdGhhbiBib3ggc2l6ZSwgdGhlbiBzaG93IHNjcm9sbGJhclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0IG92ZXJmbG93KClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMub3ZlcmZsb3dcbiAgICB9XG4gICAgc2V0IG92ZXJmbG93KHZhbHVlKVxuICAgIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLm92ZXJmbG93ID0gdmFsdWU7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vdmVyZmxvd1ggPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5vcHRpb25zLm92ZXJmbG93WSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldHMgb3ZlcmZsb3dYIHRvIChzY3JvbGwsIGhpZGRlbiwgYXV0bykgY2hhbmdpbmcgd2hldGhlciB0aGUgc2Nyb2xsYmFyIGlzIHNob3duXG4gICAgICogc2Nyb2xsID0gYWx3YXlzIHNob3cgc2Nyb2xsYmFyXG4gICAgICogaGlkZGVuID0gaGlkZSBvdmVyZmxvdyBhbmQgZG8gbm90IHNob3cgc2Nyb2xsYmFyXG4gICAgICogYXV0byA9IGlmIGNvbnRlbnQgaXMgbGFyZ2VyIHRoYW4gYm94IHNpemUsIHRoZW4gc2hvdyBzY3JvbGxiYXJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBvdmVyZmxvd1goKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5vdmVyZmxvd1hcbiAgICB9XG4gICAgc2V0IG92ZXJmbG93WCh2YWx1ZSlcbiAgICB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5vdmVyZmxvd1ggPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXRzIG92ZXJmbG93WSB0byAoc2Nyb2xsLCBoaWRkZW4sIGF1dG8pIGNoYW5naW5nIHdoZXRoZXIgdGhlIHNjcm9sbGJhciBpcyBzaG93blxuICAgICAqIHNjcm9sbCA9IGFsd2F5cyBzaG93IHNjcm9sbGJhclxuICAgICAqIGhpZGRlbiA9IGhpZGUgb3ZlcmZsb3cgYW5kIGRvIG5vdCBzaG93IHNjcm9sbGJhclxuICAgICAqIGF1dG8gPSBpZiBjb250ZW50IGlzIGxhcmdlciB0aGFuIGJveCBzaXplLCB0aGVuIHNob3cgc2Nyb2xsYmFyXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQgb3ZlcmZsb3dZKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMub3ZlcmZsb3dZXG4gICAgfVxuICAgIHNldCBvdmVyZmxvd1kodmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLm9wdGlvbnMub3ZlcmZsb3dZID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVpZ2h0IG9mIHNjcm9sbGJveCBpbmNsdWRpbmcgdGhlIHNjcm9sbGJhciAoaWYgdmlzaWJsZSkgLSB0aGlzIGNoYW5nZXMgdGhlIHNpemUgYW5kIG5vdCB0aGUgc2NhbGUgb2YgdGhlIGJveFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGJveEhlaWdodCgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmJveEhlaWdodFxuICAgIH1cbiAgICBzZXQgYm94SGVpZ2h0KHZhbHVlKVxuICAgIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmJveEhlaWdodCA9IHZhbHVlO1xuICAgICAgICB0aGlzLmNvbnRlbnQuc2NyZWVuSGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2Nyb2xsYmFyIHNpemUgaW4gcGl4ZWxzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc2Nyb2xsYmFyU2l6ZSgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNjcm9sbGJhclNpemVcbiAgICB9XG4gICAgc2V0IHNjcm9sbGJhclNpemUodmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyU2l6ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHdpZHRoIG9mIHNjcm9sbGJveCBsZXNzIHRoZSBzY3JvbGxiYXIgKGlmIHZpc2libGUpXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgY29udGVudFdpZHRoKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYm94V2lkdGggLSAodGhpcy5pc1Njcm9sbGJhclZlcnRpY2FsID8gdGhpcy5vcHRpb25zLnNjcm9sbGJhclNpemUgOiAwKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlaWdodCBvZiBzY3JvbGxib3ggbGVzcyB0aGUgc2Nyb2xsYmFyIChpZiB2aXNpYmxlKVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IGNvbnRlbnRIZWlnaHQoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5ib3hIZWlnaHQgLSAodGhpcy5pc1Njcm9sbGJhckhvcml6b250YWwgPyB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyU2l6ZSA6IDApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaXMgdGhlIHZlcnRpY2FsIHNjcm9sbGJhciB2aXNpYmxlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG4gICAgZ2V0IGlzU2Nyb2xsYmFyVmVydGljYWwoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2Nyb2xsYmFyVmVydGljYWxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBpcyB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXIgdmlzaWJsZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGdldCBpc1Njcm9sbGJhckhvcml6b250YWwoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2Nyb2xsYmFySG9yaXpvbnRhbFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRvcCBjb29yZGluYXRlIG9mIHNjcm9sbGJhclxuICAgICAqL1xuICAgIGdldCBzY3JvbGxUb3AoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC50b3BcbiAgICB9XG4gICAgc2V0IHNjcm9sbFRvcCh0b3ApIHtcbiAgICAgICAgdGhpcy5jb250ZW50LnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy5fZHJhd1Njcm9sbGJhcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsZWZ0IGNvb3JkaW5hdGUgb2Ygc2Nyb2xsYmFyXG4gICAgICovXG4gICAgZ2V0IHNjcm9sbExlZnQoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5sZWZ0XG4gICAgfVxuICAgIHNldCBzY3JvbGxMZWZ0KGxlZnQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50LmxlZnQgPSBsZWZ0O1xuICAgICAgICB0aGlzLl9kcmF3U2Nyb2xsYmFycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHdpZHRoIG9mIGNvbnRlbnQgYXJlYVxuICAgICAqIGlmIG5vdCBzZXQgdGhlbiBpdCB1c2VzIGNvbnRlbnQud2lkdGggdG8gY2FsY3VsYXRlIHdpZHRoXG4gICAgICovXG4gICAgZ2V0IHNjcm9sbFdpZHRoKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxXaWR0aCB8fCB0aGlzLmNvbnRlbnQud2lkdGhcbiAgICB9XG4gICAgc2V0IHNjcm9sbFdpZHRoKHZhbHVlKVxuICAgIHtcbiAgICAgICAgdGhpcy5fc2Nyb2xsV2lkdGggPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWlnaHQgb2YgY29udGVudCBhcmVhXG4gICAgICogaWYgbm90IHNldCB0aGVuIGl0IHVzZXMgY29udGVudC5oZWlnaHQgdG8gY2FsY3VsYXRlIGhlaWdodFxuICAgICAqL1xuICAgIGdldCBzY3JvbGxIZWlnaHQoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEhlaWdodCB8fCB0aGlzLmNvbnRlbnQuaGVpZ2h0XG4gICAgfVxuICAgIHNldCBzY3JvbGxIZWlnaHQodmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkcmF3cyBzY3JvbGxiYXJzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZHJhd1Njcm9sbGJhcnMoKVxuICAgIHtcbiAgICAgICAgdGhpcy5faXNTY3JvbGxiYXJIb3Jpem9udGFsID0gdGhpcy5vdmVyZmxvd1ggPT09ICdzY3JvbGwnID8gdHJ1ZSA6IFsnaGlkZGVuJywgJ25vbmUnXS5pbmRleE9mKHRoaXMub3ZlcmZsb3dYKSAhPT0gLTEgPyBmYWxzZSA6IHRoaXMuc2Nyb2xsV2lkdGggPiB0aGlzLm9wdGlvbnMuYm94V2lkdGg7XG4gICAgICAgIHRoaXMuX2lzU2Nyb2xsYmFyVmVydGljYWwgPSB0aGlzLm92ZXJmbG93WSA9PT0gJ3Njcm9sbCcgPyB0cnVlIDogWydoaWRkZW4nLCAnbm9uZSddLmluZGV4T2YodGhpcy5vdmVyZmxvd1kpICE9PSAtMSA/IGZhbHNlIDogdGhpcy5zY3JvbGxIZWlnaHQgPiB0aGlzLm9wdGlvbnMuYm94SGVpZ2h0O1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5jbGVhcigpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgICAgICBvcHRpb25zLmxlZnQgPSAwO1xuICAgICAgICBvcHRpb25zLnJpZ2h0ID0gdGhpcy5zY3JvbGxXaWR0aCArICh0aGlzLl9pc1Njcm9sbGJhclZlcnRpY2FsID8gdGhpcy5vcHRpb25zLnNjcm9sbGJhclNpemUgOiAwKTtcbiAgICAgICAgb3B0aW9ucy50b3AgPSAwO1xuICAgICAgICBvcHRpb25zLmJvdHRvbSA9IHRoaXMuc2Nyb2xsSGVpZ2h0ICsgKHRoaXMuaXNTY3JvbGxiYXJIb3Jpem9udGFsID8gdGhpcy5vcHRpb25zLnNjcm9sbGJhclNpemUgOiAwKTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnNjcm9sbFdpZHRoICsgKHRoaXMuaXNTY3JvbGxiYXJWZXJ0aWNhbCA/IHRoaXMub3B0aW9ucy5zY3JvbGxiYXJTaXplIDogMCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuc2Nyb2xsSGVpZ2h0ICsgKHRoaXMuaXNTY3JvbGxiYXJIb3Jpem9udGFsID8gdGhpcy5vcHRpb25zLnNjcm9sbGJhclNpemUgOiAwKTtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXJUb3AgPSAodGhpcy5jb250ZW50LnRvcCAvIGhlaWdodCkgKiB0aGlzLmJveEhlaWdodDtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXJUb3AgPSB0aGlzLnNjcm9sbGJhclRvcCA8IDAgPyAwIDogdGhpcy5zY3JvbGxiYXJUb3A7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFySGVpZ2h0ID0gKHRoaXMuYm94SGVpZ2h0IC8gaGVpZ2h0KSAqIHRoaXMuYm94SGVpZ2h0O1xuICAgICAgICB0aGlzLnNjcm9sbGJhckhlaWdodCA9IHRoaXMuc2Nyb2xsYmFyVG9wICsgdGhpcy5zY3JvbGxiYXJIZWlnaHQgPiB0aGlzLmJveEhlaWdodCA/IHRoaXMuYm94SGVpZ2h0IC0gdGhpcy5zY3JvbGxiYXJUb3AgOiB0aGlzLnNjcm9sbGJhckhlaWdodDtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXJMZWZ0ID0gKHRoaXMuY29udGVudC5sZWZ0IC8gd2lkdGgpICogdGhpcy5ib3hXaWR0aDtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXJMZWZ0ID0gdGhpcy5zY3JvbGxiYXJMZWZ0IDwgMCA/IDAgOiB0aGlzLnNjcm9sbGJhckxlZnQ7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggPSAodGhpcy5ib3hXaWR0aCAvIHdpZHRoKSAqIHRoaXMuYm94V2lkdGg7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggPSB0aGlzLnNjcm9sbGJhcldpZHRoICsgdGhpcy5zY3JvbGxiYXJMZWZ0ID4gdGhpcy5ib3hXaWR0aCA/IHRoaXMuYm94V2lkdGggLSB0aGlzLnNjcm9sbGJhckxlZnQgOiB0aGlzLnNjcm9sbGJhcldpZHRoO1xuICAgICAgICBpZiAodGhpcy5pc1Njcm9sbGJhclZlcnRpY2FsKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGJhclxuICAgICAgICAgICAgICAgIC5iZWdpbkZpbGwodGhpcy5vcHRpb25zLnNjcm9sbGJhckJhY2tncm91bmQsIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJCYWNrZ3JvdW5kQWxwaGEpXG4gICAgICAgICAgICAgICAgLmRyYXdSZWN0KHRoaXMuYm94V2lkdGggLSB0aGlzLnNjcm9sbGJhclNpemUgKyB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyT2Zmc2V0VmVydGljYWwsIDAsIHRoaXMuc2Nyb2xsYmFyU2l6ZSwgdGhpcy5ib3hIZWlnaHQpXG4gICAgICAgICAgICAgICAgLmVuZEZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1Njcm9sbGJhckhvcml6b250YWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyXG4gICAgICAgICAgICAgICAgLmJlZ2luRmlsbCh0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyQmFja2dyb3VuZCwgdGhpcy5vcHRpb25zLnNjcm9sbGJhckJhY2tncm91bmRBbHBoYSlcbiAgICAgICAgICAgICAgICAuZHJhd1JlY3QoMCwgdGhpcy5ib3hIZWlnaHQgLSB0aGlzLnNjcm9sbGJhclNpemUgKyB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyT2Zmc2V0SG9yaXpvbnRhbCwgdGhpcy5ib3hXaWR0aCwgdGhpcy5zY3JvbGxiYXJTaXplKVxuICAgICAgICAgICAgICAgIC5lbmRGaWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNTY3JvbGxiYXJWZXJ0aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXJcbiAgICAgICAgICAgICAgICAuYmVnaW5GaWxsKHRoaXMub3B0aW9ucy5zY3JvbGxiYXJGb3JlZ3JvdW5kLCB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyRm9yZWdyb3VuZEFscGhhKVxuICAgICAgICAgICAgICAgIC5kcmF3UmVjdCh0aGlzLmJveFdpZHRoIC0gdGhpcy5zY3JvbGxiYXJTaXplICsgdGhpcy5vcHRpb25zLnNjcm9sbGJhck9mZnNldFZlcnRpY2FsLCB0aGlzLnNjcm9sbGJhclRvcCwgdGhpcy5zY3JvbGxiYXJTaXplLCB0aGlzLnNjcm9sbGJhckhlaWdodClcbiAgICAgICAgICAgICAgICAuZW5kRmlsbCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzU2Nyb2xsYmFySG9yaXpvbnRhbClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXJcbiAgICAgICAgICAgICAgICAuYmVnaW5GaWxsKHRoaXMub3B0aW9ucy5zY3JvbGxiYXJGb3JlZ3JvdW5kLCB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyRm9yZWdyb3VuZEFscGhhKVxuICAgICAgICAgICAgICAgIC5kcmF3UmVjdCh0aGlzLnNjcm9sbGJhckxlZnQsIHRoaXMuYm94SGVpZ2h0IC0gdGhpcy5zY3JvbGxiYXJTaXplICsgdGhpcy5vcHRpb25zLnNjcm9sbGJhck9mZnNldEhvcml6b250YWwsIHRoaXMuc2Nyb2xsYmFyV2lkdGgsIHRoaXMuc2Nyb2xsYmFyU2l6ZSlcbiAgICAgICAgICAgICAgICAuZW5kRmlsbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMuY29udGVudC5mb3JjZUhpdEFyZWEgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwgMCAsIHRoaXMuYm94V2lkdGgsIHRoaXMuYm94SGVpZ2h0KVxuICAgICAgICB0aGlzLmFjdGl2YXRlRmFkZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRyYXdzIG1hc2sgbGF5ZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9kcmF3TWFzaygpXG4gICAge1xuICAgICAgICB0aGlzLl9tYXNrQ29udGVudFxuICAgICAgICAgICAgLmJlZ2luRmlsbCgwKVxuICAgICAgICAgICAgLmRyYXdSZWN0KDAsIDAsIHRoaXMuYm94V2lkdGgsIHRoaXMuYm94SGVpZ2h0KVxuICAgICAgICAgICAgLmVuZEZpbGwoKTtcbiAgICAgICAgdGhpcy5jb250ZW50Lm1hc2sgPSB0aGlzLl9tYXNrQ29udGVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjYWxsIHdoZW4gc2Nyb2xsYm94IGNvbnRlbnQgY2hhbmdlc1xuICAgICAqL1xuICAgIHVwZGF0ZSgpXG4gICAge1xuICAgICAgICB0aGlzLmNvbnRlbnQubWFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuX21hc2tDb250ZW50LmNsZWFyKCk7XG4gICAgICAgIGlmICghdGhpcy5fZGlzYWJsZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2RyYXdTY3JvbGxiYXJzKCk7XG4gICAgICAgICAgICB0aGlzLl9kcmF3TWFzaygpO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5pc1Njcm9sbGJhckhvcml6b250YWwgJiYgdGhpcy5pc1Njcm9sbGJhclZlcnRpY2FsID8gJ2FsbCcgOiB0aGlzLmlzU2Nyb2xsYmFySG9yaXpvbnRhbCA/ICd4JyA6ICd5JztcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRyYWdTY3JvbGwpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuZHJhZyh7IGNsYW1wV2hlZWw6IHRoaXMub3B0aW9ucy5jbGFtcFdoZWVsLCBkaXJlY3Rpb24gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5jbGFtcCh7IGRpcmVjdGlvbiwgdW5kZXJmbG93OiB0aGlzLm9wdGlvbnMudW5kZXJmbG93IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2FsbGVkIG9uIGVhY2ggZnJhbWUgdG8gdXBkYXRlIGZhZGUgc2Nyb2xsYmFycyAoaWYgZW5hYmxlZClcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZWxhcHNlZCBzaW5jZSBsYXN0IGZyYW1lIGluIG1pbGxpc2Vjb25kcyAodXN1YWxseSBjYXBwZWQgYXQgMTYuNjY2NylcbiAgICAgKi9cbiAgICB1cGRhdGVMb29wKGVsYXBzZWQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5mYWRlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5mYWRlLndhaXQgPiAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZmFkZS53YWl0IC09IGVsYXBzZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmFkZS53YWl0IDw9IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBlbGFwc2VkICs9IHRoaXMuZmFkZS53YWl0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZhZGUuZHVyYXRpb24gKz0gZWxhcHNlZDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZhZGUuZHVyYXRpb24gPj0gdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxiYXJUaW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZmFkZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuYWxwaGEgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLmFscGhhID0gdGhpcy5lYXNlKHRoaXMuZmFkZS5kdXJhdGlvbiwgMSwgLTEsIHRoaXMub3B0aW9ucy5mYWRlU2Nyb2xsYmFyVGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlydHkgdmFsdWUgKHVzZWQgZm9yIG9wdGltaXppbmcgZHJhd3MpIGZvciB1bmRlcmx5aW5nIHZpZXdwb3J0IChzY3JvbGxib3guY29udGVudClcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgZGlydHkoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5kaXJ0eVxuICAgIH1cbiAgICBzZXQgZGlydHkodmFsdWUpXG4gICAge1xuICAgICAgICB0aGlzLmNvbnRlbnQuZGlydHkgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzaG93IHRoZSBzY3JvbGxiYXIgYW5kIHJlc3RhcnQgdGhlIHRpbWVyIGZvciBmYWRlIGlmIG9wdGlvbnMuZmFkZSBpcyBzZXRcbiAgICAgKi9cbiAgICBhY3RpdmF0ZUZhZGUoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmZhZGUgJiYgdGhpcy5vcHRpb25zLmZhZGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLmFscGhhID0gMTtcbiAgICAgICAgICAgIHRoaXMuZmFkZSA9IHsgd2FpdDogdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxib3hXYWl0LCBkdXJhdGlvbjogMCB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGFuZGxlIHBvaW50ZXIgZG93biBvbiBzY3JvbGxiYXJcbiAgICAgKiBAcGFyYW0ge1BJWEkuaW50ZXJhY3Rpb24uSW50ZXJhY3Rpb25FdmVudH0gZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc2Nyb2xsYmFyRG93bihlKVxuICAgIHtcbiAgICAgICAgY29uc3QgbG9jYWwgPSB0aGlzLnRvTG9jYWwoZS5kYXRhLmdsb2JhbCk7XG4gICAgICAgIGlmICh0aGlzLmlzU2Nyb2xsYmFySG9yaXpvbnRhbClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGxvY2FsLnkgPiB0aGlzLmJveEhlaWdodCAtIHRoaXMuc2Nyb2xsYmFyU2l6ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAobG9jYWwueCA+PSB0aGlzLnNjcm9sbGJhckxlZnQgJiYgbG9jYWwueCA8PSB0aGlzLnNjcm9sbGJhckxlZnQgKyB0aGlzLnNjcm9sbGJhcldpZHRoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludGVyRG93biA9IHsgdHlwZTogJ2hvcml6b250YWwnLCBsYXN0OiBsb2NhbCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWwueCA+IHRoaXMuc2Nyb2xsYmFyTGVmdClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmxlZnQgKz0gdGhpcy5jb250ZW50LndvcmxkU2NyZWVuV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmxlZnQgLT0gdGhpcy5jb250ZW50LndvcmxkU2NyZWVuV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNTY3JvbGxiYXJWZXJ0aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGxvY2FsLnggPiB0aGlzLmJveFdpZHRoIC0gdGhpcy5zY3JvbGxiYXJTaXplKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbC55ID49IHRoaXMuc2Nyb2xsYmFyVG9wICYmIGxvY2FsLnkgPD0gdGhpcy5zY3JvbGxiYXJUb3AgKyB0aGlzLnNjcm9sbGJhcldpZHRoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludGVyRG93biA9IHsgdHlwZTogJ3ZlcnRpY2FsJywgbGFzdDogbG9jYWwgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsLnkgPiB0aGlzLnNjcm9sbGJhclRvcClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnRvcCArPSB0aGlzLmNvbnRlbnQud29ybGRTY3JlZW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnRvcCAtPSB0aGlzLmNvbnRlbnQud29ybGRTY3JlZW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoYW5kbGUgcG9pbnRlciBtb3ZlIG9uIHNjcm9sbGJhclxuICAgICAqIEBwYXJhbSB7UElYSS5pbnRlcmFjdGlvbi5JbnRlcmFjdGlvbkV2ZW50fSBlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBzY3JvbGxiYXJNb3ZlKGUpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyRG93bilcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMucG9pbnRlckRvd24udHlwZSA9PT0gJ2hvcml6b250YWwnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsID0gdGhpcy50b0xvY2FsKGUuZGF0YS5nbG9iYWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5zY3JvbGxXaWR0aCArICh0aGlzLmlzU2Nyb2xsYmFyVmVydGljYWwgPyB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyU2l6ZSA6IDApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyTGVmdCArPSBsb2NhbC54IC0gdGhpcy5wb2ludGVyRG93bi5sYXN0Lng7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmxlZnQgPSB0aGlzLnNjcm9sbGJhckxlZnQgLyB0aGlzLmJveFdpZHRoICogd2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludGVyRG93bi5sYXN0ID0gbG9jYWw7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucG9pbnRlckRvd24udHlwZSA9PT0gJ3ZlcnRpY2FsJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbCA9IHRoaXMudG9Mb2NhbChlLmRhdGEuZ2xvYmFsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnNjcm9sbEhlaWdodCArICh0aGlzLmlzU2Nyb2xsYmFySG9yaXpvbnRhbCA/IHRoaXMub3B0aW9ucy5zY3JvbGxiYXJTaXplIDogMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXJUb3AgKz0gbG9jYWwueSAtIHRoaXMucG9pbnRlckRvd24ubGFzdC55O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC50b3AgPSB0aGlzLnNjcm9sbGJhclRvcCAvIHRoaXMuYm94SGVpZ2h0ICogaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRlckRvd24ubGFzdCA9IGxvY2FsO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGFuZGxlIHBvaW50ZXIgZG93biBvbiBzY3JvbGxiYXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHNjcm9sbGJhclVwKClcbiAgICB7XG4gICAgICAgIHRoaXMucG9pbnRlckRvd24gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlc2l6ZSB0aGUgbWFzayBmb3IgdGhlIGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmJveFdpZHRoXSB3aWR0aCBvZiBzY3JvbGxib3ggaW5jbHVkaW5nIHNjcm9sbGJhciAoaW4gcGl4ZWxzKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5ib3hIZWlnaHRdIGhlaWdodCBvZiBzY3JvbGxib3ggaW5jbHVkaW5nIHNjcm9sbGJhciAoaW4gcGl4ZWxzKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zY3JvbGxXaWR0aF0gc2V0IHRoZSB3aWR0aCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBzY3JvbGxib3ggKGxlYXZlIG51bGwgdG8gdXNlIGNvbnRlbnQud2lkdGgpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnNjcm9sbEhlaWdodF0gc2V0IHRoZSBoZWlnaHQgb2YgdGhlIGluc2lkZSBvZiB0aGUgc2Nyb2xsYm94IChsZWF2ZSBudWxsIHRvIHVzZSBjb250ZW50LmhlaWdodClcbiAgICAgKi9cbiAgICByZXNpemUob3B0aW9ucylcbiAgICB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5ib3hXaWR0aCA9IHR5cGVvZiBvcHRpb25zLmJveFdpZHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYm94V2lkdGggOiB0aGlzLm9wdGlvbnMuYm94V2lkdGg7XG4gICAgICAgIHRoaXMub3B0aW9ucy5ib3hIZWlnaHQgPSB0eXBlb2Ygb3B0aW9ucy5ib3hIZWlnaHQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5ib3hIZWlnaHQgOiB0aGlzLm9wdGlvbnMuYm94SGVpZ2h0O1xuICAgICAgICBpZiAob3B0aW9ucy5zY3JvbGxXaWR0aClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxXaWR0aCA9IG9wdGlvbnMuc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Nyb2xsSGVpZ2h0KVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEhlaWdodCA9IG9wdGlvbnMuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGVudC5yZXNpemUodGhpcy5vcHRpb25zLmJveFdpZHRoLCB0aGlzLm9wdGlvbnMuYm94SGVpZ2h0LCB0aGlzLnNjcm9sbFdpZHRoLCB0aGlzLnNjcm9sbEhlaWdodCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZW5zdXJlIHRoYXQgdGhlIGJvdW5kaW5nIGJveCBpcyB2aXNpYmxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggLSByZWxhdGl2ZSB0byBjb250ZW50J3MgY29vcmRpbmF0ZSBzeXN0ZW1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgKi9cbiAgICBlbnN1cmVWaXNpYmxlKHgsIHksIHdpZHRoLCBoZWlnaHQpXG4gICAge1xuICAgICAgICB0aGlzLmNvbnRlbnQuZW5zdXJlVmlzaWJsZSh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fZHJhd1Njcm9sbGJhcnMoKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFNjcm9sbGJveCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Nyb2xsYm94LmVzLmpzLm1hcFxuIl0sInNvdXJjZVJvb3QiOiIifQ==