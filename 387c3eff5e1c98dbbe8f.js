(global.webpackChunkvht11=global.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\mathjax-full\\js\\output\\svg\\Wrapper"],{"./node_modules/mathjax-full/js/output/svg/Wrapper.js":function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.SVGWrapper=void 0;var s=r("./node_modules/mathjax-full/js/output/common/Wrapper.js"),h=r("./node_modules/mathjax-full/js/output/svg.js"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.element=null,e}return o(e,t),e.prototype.toSVG=function(t){this.addChildren(this.standardSVGnode(t))},e.prototype.addChildren=function(t){var e,r,i=0;try{for(var o=n(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.toSVG(t),s.element&&s.place(i+s.bbox.L*s.bbox.rscale,0),i+=(s.bbox.L+s.bbox.w+s.bbox.R)*s.bbox.rscale}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},e.prototype.standardSVGnode=function(t){var e=this.createSVGnode(t);return this.handleStyles(),this.handleScale(),this.handleColor(),this.handleAttributes(),e},e.prototype.createSVGnode=function(t){var e=this.node.attributes.get("href");if(e){t=this.adaptor.append(t,this.svg("a",{href:e}));var r=this.getBBox(),i=r.h,o=r.d,n=r.w;this.adaptor.append(t,this.svg("rect",{"data-hitbox":!0,fill:"none",stroke:"none","pointer-events":"all",width:this.fixed(n),height:this.fixed(i+o),y:this.fixed(-o)}))}return this.element=this.adaptor.append(t,this.svg("g",{"data-mml-node":this.node.kind})),this.element},e.prototype.handleStyles=function(){if(this.styles){var t=this.styles.cssText;t&&this.adaptor.setAttribute(this.element,"style",t)}},e.prototype.handleScale=function(){if(1!==this.bbox.rscale){var t="scale("+this.fixed(this.bbox.rscale/1e3,3)+")";this.adaptor.setAttribute(this.element,"transform",t)}},e.prototype.handleColor=function(){var t=this.adaptor,e=this.node.attributes,r=e.getExplicit("mathcolor"),i=e.getExplicit("color"),o=e.getExplicit("mathbackground"),n=e.getExplicit("background");if((r||i)&&(t.setAttribute(this.element,"fill",r||i),t.setAttribute(this.element,"stroke",r||i)),o||n){var a=this.getBBox(),s=a.h,h=a.d,l=a.w,d=this.svg("rect",{fill:o||n,x:0,y:this.fixed(-h),width:this.fixed(l),height:this.fixed(s+h),"data-bgcolor":!0}),p=t.firstChild(this.element);p?t.insert(d,p):t.append(this.element,d)}},e.prototype.handleAttributes=function(){var t,r,i,o,a=this.node.attributes,s=a.getAllDefaults(),h=e.skipAttributes;try{for(var l=n(a.getExplicitNames()),d=l.next();!d.done;d=l.next()){var p=d.value;!1!==h[p]&&(p in s||h[p]||this.adaptor.hasAttribute(this.element,p))||this.adaptor.setAttribute(this.element,p,a.getExplicit(p))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(a.get("class")){var u=a.get("class").trim().split(/ +/);try{for(var c=n(u),f=c.next();!f.done;f=c.next()){var v=f.value;this.adaptor.addClass(this.element,v)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},e.prototype.place=function(t,e,r){if(void 0===r&&(r=null),t||e){r||(r=this.element);var i=this.adaptor.getAttribute(r,"transform")||"";i="translate("+this.fixed(t)+", "+this.fixed(e)+")"+(i?" "+i:""),this.adaptor.setAttribute(r,"transform",i)}},e.prototype.placeChar=function(t,e,r,i,o){var s,h;void 0===o&&(o=null),null===o&&(o=this.variant);var l=t.toString(16).toUpperCase(),d=a(this.getVariantChar(o,t),4),p=d[2],u=d[3];if("p"in u){var c=u.p?"M"+u.p+"Z":"";this.place(e,r,this.adaptor.append(i,this.charNode(o,l,c)))}else if("c"in u){var f=this.adaptor.append(i,this.svg("g",{"data-c":l}));this.place(e,r,f),e=0;try{for(var v=n(this.unicodeChars(u.c,o)),y=v.next();!y.done;y=v.next()){var x=y.value;e+=this.placeChar(x,e,r,f,o)}}catch(t){s={error:t}}finally{try{y&&!y.done&&(h=v.return)&&h.call(v)}finally{if(s)throw s.error}}}else if(u.unknown){var b=String.fromCodePoint(t),g=this.adaptor.append(i,this.jax.unknownText(b,o));return this.place(e,r,g),this.jax.measureTextNodeWithCache(g,b,o).w}return p},e.prototype.charNode=function(t,e,r){return"none"!==this.jax.options.fontCache?this.useNode(t,e,r):this.pathNode(e,r)},e.prototype.pathNode=function(t,e){return this.svg("path",{"data-c":t,d:e})},e.prototype.useNode=function(t,e,r){var i=this.svg("use"),o="#"+this.jax.fontCache.cachePath(t,e,r);return this.adaptor.setAttribute(i,"href",o,h.XLINKNS),i},e.prototype.drawBBox=function(){var t=this.getBBox(),e=t.w,r=t.h,i=t.d,o=this.svg("g",{style:{opacity:.25}},[this.svg("rect",{fill:"red",height:this.fixed(r),width:this.fixed(e)}),this.svg("rect",{fill:"green",height:this.fixed(i),width:this.fixed(e),y:this.fixed(-i)})]),n=this.element||this.parent.element;this.adaptor.append(n,o)},e.prototype.html=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=[]),this.jax.html(t,e,r)},e.prototype.svg=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r=[]),this.jax.svg(t,e,r)},e.prototype.text=function(t){return this.jax.text(t)},e.prototype.fixed=function(t,e){return void 0===e&&(e=1),this.jax.fixed(1e3*t,e)},e.kind="unknown",e}(s.CommonWrapper);e.SVGWrapper=l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9tYXRoamF4LWZ1bGwvanMvb3V0cHV0L3N2Zy9XcmFwcGVyLmpzIl0sIm5hbWVzIjpbImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9fdmFsdWVzIiwibyIsInMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm0iLCJpIiwiY2FsbCIsImxlbmd0aCIsIm5leHQiLCJ2YWx1ZSIsImRvbmUiLCJUeXBlRXJyb3IiLCJfX3JlYWQiLCJuIiwiciIsImUiLCJhciIsInB1c2giLCJlcnJvciIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIlNWR1dyYXBwZXIiLCJXcmFwcGVyX2pzXzEiLCJzdmdfanNfMSIsIl9zdXBlciIsIl90aGlzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlbGVtZW50IiwidG9TVkciLCJwYXJlbnQiLCJhZGRDaGlsZHJlbiIsInN0YW5kYXJkU1ZHbm9kZSIsImVfMSIsIl9hIiwieCIsIl9iIiwiY2hpbGROb2RlcyIsIl9jIiwiY2hpbGQiLCJwbGFjZSIsImJib3giLCJMIiwicnNjYWxlIiwidyIsIlIiLCJlXzFfMSIsInJldHVybiIsInN2ZyIsImNyZWF0ZVNWR25vZGUiLCJoYW5kbGVTdHlsZXMiLCJoYW5kbGVTY2FsZSIsImhhbmRsZUNvbG9yIiwiaGFuZGxlQXR0cmlidXRlcyIsImhyZWYiLCJub2RlIiwiYXR0cmlidXRlcyIsImdldCIsImFkYXB0b3IiLCJhcHBlbmQiLCJnZXRCQm94IiwiaCIsImZpbGwiLCJzdHJva2UiLCJ3aWR0aCIsImZpeGVkIiwiaGVpZ2h0IiwieSIsImtpbmQiLCJzdHlsZXMiLCJjc3NUZXh0Iiwic2V0QXR0cmlidXRlIiwic2NhbGUiLCJtYXRoY29sb3IiLCJnZXRFeHBsaWNpdCIsImNvbG9yIiwibWF0aGJhY2tncm91bmQiLCJiYWNrZ3JvdW5kIiwicmVjdCIsImZpcnN0Q2hpbGQiLCJpbnNlcnQiLCJlXzIiLCJlXzMiLCJkZWZhdWx0cyIsImdldEFsbERlZmF1bHRzIiwic2tpcCIsInNraXBBdHRyaWJ1dGVzIiwiZ2V0RXhwbGljaXROYW1lcyIsIl9kIiwibmFtZV8xIiwiaGFzQXR0cmlidXRlIiwiZV8yXzEiLCJuYW1lcyIsInRyaW0iLCJzcGxpdCIsIm5hbWVzXzEiLCJuYW1lc18xXzEiLCJuYW1lXzIiLCJhZGRDbGFzcyIsImVfM18xIiwidHJhbnNmb3JtIiwiZ2V0QXR0cmlidXRlIiwicGxhY2VDaGFyIiwidmFyaWFudCIsImVfNCIsIkMiLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwiZ2V0VmFyaWFudENoYXIiLCJkYXRhIiwicGF0aCIsImNoYXJOb2RlIiwiZyIsInVuaWNvZGVDaGFycyIsImMiLCJuXzEiLCJlXzRfMSIsInVua25vd24iLCJjaGFyIiwiU3RyaW5nIiwiZnJvbUNvZGVQb2ludCIsInRleHQiLCJqYXgiLCJ1bmtub3duVGV4dCIsIm1lYXN1cmVUZXh0Tm9kZVdpdGhDYWNoZSIsIm9wdGlvbnMiLCJmb250Q2FjaGUiLCJ1c2VOb2RlIiwicGF0aE5vZGUiLCJ1c2UiLCJpZCIsImNhY2hlUGF0aCIsIlhMSU5LTlMiLCJkcmF3QkJveCIsImJveCIsInN0eWxlIiwib3BhY2l0eSIsImh0bWwiLCJ0eXBlIiwiZGVmIiwiY29udGVudCIsIkNvbW1vbldyYXBwZXIiXSwibWFwcGluZ3MiOiJtUEFDQSxJQUNRQSxFQURKQyxFQUFhQyxNQUFRQSxLQUFLRCxZQUN0QkQsRUFBZ0IsU0FBVUcsRUFBR0MsR0FJN0IsT0FIQUosRUFBZ0JLLE9BQU9DLGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVMLEVBQUdDLEdBQUtELEVBQUVJLFVBQVlILElBQ3ZFLFNBQVVELEVBQUdDLEdBQUssSUFBSyxJQUFJSyxLQUFLTCxF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MWM5OGRiYmU4Zi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX192YWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn07XG52YXIgX19yZWFkID0gKHRoaXMgJiYgdGhpcy5fX3JlYWQpIHx8IGZ1bmN0aW9uIChvLCBuKSB7XG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xuICAgIGlmICghbSkgcmV0dXJuIG87XG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XG4gICAgdHJ5IHtcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XG4gICAgfVxuICAgIHJldHVybiBhcjtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNWR1dyYXBwZXIgPSB2b2lkIDA7XG52YXIgV3JhcHBlcl9qc18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9XcmFwcGVyLmpzXCIpO1xudmFyIHN2Z19qc18xID0gcmVxdWlyZShcIi4uL3N2Zy5qc1wiKTtcbnZhciBTVkdXcmFwcGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU1ZHV3JhcHBlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTVkdXcmFwcGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGRyZW4odGhpcy5zdGFuZGFyZFNWR25vZGUocGFyZW50KSk7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLnByb3RvdHlwZS5hZGRDaGlsZHJlbiA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgIHZhciB4ID0gMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gX192YWx1ZXModGhpcy5jaGlsZE5vZGVzKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNoaWxkLnRvU1ZHKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQucGxhY2UoeCArIGNoaWxkLmJib3guTCAqIGNoaWxkLmJib3gucnNjYWxlLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeCArPSAoY2hpbGQuYmJveC5MICsgY2hpbGQuYmJveC53ICsgY2hpbGQuYmJveC5SKSAqIGNoaWxkLmJib3gucnNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNWR1dyYXBwZXIucHJvdG90eXBlLnN0YW5kYXJkU1ZHbm9kZSA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIHN2ZyA9IHRoaXMuY3JlYXRlU1ZHbm9kZShwYXJlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsZVN0eWxlcygpO1xuICAgICAgICB0aGlzLmhhbmRsZVNjYWxlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ29sb3IoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVBdHRyaWJ1dGVzKCk7XG4gICAgICAgIHJldHVybiBzdmc7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLnByb3RvdHlwZS5jcmVhdGVTVkdub2RlID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB2YXIgaHJlZiA9IHRoaXMubm9kZS5hdHRyaWJ1dGVzLmdldCgnaHJlZicpO1xuICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgICAgcGFyZW50ID0gdGhpcy5hZGFwdG9yLmFwcGVuZChwYXJlbnQsIHRoaXMuc3ZnKCdhJywgeyBocmVmOiBocmVmIH0pKTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuZ2V0QkJveCgpLCBoID0gX2EuaCwgZCA9IF9hLmQsIHcgPSBfYS53O1xuICAgICAgICAgICAgdGhpcy5hZGFwdG9yLmFwcGVuZChwYXJlbnQsIHRoaXMuc3ZnKCdyZWN0Jywge1xuICAgICAgICAgICAgICAgICdkYXRhLWhpdGJveCc6IHRydWUsIGZpbGw6ICdub25lJywgc3Ryb2tlOiAnbm9uZScsICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmZpeGVkKHcpLCBoZWlnaHQ6IHRoaXMuZml4ZWQoaCArIGQpLCB5OiB0aGlzLmZpeGVkKC1kKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuYWRhcHRvci5hcHBlbmQocGFyZW50LCB0aGlzLnN2ZygnZycsIHsgJ2RhdGEtbW1sLW5vZGUnOiB0aGlzLm5vZGUua2luZCB9KSk7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLnByb3RvdHlwZS5oYW5kbGVTdHlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdHlsZXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBzdHlsZXMgPSB0aGlzLnN0eWxlcy5jc3NUZXh0O1xuICAgICAgICBpZiAoc3R5bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmFkYXB0b3Iuc2V0QXR0cmlidXRlKHRoaXMuZWxlbWVudCwgJ3N0eWxlJywgc3R5bGVzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlU2NhbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmJib3gucnNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSAnc2NhbGUoJyArIHRoaXMuZml4ZWQodGhpcy5iYm94LnJzY2FsZSAvIDEwMDAsIDMpICsgJyknO1xuICAgICAgICAgICAgdGhpcy5hZGFwdG9yLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsICd0cmFuc2Zvcm0nLCBzY2FsZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNWR1dyYXBwZXIucHJvdG90eXBlLmhhbmRsZUNvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYWRhcHRvciA9IHRoaXMuYWRhcHRvcjtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLm5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIG1hdGhjb2xvciA9IGF0dHJpYnV0ZXMuZ2V0RXhwbGljaXQoJ21hdGhjb2xvcicpO1xuICAgICAgICB2YXIgY29sb3IgPSBhdHRyaWJ1dGVzLmdldEV4cGxpY2l0KCdjb2xvcicpO1xuICAgICAgICB2YXIgbWF0aGJhY2tncm91bmQgPSBhdHRyaWJ1dGVzLmdldEV4cGxpY2l0KCdtYXRoYmFja2dyb3VuZCcpO1xuICAgICAgICB2YXIgYmFja2dyb3VuZCA9IGF0dHJpYnV0ZXMuZ2V0RXhwbGljaXQoJ2JhY2tncm91bmQnKTtcbiAgICAgICAgaWYgKG1hdGhjb2xvciB8fCBjb2xvcikge1xuICAgICAgICAgICAgYWRhcHRvci5zZXRBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCAnZmlsbCcsIG1hdGhjb2xvciB8fCBjb2xvcik7XG4gICAgICAgICAgICBhZGFwdG9yLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsICdzdHJva2UnLCBtYXRoY29sb3IgfHwgY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRoYmFja2dyb3VuZCB8fCBiYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLmdldEJCb3goKSwgaCA9IF9hLmgsIGQgPSBfYS5kLCB3ID0gX2EudztcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5zdmcoJ3JlY3QnLCB7XG4gICAgICAgICAgICAgICAgZmlsbDogbWF0aGJhY2tncm91bmQgfHwgYmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICB4OiAwLCB5OiB0aGlzLmZpeGVkKC1kKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5maXhlZCh3KSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZml4ZWQoaCArIGQpLFxuICAgICAgICAgICAgICAgICdkYXRhLWJnY29sb3InOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGFkYXB0b3IuZmlyc3RDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgYWRhcHRvci5pbnNlcnQocmVjdCwgY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRhcHRvci5hcHBlbmQodGhpcy5lbGVtZW50LCByZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVfMiwgX2EsIGVfMywgX2I7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5ub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBkZWZhdWx0cyA9IGF0dHJpYnV0ZXMuZ2V0QWxsRGVmYXVsdHMoKTtcbiAgICAgICAgdmFyIHNraXAgPSBTVkdXcmFwcGVyLnNraXBBdHRyaWJ1dGVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyhhdHRyaWJ1dGVzLmdldEV4cGxpY2l0TmFtZXMoKSksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZV8xID0gX2QudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBbbmFtZV8xXSA9PT0gZmFsc2UgfHwgKCEobmFtZV8xIGluIGRlZmF1bHRzKSAmJiAhc2tpcFtuYW1lXzFdICYmXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLmFkYXB0b3IuaGFzQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgbmFtZV8xKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGFwdG9yLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIG5hbWVfMSwgYXR0cmlidXRlcy5nZXRFeHBsaWNpdChuYW1lXzEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlidXRlcy5nZXQoJ2NsYXNzJykpIHtcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IGF0dHJpYnV0ZXMuZ2V0KCdjbGFzcycpLnRyaW0oKS5zcGxpdCgvICsvKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmFtZXNfMSA9IF9fdmFsdWVzKG5hbWVzKSwgbmFtZXNfMV8xID0gbmFtZXNfMS5uZXh0KCk7ICFuYW1lc18xXzEuZG9uZTsgbmFtZXNfMV8xID0gbmFtZXNfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWVfMiA9IG5hbWVzXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGFwdG9yLmFkZENsYXNzKHRoaXMuZWxlbWVudCwgbmFtZV8yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV8zXzEpIHsgZV8zID0geyBlcnJvcjogZV8zXzEgfTsgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzXzFfMSAmJiAhbmFtZXNfMV8xLmRvbmUgJiYgKF9iID0gbmFtZXNfMS5yZXR1cm4pKSBfYi5jYWxsKG5hbWVzXzEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNWR1dyYXBwZXIucHJvdG90eXBlLnBsYWNlID0gZnVuY3Rpb24gKHgsIHksIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IHZvaWQgMCkgeyBlbGVtZW50ID0gbnVsbDsgfVxuICAgICAgICBpZiAoISh4IHx8IHkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHRoaXMuYWRhcHRvci5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3RyYW5zZm9ybScpIHx8ICcnO1xuICAgICAgICB0cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyB0aGlzLmZpeGVkKHgpICsgJywgJyArIHRoaXMuZml4ZWQoeSkgKyAnKScgKyAodHJhbnNmb3JtID8gJyAnICsgdHJhbnNmb3JtIDogJycpO1xuICAgICAgICB0aGlzLmFkYXB0b3Iuc2V0QXR0cmlidXRlKGVsZW1lbnQsICd0cmFuc2Zvcm0nLCB0cmFuc2Zvcm0pO1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUucGxhY2VDaGFyID0gZnVuY3Rpb24gKG4sIHgsIHksIHBhcmVudCwgdmFyaWFudCkge1xuICAgICAgICB2YXIgZV80LCBfYTtcbiAgICAgICAgaWYgKHZhcmlhbnQgPT09IHZvaWQgMCkgeyB2YXJpYW50ID0gbnVsbDsgfVxuICAgICAgICBpZiAodmFyaWFudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyaWFudCA9IHRoaXMudmFyaWFudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgQyA9IG4udG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHZhciBfYiA9IF9fcmVhZCh0aGlzLmdldFZhcmlhbnRDaGFyKHZhcmlhbnQsIG4pLCA0KSwgdyA9IF9iWzJdLCBkYXRhID0gX2JbM107XG4gICAgICAgIGlmICgncCcgaW4gZGF0YSkge1xuICAgICAgICAgICAgdmFyIHBhdGggPSAoZGF0YS5wID8gJ00nICsgZGF0YS5wICsgJ1onIDogJycpO1xuICAgICAgICAgICAgdGhpcy5wbGFjZSh4LCB5LCB0aGlzLmFkYXB0b3IuYXBwZW5kKHBhcmVudCwgdGhpcy5jaGFyTm9kZSh2YXJpYW50LCBDLCBwYXRoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdjJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZyA9IHRoaXMuYWRhcHRvci5hcHBlbmQocGFyZW50LCB0aGlzLnN2ZygnZycsIHsgJ2RhdGEtYyc6IEMgfSkpO1xuICAgICAgICAgICAgdGhpcy5wbGFjZSh4LCB5LCBnKTtcbiAgICAgICAgICAgIHggPSAwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IF9fdmFsdWVzKHRoaXMudW5pY29kZUNoYXJzKGRhdGEuYywgdmFyaWFudCkpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuXzEgPSBfZC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgeCArPSB0aGlzLnBsYWNlQ2hhcihuXzEsIHgsIHksIGcsIHZhcmlhbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzRfMSkgeyBlXzQgPSB7IGVycm9yOiBlXzRfMSB9OyB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV80KSB0aHJvdyBlXzQuZXJyb3I7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhLnVua25vd24pIHtcbiAgICAgICAgICAgIHZhciBjaGFyID0gU3RyaW5nLmZyb21Db2RlUG9pbnQobik7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IHRoaXMuYWRhcHRvci5hcHBlbmQocGFyZW50LCB0aGlzLmpheC51bmtub3duVGV4dChjaGFyLCB2YXJpYW50KSk7XG4gICAgICAgICAgICB0aGlzLnBsYWNlKHgsIHksIHRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuamF4Lm1lYXN1cmVUZXh0Tm9kZVdpdGhDYWNoZSh0ZXh0LCBjaGFyLCB2YXJpYW50KS53O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3O1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuY2hhck5vZGUgPSBmdW5jdGlvbiAodmFyaWFudCwgQywgcGF0aCkge1xuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLmpheC5vcHRpb25zLmZvbnRDYWNoZTtcbiAgICAgICAgcmV0dXJuIChjYWNoZSAhPT0gJ25vbmUnID8gdGhpcy51c2VOb2RlKHZhcmlhbnQsIEMsIHBhdGgpIDogdGhpcy5wYXRoTm9kZShDLCBwYXRoKSk7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLnByb3RvdHlwZS5wYXRoTm9kZSA9IGZ1bmN0aW9uIChDLCBwYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN2ZygncGF0aCcsIHsgJ2RhdGEtYyc6IEMsIGQ6IHBhdGggfSk7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLnByb3RvdHlwZS51c2VOb2RlID0gZnVuY3Rpb24gKHZhcmlhbnQsIEMsIHBhdGgpIHtcbiAgICAgICAgdmFyIHVzZSA9IHRoaXMuc3ZnKCd1c2UnKTtcbiAgICAgICAgdmFyIGlkID0gJyMnICsgdGhpcy5qYXguZm9udENhY2hlLmNhY2hlUGF0aCh2YXJpYW50LCBDLCBwYXRoKTtcbiAgICAgICAgdGhpcy5hZGFwdG9yLnNldEF0dHJpYnV0ZSh1c2UsICdocmVmJywgaWQsIHN2Z19qc18xLlhMSU5LTlMpO1xuICAgICAgICByZXR1cm4gdXNlO1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuZHJhd0JCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMuZ2V0QkJveCgpLCB3ID0gX2EudywgaCA9IF9hLmgsIGQgPSBfYS5kO1xuICAgICAgICB2YXIgYm94ID0gdGhpcy5zdmcoJ2cnLCB7IHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogLjI1XG4gICAgICAgICAgICB9IH0sIFtcbiAgICAgICAgICAgIHRoaXMuc3ZnKCdyZWN0Jywge1xuICAgICAgICAgICAgICAgIGZpbGw6ICdyZWQnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5maXhlZChoKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5maXhlZCh3KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0aGlzLnN2ZygncmVjdCcsIHtcbiAgICAgICAgICAgICAgICBmaWxsOiAnZ3JlZW4nLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5maXhlZChkKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5maXhlZCh3KSxcbiAgICAgICAgICAgICAgICB5OiB0aGlzLmZpeGVkKC1kKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXSk7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5lbGVtZW50IHx8IHRoaXMucGFyZW50LmVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYWRhcHRvci5hcHBlbmQobm9kZSwgYm94KTtcbiAgICB9O1xuICAgIFNWR1dyYXBwZXIucHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbiAodHlwZSwgZGVmLCBjb250ZW50KSB7XG4gICAgICAgIGlmIChkZWYgPT09IHZvaWQgMCkgeyBkZWYgPSB7fTsgfVxuICAgICAgICBpZiAoY29udGVudCA9PT0gdm9pZCAwKSB7IGNvbnRlbnQgPSBbXTsgfVxuICAgICAgICByZXR1cm4gdGhpcy5qYXguaHRtbCh0eXBlLCBkZWYsIGNvbnRlbnQpO1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuc3ZnID0gZnVuY3Rpb24gKHR5cGUsIGRlZiwgY29udGVudCkge1xuICAgICAgICBpZiAoZGVmID09PSB2b2lkIDApIHsgZGVmID0ge307IH1cbiAgICAgICAgaWYgKGNvbnRlbnQgPT09IHZvaWQgMCkgeyBjb250ZW50ID0gW107IH1cbiAgICAgICAgcmV0dXJuIHRoaXMuamF4LnN2Zyh0eXBlLCBkZWYsIGNvbnRlbnQpO1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpheC50ZXh0KHRleHQpO1xuICAgIH07XG4gICAgU1ZHV3JhcHBlci5wcm90b3R5cGUuZml4ZWQgPSBmdW5jdGlvbiAoeCwgbikge1xuICAgICAgICBpZiAobiA9PT0gdm9pZCAwKSB7IG4gPSAxOyB9XG4gICAgICAgIHJldHVybiB0aGlzLmpheC5maXhlZCh4ICogMTAwMCwgbik7XG4gICAgfTtcbiAgICBTVkdXcmFwcGVyLmtpbmQgPSAndW5rbm93bic7XG4gICAgcmV0dXJuIFNWR1dyYXBwZXI7XG59KFdyYXBwZXJfanNfMS5Db21tb25XcmFwcGVyKSk7XG5leHBvcnRzLlNWR1dyYXBwZXIgPSBTVkdXcmFwcGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V3JhcHBlci5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9