(global.webpackChunkvht11=global.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\mathjax-full\\js\\output\\common\\Wrappers\\scriptbase"],{"./node_modules/mathjax-full/js/output/common/Wrappers/scriptbase.js":function(t,e){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CommonScriptbaseMixin=void 0;e.CommonScriptbaseMixin=function(t){var e;return(e=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.apply(this,i(e))||this,n=o.baseCore=o.childNodes[0];if(!n)return o;for(;1===n.childNodes.length&&(n.node.isKind("mrow")||n.node.isKind("TeXAtom")||n.node.isKind("mstyle")||n.node.isKind("mpadded")||n.node.isKind("mphantom")||n.node.isKind("semantics"));)if(!(n=n.childNodes[0]))return o;return"noIC"in n?(o.baseCore=n,o.constructor.useIC||(n.noIC=!0),o):o}return o(e,t),Object.defineProperty(e.prototype,"baseChild",{get:function(){return this.childNodes[this.node.base]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"script",{get:function(){return this.childNodes[1]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(t,e){void 0===e&&(e=!1);var r=this.baseChild.getBBox(),o=this.script.getBBox(),i=n(this.getOffset(r,o),2),s=i[0],a=i[1];t.append(r),t.combine(o,t.w+s,a),t.w+=this.font.params.scriptspace,t.clean(),this.setChildPWidths(e)},e.prototype.coreIC=function(){var t=this.baseCore.getBBox();return t.ic?1.05*t.ic+.05:0},e.prototype.coreScale=function(){for(var t=this.baseChild.getBBox().rscale,e=this.baseChild;(e.node.isKind("mstyle")||e.node.isKind("mrow")||e.node.isKind("TeXAtom"))&&1===e.childNodes.length;)t*=(e=e.childNodes[0]).getBBox().rscale;return t},e.prototype.isCharBase=function(){for(var t=this.baseChild;(t.node.isKind("mstyle")||t.node.isKind("mrow"))&&1===t.childNodes.length;)t=t.childNodes[0];return(t.node.isKind("mo")||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length&&!t.node.attributes.get("largeop")},e.prototype.getOffset=function(t,e){return[0,0]},e.prototype.getV=function(t,e){var r=this.font.params,o=this.length2em(this.node.attributes.get("subscriptshift"),r.sub1);return Math.max(this.isCharBase()?0:t.d*t.rscale+r.sub_drop*e.rscale,o,e.h*e.rscale-.8*r.x_height)},e.prototype.getU=function(t,e){var r=this.font.params,o=this.node.attributes.getList("displaystyle","superscriptshift"),n=this.node.getProperty("texprimestyle")?r.sup3:o.displaystyle?r.sup1:r.sup2,i=this.length2em(o.superscriptshift,n);return Math.max(this.isCharBase()?0:t.h*t.rscale-r.sup_drop*e.rscale,i,e.d*e.rscale+1/4*r.x_height)},e.prototype.hasMovableLimits=function(){var t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")},e.prototype.getOverKU=function(t,e){var r=this.node.attributes.get("accent"),o=this.font.params,n=e.d*e.rscale,i=(r?o.rule_thickness:Math.max(o.big_op_spacing1,o.big_op_spacing3-Math.max(0,n)))-(this.baseChild.node.isKind("munderover")?.1:0);return[i,t.h*t.rscale+i+n]},e.prototype.getUnderKV=function(t,e){var r=this.node.attributes.get("accentunder"),o=this.font.params,n=e.h*e.rscale,i=(r?o.rule_thickness:Math.max(o.big_op_spacing2,o.big_op_spacing4-n))-(this.baseChild.node.isKind("munderover")?.1:0);return[i,-(t.d*t.rscale+i+n)]},e.prototype.getDeltaW=function(t,e){var r,o,n,a;void 0===e&&(e=[0,0,0]);var l=this.node.attributes.get("align"),c=t.map((function(t){return t.w*t.rscale})),h=Math.max.apply(Math,i(c)),d=[],u=0;try{for(var p=s(c.keys()),f=p.next();!f.done;f=p.next()){d[m=f.value]=("center"===l?(h-c[m])/2:"right"===l?h-c[m]:0)+e[m],d[m]<u&&(u=-d[m])}}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}if(u)try{for(var y=s(d.keys()),b=y.next();!b.done;b=y.next()){var m;d[m=b.value]+=u}}catch(t){n={error:t}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}return d},e.prototype.getDelta=function(t){void 0===t&&(t=!1);var e=this.node.attributes.get("accent")&&!t?this.baseChild.coreMO().bbox.sk:0;return(1.5*this.baseCore.bbox.ic/2+e)*this.coreScale()},e.prototype.stretchChildren=function(){var t,e,r,o,n,i,a=[];try{for(var l=s(this.childNodes),c=l.next();!c.done;c=l.next()){(C=c.value).canStretch(2)&&a.push(C)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}var h=a.length,d=this.childNodes.length;if(h&&d>1){var u=0,p=h>1&&h===d;try{for(var f=s(this.childNodes),y=f.next();!y.done;y=f.next()){var b=0===(C=y.value).stretch.dir;if(p||b){var m=C.getBBox(b),g=m.w,v=m.rscale;g*v>u&&(u=g*v)}}}catch(t){r={error:t}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}try{for(var x=s(a),_=x.next();!_.done;_=x.next()){var C;(C=_.value).coreMO().getStretchedVariant([u/C.bbox.rscale])}}catch(t){n={error:t}}finally{try{_&&!_.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}}},e}(t)).useIC=!1,e}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9tYXRoamF4LWZ1bGwvanMvb3V0cHV0L2NvbW1vbi9XcmFwcGVycy9zY3JpcHRiYXNlLmpzIl0sIm5hbWVzIjpbImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsImIiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9fcmVhZCIsIm8iLCJuIiwibSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiciIsImUiLCJpIiwiY2FsbCIsImFyIiwibmV4dCIsImRvbmUiLCJwdXNoIiwidmFsdWUiLCJlcnJvciIsIl9fc3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY29uY2F0IiwiX192YWx1ZXMiLCJzIiwiVHlwZUVycm9yIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiQ29tbW9uU2NyaXB0YmFzZU1peGluIiwiQmFzZSIsIl9hIiwiX3N1cGVyIiwiY2xhc3NfMSIsImFyZ3MiLCJfaSIsIl90aGlzIiwiYXBwbHkiLCJjb3JlIiwiYmFzZUNvcmUiLCJjaGlsZE5vZGVzIiwibm9kZSIsImlzS2luZCIsInVzZUlDIiwibm9JQyIsImdldCIsImJhc2UiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiY29tcHV0ZUJCb3giLCJiYm94IiwicmVjb21wdXRlIiwiYmFzZWJveCIsImJhc2VDaGlsZCIsImdldEJCb3giLCJzY3JpcHRib3giLCJzY3JpcHQiLCJnZXRPZmZzZXQiLCJ4IiwieSIsImFwcGVuZCIsImNvbWJpbmUiLCJ3IiwiZm9udCIsInBhcmFtcyIsInNjcmlwdHNwYWNlIiwiY2xlYW4iLCJzZXRDaGlsZFBXaWR0aHMiLCJjb3JlSUMiLCJjb3JlYm94IiwiaWMiLCJjb3JlU2NhbGUiLCJzY2FsZSIsInJzY2FsZSIsImlzQ2hhckJhc2UiLCJmcm9tIiwiZ2V0VGV4dCIsImF0dHJpYnV0ZXMiLCJfYmJveCIsIl9zYm94IiwiZ2V0ViIsInNib3giLCJ0ZXgiLCJzdWJzY3JpcHRzaGlmdCIsImxlbmd0aDJlbSIsInN1YjEiLCJNYXRoIiwibWF4Iiwic3ViX2Ryb3AiLCJoIiwieF9oZWlnaHQiLCJnZXRVIiwiYXR0ciIsImdldExpc3QiLCJnZXRQcm9wZXJ0eSIsInN1cDMiLCJkaXNwbGF5c3R5bGUiLCJzdXAxIiwic3VwMiIsInN1cGVyc2NyaXB0c2hpZnQiLCJzdXBfZHJvcCIsImhhc01vdmFibGVMaW1pdHMiLCJkaXNwbGF5IiwibW8iLCJjb3JlTU8iLCJnZXRPdmVyS1UiLCJvdmVyYm94IiwiYWNjZW50IiwiayIsInJ1bGVfdGhpY2tuZXNzIiwiYmlnX29wX3NwYWNpbmcxIiwiYmlnX29wX3NwYWNpbmczIiwiZ2V0VW5kZXJLViIsInVuZGVyYm94IiwiYmlnX29wX3NwYWNpbmcyIiwiYmlnX29wX3NwYWNpbmc0IiwiZ2V0RGVsdGFXIiwiYm94ZXMiLCJkZWx0YSIsImVfMSIsImVfMiIsIl9iIiwiYWxpZ24iLCJ3aWR0aHMiLCJtYXAiLCJib3giLCJkdyIsIl9jIiwia2V5cyIsIl9kIiwiZV8xXzEiLCJyZXR1cm4iLCJfZSIsIl9mIiwiZV8yXzEiLCJnZXREZWx0YSIsIm5vc2tldyIsImRkZWx0YSIsInNrIiwic3RyZXRjaENoaWxkcmVuIiwiZV8zIiwiZV80IiwiZV81Iiwic3RyZXRjaHkiLCJjaGlsZCIsImNhblN0cmV0Y2giLCJlXzNfMSIsImNvdW50Iiwibm9kZUNvdW50IiwiVyIsImFsbCIsIl9nIiwibm9TdHJldGNoIiwic3RyZXRjaCIsImRpciIsIl9oIiwiZV80XzEiLCJzdHJldGNoeV8xIiwic3RyZXRjaHlfMV8xIiwiZ2V0U3RyZXRjaGVkVmFyaWFudCIsImVfNV8xIl0sIm1hcHBpbmdzIjoiZ1JBQ0EsSUFDUUEsRUFESkMsRUFBYUMsTUFBUUEsS0FBS0QsWUFDdEJELEVBQWdCLFNBQVVHLEVBQUdDLEdBSTdCLE9BSEFKLEVBQWdCSyxPQUFPQyxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVTCxFQUFHQyxHQUFLRCxFQUFFSSxVQUFZSCxJQUN2RSxTQUFVRCxFQUFHQyxHQUFLLElBQUssSUFBSUssS0FBS0wsRUFBT0EsRUFBRU0sZUFBZUQsS0FBSU4sRUFBRU0sR0FBS0wsRUFBRUssTUFDcEROLEVBQUdDLElBRXJCLFNBQVVELEVBQUdDLEdBRWhCLFNBQVNPLElBQU9ULEtBQUtVLFlBQWNULEVBRG5DSCxFQUFjRyxFQUFHQyxHQUVqQkQsRUFBRVUsVUFBa0IsT0FBTlQsRUFBYUMsT0FBT1MsT0FBT1YsSUFBTU8sRUFBR0UsVUFBWVQsRUFBRVMsVUFBVyxJQUFJRixLQUduRkksRUFBVWIsTUFBUUEsS0FBS2EsUUFBVyxTQUFVQyxFQUFHQyxHQUMvQyxJQUFJQyxFQUFzQixtQkFBWEMsUUFBeUJILEVBQUVHLE9BQU9DLFVBQ2pELElBQUtGLEVBQUcsT0FBT0YsRUFDZixJQUFtQkssRUFBWUMsRUFBM0JDLEVBQUlMLEVBQUVNLEtBQUtSLEdBQU9TLEVBQUssR0FDM0IsSUFDSSxXQUFjLElBQU5SLEdBQWdCQSxLQUFNLE1BQVFJLEVBQUlFLEVBQUVHLFFBQVFDLE1BQU1GLEVBQUdHLEtBQUtQLEVBQUVRLE9BRXhFLE1BQU9DLEdBQVNSLEVBQUksQ0FBRVEsTUFBT0EsR0FDN0IsUUFDSSxJQUNRVCxJQUFNQSxFQUFFTSxPQUFTVCxFQUFJSyxFQUFVLFNBQUlMLEVBQUVNLEtBQUtELEdBRWxELFFBQVUsR0FBSUQsRUFBRyxNQUFNQSxFQUFFUSxPQUU3QixPQUFPTCxHQUVQTSxFQUFZN0IsTUFBUUEsS0FBSzZCLFVBQWEsV0FDdEMsSUFBSyxJQUFJTixFQUFLLEdBQUlGLEVBQUksRUFBR0EsRUFBSVMsVUFBVUMsT0FBUVYsSUFBS0UsRUFBS0EsRUFBR1MsT0FBT25CLEVBQU9pQixVQUFVVCxLQUNwRixPQUFPRSxHQUVQVSxFQUFZakMsTUFBUUEsS0FBS2lDLFVBQWEsU0FBU25CLEdBQy9DLElBQUlvQixFQUFzQixtQkFBWGpCLFFBQXlCQSxPQUFPQyxTQUFVRixFQUFJa0IsR0FBS3BCLEVBQUVvQixHQUFJYixFQUFJLEVBQzVFLEdBQUlMLEVBQUcsT0FBT0EsRUFBRU0sS0FBS1IsR0FDckIsR0FBSUEsR0FBeUIsaUJBQWJBLEVBQUVpQixPQUFxQixNQUFPLENBQzFDUCxLQUFNLFdBRUYsT0FESVYsR0FBS08sR0FBS1AsRUFBRWlCLFNBQVFqQixPQUFJLEdBQ3JCLENBQUVhLE1BQU9iLEdBQUtBLEVBQUVPLEtBQU1JLE1BQU9YLEtBRzVDLE1BQU0sSUFBSXFCLFVBQVVELEVBQUksMEJBQTRCLG9DQUV4RC9CLE9BQU9pQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRVYsT0FBTyxJQUN0RFUsRUFBUUMsMkJBQXdCLEVBbU9oQ0QsRUFBUUMsc0JBak9SLFNBQStCQyxHQUMzQixJQUFJQyxFQUNKLE9BQU9BLEVBQU0sU0FBVUMsR0FFZixTQUFTQyxJQUVMLElBREEsSUFBSUMsRUFBTyxHQUNGQyxFQUFLLEVBQUdBLEVBQUtkLFVBQVVDLE9BQVFhLElBQ3BDRCxFQUFLQyxHQUFNZCxVQUFVYyxHQUV6QixJQUFJQyxFQUFRSixFQUFPSyxNQUFNOUMsS0FBTTZCLEVBQVNjLEtBQVUzQyxLQUM5QytDLEVBQU9GLEVBQU1HLFNBQVdILEVBQU1JLFdBQVcsR0FDN0MsSUFBS0YsRUFDRCxPQUFPRixFQUNYLEtBQWtDLElBQTNCRSxFQUFLRSxXQUFXbEIsU0FDbEJnQixFQUFLRyxLQUFLQyxPQUFPLFNBQVdKLEVBQUtHLEtBQUtDLE9BQU8sWUFDMUNKLEVBQUtHLEtBQUtDLE9BQU8sV0FBYUosRUFBS0csS0FBS0MsT0FBTyxZQUMvQ0osRUFBS0csS0FBS0MsT0FBTyxhQUFlSixFQUFLRyxLQUFLQyxPQUFPLGVBRXJELEtBREFKLEVBQU9BLEVBQUtFLFdBQVcsSUFFbkIsT0FBT0osRUFFZixNQUFNLFNBQVVFLEdBRWhCRixFQUFNRyxTQUFXRCxFQUNaRixFQUFNbkMsWUFBWTBDLFFBQ25CTCxFQUFLTSxNQUFPLEdBRVRSLEdBTElBLEVBc01mLE9Bek5BOUMsRUFBVTJDLEVBQVNELEdBMEJuQnRDLE9BQU9pQyxlQUFlTSxFQUFRL0IsVUFBVyxZQUFhLENBQ2xEMkMsSUFBSyxXQUNELE9BQU90RCxLQUFLaUQsV0FBV2pELEtBQUtrRCxLQUFLSyxPQUVyQ0MsWUFBWSxFQUNaQyxjQUFjLElBRWxCdEQsT0FBT2lDLGVBQWVNLEVBQVEvQixVQUFXLFNBQVUsQ0FDL0MyQyxJQUFLLFdBQ0QsT0FBT3RELEtBQUtpRCxXQUFXLElBRTNCTyxZQUFZLEVBQ1pDLGNBQWMsSUFFbEJmLEVBQVEvQixVQUFVK0MsWUFBYyxTQUFVQyxFQUFNQyxRQUMxQixJQUFkQSxJQUF3QkEsR0FBWSxHQUN4QyxJQUFJQyxFQUFVN0QsS0FBSzhELFVBQVVDLFVBQ3pCQyxFQUFZaEUsS0FBS2lFLE9BQU9GLFVBQ3hCdkIsRUFBSzNCLEVBQU9iLEtBQUtrRSxVQUFVTCxFQUFTRyxHQUFZLEdBQUlHLEVBQUkzQixFQUFHLEdBQUk0QixFQUFJNUIsRUFBRyxHQUMxRW1CLEVBQUtVLE9BQU9SLEdBQ1pGLEVBQUtXLFFBQVFOLEVBQVdMLEVBQUtZLEVBQUlKLEVBQUdDLEdBQ3BDVCxFQUFLWSxHQUFLdkUsS0FBS3dFLEtBQUtDLE9BQU9DLFlBQzNCZixFQUFLZ0IsUUFDTDNFLEtBQUs0RSxnQkFBZ0JoQixJQUV6QmxCLEVBQVEvQixVQUFVa0UsT0FBUyxXQUN2QixJQUFJQyxFQUFVOUUsS0FBS2dELFNBQVNlLFVBQzVCLE9BQVFlLEVBQVFDLEdBQUssS0FBT0QsRUFBUUMsR0FBSyxJQUFNLEdBRW5EckMsRUFBUS9CLFVBQVVxRSxVQUFZLFdBRzFCLElBRkEsSUFBSUMsRUFBUWpGLEtBQUs4RCxVQUFVQyxVQUFVbUIsT0FDakMzQixFQUFPdkQsS0FBSzhELFdBQ1JQLEVBQUtMLEtBQUtDLE9BQU8sV0FBYUksRUFBS0wsS0FBS0MsT0FBTyxTQUFXSSxFQUFLTCxLQUFLQyxPQUFPLGFBQ2pELElBQTNCSSxFQUFLTixXQUFXbEIsUUFFbkJrRCxJQURBMUIsRUFBT0EsRUFBS04sV0FBVyxJQUNUYyxVQUFVbUIsT0FFNUIsT0FBT0QsR0FFWHZDLEVBQVEvQixVQUFVd0UsV0FBYSxXQUUzQixJQURBLElBQUk1QixFQUFPdkQsS0FBSzhELFdBQ1JQLEVBQUtMLEtBQUtDLE9BQU8sV0FBYUksRUFBS0wsS0FBS0MsT0FBTyxVQUF1QyxJQUEzQkksRUFBS04sV0FBV2xCLFFBQy9Fd0IsRUFBT0EsRUFBS04sV0FBVyxHQUUzQixPQUFTTSxFQUFLTCxLQUFLQyxPQUFPLE9BQVNJLEVBQUtMLEtBQUtDLE9BQU8sT0FBU0ksRUFBS0wsS0FBS0MsT0FBTyxRQUNyRCxJQUFyQkksRUFBS0ksS0FBS3VCLFFBQXNELElBQXRDNUUsTUFBTThFLEtBQUs3QixFQUFLOEIsV0FBV3RELFNBQ3BEd0IsRUFBS0wsS0FBS29DLFdBQVdoQyxJQUFJLFlBRWxDWixFQUFRL0IsVUFBVXVELFVBQVksU0FBVXFCLEVBQU9DLEdBQzNDLE1BQU8sQ0FBQyxFQUFHLElBRWY5QyxFQUFRL0IsVUFBVThFLEtBQU8sU0FBVTlCLEVBQU0rQixHQUNyQyxJQUFJQyxFQUFNM0YsS0FBS3dFLEtBQUtDLE9BQ2hCbUIsRUFBaUI1RixLQUFLNkYsVUFBVTdGLEtBQUtrRCxLQUFLb0MsV0FBV2hDLElBQUksa0JBQW1CcUMsRUFBSUcsTUFDcEYsT0FBT0MsS0FBS0MsSUFBSWhHLEtBQUttRixhQUFlLEVBQUl4QixFQUFLMUQsRUFBSTBELEVBQUt1QixPQUFTUyxFQUFJTSxTQUFXUCxFQUFLUixPQUFRVSxFQUFnQkYsRUFBS1EsRUFBSVIsRUFBS1IsT0FBUyxHQUFVUyxFQUFJUSxXQUVwSnpELEVBQVEvQixVQUFVeUYsS0FBTyxTQUFVekMsRUFBTStCLEdBQ3JDLElBQUlDLEVBQU0zRixLQUFLd0UsS0FBS0MsT0FDaEI0QixFQUFPckcsS0FBS2tELEtBQUtvQyxXQUFXZ0IsUUFBUSxlQUFnQixvQkFFcEQvRixFQURRUCxLQUFLa0QsS0FBS3FELFlBQVksaUJBQ2xCWixFQUFJYSxLQUFRSCxFQUFLSSxhQUFlZCxFQUFJZSxLQUFPZixFQUFJZ0IsS0FDM0RDLEVBQW1CNUcsS0FBSzZGLFVBQVVRLEVBQUtPLGlCQUFrQnJHLEdBQzdELE9BQU93RixLQUFLQyxJQUFJaEcsS0FBS21GLGFBQWUsRUFBSXhCLEVBQUt1QyxFQUFJdkMsRUFBS3VCLE9BQVNTLEVBQUlrQixTQUFXbkIsRUFBS1IsT0FBUTBCLEVBQWtCbEIsRUFBS3pGLEVBQUl5RixFQUFLUixPQUFVLEVBQUksRUFBS1MsRUFBSVEsV0FFdEp6RCxFQUFRL0IsVUFBVW1HLGlCQUFtQixXQUNqQyxJQUFJQyxFQUFVL0csS0FBS2tELEtBQUtvQyxXQUFXaEMsSUFBSSxnQkFDbkMwRCxFQUFLaEgsS0FBSzhELFVBQVVtRCxTQUFTL0QsS0FDakMsT0FBUzZELEtBQWFDLEVBQUcxQixXQUFXaEMsSUFBSSxrQkFFNUNaLEVBQVEvQixVQUFVdUcsVUFBWSxTQUFVckQsRUFBU3NELEdBQzdDLElBQUlDLEVBQVNwSCxLQUFLa0QsS0FBS29DLFdBQVdoQyxJQUFJLFVBQ2xDcUMsRUFBTTNGLEtBQUt3RSxLQUFLQyxPQUNoQnhFLEVBQUlrSCxFQUFRbEgsRUFBSWtILEVBQVFqQyxPQUN4Qm1DLEdBQUtELEVBQVN6QixFQUFJMkIsZUFDbEJ2QixLQUFLQyxJQUFJTCxFQUFJNEIsZ0JBQWlCNUIsRUFBSTZCLGdCQUFrQnpCLEtBQUtDLElBQUksRUFBRy9GLE1BQy9ERCxLQUFLOEQsVUFBVVosS0FBS0MsT0FBTyxjQUFnQixHQUFLLEdBQ3JELE1BQU8sQ0FBQ2tFLEVBQUd4RCxFQUFRcUMsRUFBSXJDLEVBQVFxQixPQUFTbUMsRUFBSXBILElBRWhEeUMsRUFBUS9CLFVBQVU4RyxXQUFhLFNBQVU1RCxFQUFTNkQsR0FDOUMsSUFBSU4sRUFBU3BILEtBQUtrRCxLQUFLb0MsV0FBV2hDLElBQUksZUFDbENxQyxFQUFNM0YsS0FBS3dFLEtBQUtDLE9BQ2hCeUIsRUFBSXdCLEVBQVN4QixFQUFJd0IsRUFBU3hDLE9BQzFCbUMsR0FBS0QsRUFBU3pCLEVBQUkyQixlQUNsQnZCLEtBQUtDLElBQUlMLEVBQUlnQyxnQkFBaUJoQyxFQUFJaUMsZ0JBQWtCMUIsS0FDbkRsRyxLQUFLOEQsVUFBVVosS0FBS0MsT0FBTyxjQUFnQixHQUFLLEdBQ3JELE1BQU8sQ0FBQ2tFLElBQUt4RCxFQUFRNUQsRUFBSTRELEVBQVFxQixPQUFTbUMsRUFBSW5CLEtBRWxEeEQsRUFBUS9CLFVBQVVrSCxVQUFZLFNBQVVDLEVBQU9DLEdBQzNDLElBQUlDLEVBQUt4RixFQUFJeUYsRUFBS0MsT0FDSixJQUFWSCxJQUFvQkEsRUFBUSxDQUFDLEVBQUcsRUFBRyxJQUN2QyxJQUFJSSxFQUFRbkksS0FBS2tELEtBQUtvQyxXQUFXaEMsSUFBSSxTQUNqQzhFLEVBQVNOLEVBQU1PLEtBQUksU0FBVUMsR0FBTyxPQUFPQSxFQUFJL0QsRUFBSStELEVBQUlwRCxVQUN2RFgsRUFBSXdCLEtBQUtDLElBQUlsRCxNQUFNaUQsS0FBTWxFLEVBQVN1RyxJQUNsQ0csRUFBSyxHQUNMdkgsRUFBSSxFQUNSLElBQ0ksSUFBSyxJQUFJd0gsRUFBS3ZHLEVBQVNtRyxFQUFPSyxRQUFTQyxFQUFLRixFQUFHaEgsUUFBU2tILEVBQUdqSCxLQUFNaUgsRUFBS0YsRUFBR2hILE9BQVEsQ0FFN0UrRyxFQURJbEgsRUFBSXFILEVBQUcvRyxRQUNRLFdBQVZ3RyxHQUFzQjVELEVBQUk2RCxFQUFPL0csSUFBTSxFQUNsQyxVQUFWOEcsRUFBb0I1RCxFQUFJNkQsRUFBTy9HLEdBQUssR0FBSzBHLEVBQU0xRyxHQUMvQ2tILEVBQUdsSCxHQUFLTCxJQUNSQSxHQUFLdUgsRUFBR2xILEtBSXBCLE1BQU9zSCxHQUFTWCxFQUFNLENBQUVwRyxNQUFPK0csR0FDL0IsUUFDSSxJQUNRRCxJQUFPQSxFQUFHakgsT0FBU2UsRUFBS2dHLEVBQUdJLFNBQVNwRyxFQUFHbEIsS0FBS2tILEdBRXBELFFBQVUsR0FBSVIsRUFBSyxNQUFNQSxFQUFJcEcsT0FFakMsR0FBSVosRUFDQSxJQUNJLElBQUssSUFBSTZILEVBQUs1RyxFQUFTc0csRUFBR0UsUUFBU0ssRUFBS0QsRUFBR3JILFFBQVNzSCxFQUFHckgsS0FBTXFILEVBQUtELEVBQUdySCxPQUFRLENBQ3pFLElBQUlILEVBQ0prSCxFQURJbEgsRUFBSXlILEVBQUduSCxRQUNGWCxHQUdqQixNQUFPK0gsR0FBU2QsRUFBTSxDQUFFckcsTUFBT21ILEdBQy9CLFFBQ0ksSUFDUUQsSUFBT0EsRUFBR3JILE9BQVN5RyxFQUFLVyxFQUFHRCxTQUFTVixFQUFHNUcsS0FBS3VILEdBRXBELFFBQVUsR0FBSVosRUFBSyxNQUFNQSxFQUFJckcsT0FHckMsT0FBTzJHLEdBRVg3RixFQUFRL0IsVUFBVXFJLFNBQVcsU0FBVUMsUUFDcEIsSUFBWEEsSUFBcUJBLEdBQVMsR0FDbEMsSUFDSUMsRUFEU2xKLEtBQUtrRCxLQUFLb0MsV0FBV2hDLElBQUksWUFDYjJGLEVBQVNqSixLQUFLOEQsVUFBVW1ELFNBQVN0RCxLQUFLd0YsR0FBSyxFQUNwRSxPQW5LSixJQW1Lb0JuSixLQUFLZ0QsU0FBU1csS0FBS29CLEdBQUssRUFBSW1FLEdBQVVsSixLQUFLZ0YsYUFFL0R0QyxFQUFRL0IsVUFBVXlJLGdCQUFrQixXQUNoQyxJQUFJQyxFQUFLN0csRUFBSThHLEVBQUtwQixFQUFJcUIsRUFBS2YsRUFDdkJnQixFQUFXLEdBQ2YsSUFDSSxJQUFLLElBQUlkLEVBQUt6RyxFQUFTakMsS0FBS2lELFlBQWE0RixFQUFLSCxFQUFHbEgsUUFBU3FILEVBQUdwSCxLQUFNb0gsRUFBS0gsRUFBR2xILE9BQVEsRUFDM0VpSSxFQUFRWixFQUFHbEgsT0FDTCtILFdBQVcsSUFDakJGLEVBQVM5SCxLQUFLK0gsSUFJMUIsTUFBT0UsR0FBU04sRUFBTSxDQUFFekgsTUFBTytILEdBQy9CLFFBQ0ksSUFDUWQsSUFBT0EsRUFBR3BILE9BQVNlLEVBQUtrRyxFQUFHRSxTQUFTcEcsRUFBR2xCLEtBQUtvSCxHQUVwRCxRQUFVLEdBQUlXLEVBQUssTUFBTUEsRUFBSXpILE9BRWpDLElBQUlnSSxFQUFRSixFQUFTekgsT0FDakI4SCxFQUFZN0osS0FBS2lELFdBQVdsQixPQUNoQyxHQUFJNkgsR0FBU0MsRUFBWSxFQUFHLENBQ3hCLElBQUlDLEVBQUksRUFDSkMsRUFBT0gsRUFBUSxHQUFLQSxJQUFVQyxFQUNsQyxJQUNJLElBQUssSUFBSWYsRUFBSzdHLEVBQVNqQyxLQUFLaUQsWUFBYStHLEVBQUtsQixFQUFHdEgsUUFBU3dJLEVBQUd2SSxLQUFNdUksRUFBS2xCLEVBQUd0SCxPQUFRLENBQy9FLElBQ0l5SSxFQUFtQyxLQURuQ1IsRUFBUU8sRUFBR3JJLE9BQ1F1SSxRQUFRQyxJQUMvQixHQUFJSixHQUFPRSxFQUFXLENBQ2xCLElBQUlHLEVBQUtYLEVBQU0xRixRQUFRa0csR0FBWTFGLEVBQUk2RixFQUFHN0YsRUFBR1csRUFBU2tGLEVBQUdsRixPQUNyRFgsRUFBSVcsRUFBUzRFLElBQ2JBLEVBQUl2RixFQUFJVyxLQUl4QixNQUFPbUYsR0FBU2YsRUFBTSxDQUFFMUgsTUFBT3lJLEdBQy9CLFFBQ0ksSUFDUUwsSUFBT0EsRUFBR3ZJLE9BQVN5RyxFQUFLWSxFQUFHRixTQUFTVixFQUFHNUcsS0FBS3dILEdBRXBELFFBQVUsR0FBSVEsRUFBSyxNQUFNQSxFQUFJMUgsT0FFakMsSUFDSSxJQUFLLElBQUkwSSxFQUFhckksRUFBU3VILEdBQVdlLEVBQWVELEVBQVc5SSxRQUFTK0ksRUFBYTlJLEtBQU04SSxFQUFlRCxFQUFXOUksT0FBUSxDQUM5SCxJQUFJaUksS0FBUWMsRUFBYTVJLE9BQ25Cc0YsU0FBU3VELG9CQUFvQixDQUFDVixFQUFJTCxFQUFNOUYsS0FBS3VCLFVBRzNELE1BQU91RixHQUFTbEIsRUFBTSxDQUFFM0gsTUFBTzZJLEdBQy9CLFFBQ0ksSUFDUUYsSUFBaUJBLEVBQWE5SSxPQUFTK0csRUFBSzhCLEVBQVcxQixTQUFTSixFQUFHbEgsS0FBS2dKLEdBRWhGLFFBQVUsR0FBSWYsRUFBSyxNQUFNQSxFQUFJM0gsVUFJbENjLEVBMU5ILENBMk5OSCxJQUNDYSxPQUFRLEVBQ1haIiwiZmlsZSI6IjY1MzhhMDM0YTVlNzc5MDNjODRmLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gICAgaWYgKCFtKSByZXR1cm4gbztcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcbiAgICB0cnkge1xuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cbiAgICB9XG4gICAgcmV0dXJuIGFyO1xufTtcbnZhciBfX3NwcmVhZCA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWQpIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICAgIHJldHVybiBhcjtcbn07XG52YXIgX192YWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbW1vblNjcmlwdGJhc2VNaXhpbiA9IHZvaWQgMDtcbnZhciBERUxUQSA9IDEuNTtcbmZ1bmN0aW9uIENvbW1vblNjcmlwdGJhc2VNaXhpbihCYXNlKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBfYSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgICAgICBfX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBfX3NwcmVhZChhcmdzKSkgfHwgdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY29yZSA9IF90aGlzLmJhc2VDb3JlID0gX3RoaXMuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvcmUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgICAgICB3aGlsZSAoY29yZS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAoY29yZS5ub2RlLmlzS2luZCgnbXJvdycpIHx8IGNvcmUubm9kZS5pc0tpbmQoJ1RlWEF0b20nKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgY29yZS5ub2RlLmlzS2luZCgnbXN0eWxlJykgfHwgY29yZS5ub2RlLmlzS2luZCgnbXBhZGRlZCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JlLm5vZGUuaXNLaW5kKCdtcGhhbnRvbScpIHx8IGNvcmUubm9kZS5pc0tpbmQoJ3NlbWFudGljcycpKSkge1xuICAgICAgICAgICAgICAgICAgICBjb3JlID0gY29yZS5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvcmUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKCdub0lDJyBpbiBjb3JlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgICAgIF90aGlzLmJhc2VDb3JlID0gY29yZTtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmNvbnN0cnVjdG9yLnVzZUlDKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcmUubm9JQyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc18xLnByb3RvdHlwZSwgXCJiYXNlQ2hpbGRcIiwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzW3RoaXMubm9kZS5iYXNlXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfMS5wcm90b3R5cGUsIFwic2NyaXB0XCIsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGROb2Rlc1sxXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5jb21wdXRlQkJveCA9IGZ1bmN0aW9uIChiYm94LCByZWNvbXB1dGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVjb21wdXRlID09PSB2b2lkIDApIHsgcmVjb21wdXRlID0gZmFsc2U7IH1cbiAgICAgICAgICAgICAgICB2YXIgYmFzZWJveCA9IHRoaXMuYmFzZUNoaWxkLmdldEJCb3goKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0Ym94ID0gdGhpcy5zY3JpcHQuZ2V0QkJveCgpO1xuICAgICAgICAgICAgICAgIHZhciBfYSA9IF9fcmVhZCh0aGlzLmdldE9mZnNldChiYXNlYm94LCBzY3JpcHRib3gpLCAyKSwgeCA9IF9hWzBdLCB5ID0gX2FbMV07XG4gICAgICAgICAgICAgICAgYmJveC5hcHBlbmQoYmFzZWJveCk7XG4gICAgICAgICAgICAgICAgYmJveC5jb21iaW5lKHNjcmlwdGJveCwgYmJveC53ICsgeCwgeSk7XG4gICAgICAgICAgICAgICAgYmJveC53ICs9IHRoaXMuZm9udC5wYXJhbXMuc2NyaXB0c3BhY2U7XG4gICAgICAgICAgICAgICAgYmJveC5jbGVhbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hpbGRQV2lkdGhzKHJlY29tcHV0ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuY29yZUlDID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3JlYm94ID0gdGhpcy5iYXNlQ29yZS5nZXRCQm94KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChjb3JlYm94LmljID8gMS4wNSAqIGNvcmVib3guaWMgKyAuMDUgOiAwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5jb3JlU2NhbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5iYXNlQ2hpbGQuZ2V0QkJveCgpLnJzY2FsZTtcbiAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IHRoaXMuYmFzZUNoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlICgoYmFzZS5ub2RlLmlzS2luZCgnbXN0eWxlJykgfHwgYmFzZS5ub2RlLmlzS2luZCgnbXJvdycpIHx8IGJhc2Uubm9kZS5pc0tpbmQoJ1RlWEF0b20nKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgYmFzZS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlID0gYmFzZS5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZSAqPSBiYXNlLmdldEJCb3goKS5yc2NhbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzY2FsZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5pc0NoYXJCYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBiYXNlID0gdGhpcy5iYXNlQ2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKChiYXNlLm5vZGUuaXNLaW5kKCdtc3R5bGUnKSB8fCBiYXNlLm5vZGUuaXNLaW5kKCdtcm93JykpICYmIGJhc2UuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoYmFzZS5ub2RlLmlzS2luZCgnbW8nKSB8fCBiYXNlLm5vZGUuaXNLaW5kKCdtaScpIHx8IGJhc2Uubm9kZS5pc0tpbmQoJ21uJykpICYmXG4gICAgICAgICAgICAgICAgICAgIGJhc2UuYmJveC5yc2NhbGUgPT09IDEgJiYgQXJyYXkuZnJvbShiYXNlLmdldFRleHQoKSkubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAgICAgICAgICFiYXNlLm5vZGUuYXR0cmlidXRlcy5nZXQoJ2xhcmdlb3AnKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0T2Zmc2V0ID0gZnVuY3Rpb24gKF9iYm94LCBfc2JveCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMCwgMF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0ViA9IGZ1bmN0aW9uIChiYm94LCBzYm94KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleCA9IHRoaXMuZm9udC5wYXJhbXM7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdHNoaWZ0ID0gdGhpcy5sZW5ndGgyZW0odGhpcy5ub2RlLmF0dHJpYnV0ZXMuZ2V0KCdzdWJzY3JpcHRzaGlmdCcpLCB0ZXguc3ViMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuaXNDaGFyQmFzZSgpID8gMCA6IGJib3guZCAqIGJib3gucnNjYWxlICsgdGV4LnN1Yl9kcm9wICogc2JveC5yc2NhbGUsIHN1YnNjcmlwdHNoaWZ0LCBzYm94LmggKiBzYm94LnJzY2FsZSAtICg0IC8gNSkgKiB0ZXgueF9oZWlnaHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldFUgPSBmdW5jdGlvbiAoYmJveCwgc2JveCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXggPSB0aGlzLmZvbnQucGFyYW1zO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gdGhpcy5ub2RlLmF0dHJpYnV0ZXMuZ2V0TGlzdCgnZGlzcGxheXN0eWxlJywgJ3N1cGVyc2NyaXB0c2hpZnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWUgPSB0aGlzLm5vZGUuZ2V0UHJvcGVydHkoJ3RleHByaW1lc3R5bGUnKTtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHByaW1lID8gdGV4LnN1cDMgOiAoYXR0ci5kaXNwbGF5c3R5bGUgPyB0ZXguc3VwMSA6IHRleC5zdXAyKTtcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJzY3JpcHRzaGlmdCA9IHRoaXMubGVuZ3RoMmVtKGF0dHIuc3VwZXJzY3JpcHRzaGlmdCwgcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuaXNDaGFyQmFzZSgpID8gMCA6IGJib3guaCAqIGJib3gucnNjYWxlIC0gdGV4LnN1cF9kcm9wICogc2JveC5yc2NhbGUsIHN1cGVyc2NyaXB0c2hpZnQsIHNib3guZCAqIHNib3gucnNjYWxlICsgKDEgLyA0KSAqIHRleC54X2hlaWdodCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuaGFzTW92YWJsZUxpbWl0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzcGxheSA9IHRoaXMubm9kZS5hdHRyaWJ1dGVzLmdldCgnZGlzcGxheXN0eWxlJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1vID0gdGhpcy5iYXNlQ2hpbGQuY29yZU1PKCkubm9kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCFkaXNwbGF5ICYmICEhbW8uYXR0cmlidXRlcy5nZXQoJ21vdmFibGVsaW1pdHMnKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0T3ZlcktVID0gZnVuY3Rpb24gKGJhc2Vib3gsIG92ZXJib3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWNjZW50ID0gdGhpcy5ub2RlLmF0dHJpYnV0ZXMuZ2V0KCdhY2NlbnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4ID0gdGhpcy5mb250LnBhcmFtcztcbiAgICAgICAgICAgICAgICB2YXIgZCA9IG92ZXJib3guZCAqIG92ZXJib3gucnNjYWxlO1xuICAgICAgICAgICAgICAgIHZhciBrID0gKGFjY2VudCA/IHRleC5ydWxlX3RoaWNrbmVzcyA6XG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHRleC5iaWdfb3Bfc3BhY2luZzEsIHRleC5iaWdfb3Bfc3BhY2luZzMgLSBNYXRoLm1heCgwLCBkKSkpIC1cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYmFzZUNoaWxkLm5vZGUuaXNLaW5kKCdtdW5kZXJvdmVyJykgPyAuMSA6IDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBbaywgYmFzZWJveC5oICogYmFzZWJveC5yc2NhbGUgKyBrICsgZF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0VW5kZXJLViA9IGZ1bmN0aW9uIChiYXNlYm94LCB1bmRlcmJveCkge1xuICAgICAgICAgICAgICAgIHZhciBhY2NlbnQgPSB0aGlzLm5vZGUuYXR0cmlidXRlcy5nZXQoJ2FjY2VudHVuZGVyJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRleCA9IHRoaXMuZm9udC5wYXJhbXM7XG4gICAgICAgICAgICAgICAgdmFyIGggPSB1bmRlcmJveC5oICogdW5kZXJib3gucnNjYWxlO1xuICAgICAgICAgICAgICAgIHZhciBrID0gKGFjY2VudCA/IHRleC5ydWxlX3RoaWNrbmVzcyA6XG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHRleC5iaWdfb3Bfc3BhY2luZzIsIHRleC5iaWdfb3Bfc3BhY2luZzQgLSBoKSkgLVxuICAgICAgICAgICAgICAgICAgICAodGhpcy5iYXNlQ2hpbGQubm9kZS5pc0tpbmQoJ211bmRlcm92ZXInKSA/IC4xIDogMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtrLCAtKGJhc2Vib3guZCAqIGJhc2Vib3gucnNjYWxlICsgayArIGgpXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5nZXREZWx0YVcgPSBmdW5jdGlvbiAoYm94ZXMsIGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVfMSwgX2EsIGVfMiwgX2I7XG4gICAgICAgICAgICAgICAgaWYgKGRlbHRhID09PSB2b2lkIDApIHsgZGVsdGEgPSBbMCwgMCwgMF07IH1cbiAgICAgICAgICAgICAgICB2YXIgYWxpZ24gPSB0aGlzLm5vZGUuYXR0cmlidXRlcy5nZXQoJ2FsaWduJyk7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRocyA9IGJveGVzLm1hcChmdW5jdGlvbiAoYm94KSB7IHJldHVybiBib3gudyAqIGJveC5yc2NhbGU7IH0pO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX19zcHJlYWQod2lkdGhzKSk7XG4gICAgICAgICAgICAgICAgdmFyIGR3ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIG0gPSAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXMod2lkdGhzLmtleXMoKSksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gX2QudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkd1tpXSA9IChhbGlnbiA9PT0gJ2NlbnRlcicgPyAodyAtIHdpZHRoc1tpXSkgLyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbiA9PT0gJ3JpZ2h0JyA/IHcgLSB3aWR0aHNbaV0gOiAwKSArIGRlbHRhW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR3W2ldIDwgbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAtZHdbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZSA9IF9fdmFsdWVzKGR3LmtleXMoKSksIF9mID0gX2UubmV4dCgpOyAhX2YuZG9uZTsgX2YgPSBfZS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IF9mLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR3W2ldICs9IG07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZiAmJiAhX2YuZG9uZSAmJiAoX2IgPSBfZS5yZXR1cm4pKSBfYi5jYWxsKF9lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZHc7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0RGVsdGEgPSBmdW5jdGlvbiAobm9za2V3KSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vc2tldyA9PT0gdm9pZCAwKSB7IG5vc2tldyA9IGZhbHNlOyB9XG4gICAgICAgICAgICAgICAgdmFyIGFjY2VudCA9IHRoaXMubm9kZS5hdHRyaWJ1dGVzLmdldCgnYWNjZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGRkZWx0YSA9IChhY2NlbnQgJiYgIW5vc2tldyA/IHRoaXMuYmFzZUNoaWxkLmNvcmVNTygpLmJib3guc2sgOiAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKERFTFRBICogdGhpcy5iYXNlQ29yZS5iYm94LmljIC8gMiArIGRkZWx0YSkgKiB0aGlzLmNvcmVTY2FsZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNsYXNzXzEucHJvdG90eXBlLnN0cmV0Y2hDaGlsZHJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZV8zLCBfYSwgZV80LCBfYiwgZV81LCBfYztcbiAgICAgICAgICAgICAgICB2YXIgc3RyZXRjaHkgPSBbXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZCA9IF9fdmFsdWVzKHRoaXMuY2hpbGROb2RlcyksIF9lID0gX2QubmV4dCgpOyAhX2UuZG9uZTsgX2UgPSBfZC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IF9lLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNhblN0cmV0Y2goMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJldGNoeS5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8zXzEpIHsgZV8zID0geyBlcnJvcjogZV8zXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9lICYmICFfZS5kb25lICYmIChfYSA9IF9kLnJldHVybikpIF9hLmNhbGwoX2QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8zKSB0aHJvdyBlXzMuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gc3RyZXRjaHkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudCAmJiBub2RlQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBXID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbCA9IChjb3VudCA+IDEgJiYgY291bnQgPT09IG5vZGVDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZiA9IF9fdmFsdWVzKHRoaXMuY2hpbGROb2RlcyksIF9nID0gX2YubmV4dCgpOyAhX2cuZG9uZTsgX2cgPSBfZi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfZy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9TdHJldGNoID0gKGNoaWxkLnN0cmV0Y2guZGlyID09PSAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsIHx8IG5vU3RyZXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2ggPSBjaGlsZC5nZXRCQm94KG5vU3RyZXRjaCksIHcgPSBfaC53LCByc2NhbGUgPSBfaC5yc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3ICogcnNjYWxlID4gVylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFcgPSB3ICogcnNjYWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV80XzEpIHsgZV80ID0geyBlcnJvcjogZV80XzEgfTsgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9nICYmICFfZy5kb25lICYmIChfYiA9IF9mLnJldHVybikpIF9iLmNhbGwoX2YpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzdHJldGNoeV8xID0gX192YWx1ZXMoc3RyZXRjaHkpLCBzdHJldGNoeV8xXzEgPSBzdHJldGNoeV8xLm5leHQoKTsgIXN0cmV0Y2h5XzFfMS5kb25lOyBzdHJldGNoeV8xXzEgPSBzdHJldGNoeV8xLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHN0cmV0Y2h5XzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5jb3JlTU8oKS5nZXRTdHJldGNoZWRWYXJpYW50KFtXIC8gY2hpbGQuYmJveC5yc2NhbGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV81XzEpIHsgZV81ID0geyBlcnJvcjogZV81XzEgfTsgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmV0Y2h5XzFfMSAmJiAhc3RyZXRjaHlfMV8xLmRvbmUgJiYgKF9jID0gc3RyZXRjaHlfMS5yZXR1cm4pKSBfYy5jYWxsKHN0cmV0Y2h5XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzUpIHRocm93IGVfNS5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBjbGFzc18xO1xuICAgICAgICB9KEJhc2UpKSxcbiAgICAgICAgX2EudXNlSUMgPSBmYWxzZSxcbiAgICAgICAgX2E7XG59XG5leHBvcnRzLkNvbW1vblNjcmlwdGJhc2VNaXhpbiA9IENvbW1vblNjcmlwdGJhc2VNaXhpbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjcmlwdGJhc2UuanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==