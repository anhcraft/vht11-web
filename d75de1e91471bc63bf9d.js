(self.webpackChunkvht11=self.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\mathjax-full\\js\\input\\mathml\\MathMLCompile"],{"./node_modules/mathjax-full/js/input/mathml/MathMLCompile.js":function(t,e,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MathMLCompile=void 0;var o=r("./node_modules/mathjax-full/js/core/MmlTree/MmlNode.js"),s=r("./node_modules/mathjax-full/js/util/Options.js"),n=r("./node_modules/mathjax-full/js/util/Entities.js"),l=function(){function t(t){void 0===t&&(t={});var e=this.constructor;this.options=s.userOptions(s.defaultOptions({},e.OPTIONS),t)}return t.prototype.setMmlFactory=function(t){this.factory=t},t.prototype.compile=function(t){var e=this.makeNode(t);return e.verifyTree(this.options.verify),e.setInheritedAttributes({},!1,0,!1),e.walkTree(this.markMrows),e},t.prototype.makeNode=function(t){var e,r,i=this.adaptor,s=!1,n=i.kind(t).replace(/^.*:/,""),l=i.getAttribute(t,"data-mjx-texclass")||"";l&&(l=this.filterAttribute("data-mjx-texclass",l)||"");var h=l&&"mrow"===n?"TeXAtom":n;try{for(var d=a(this.filterClassList(i.allClasses(t))),u=d.next();!u.done;u=d.next()){var c=u.value;c.match(/^MJX-TeXAtom-/)?(l=c.substr(12),h="TeXAtom"):"MJX-fixedlimits"===c&&(s=!0)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}this.factory.getNodeClass(h)||this.error('Unknown node type "'+h+'"');var p=this.factory.create(h);return"TeXAtom"===h?this.texAtom(p,l,s):l&&(p.texClass=o.TEXCLASS[l],p.setProperty("texClass",p.texClass)),this.addAttributes(p,t),this.checkClass(p,t),this.addChildren(p,t),p},t.prototype.addAttributes=function(t,e){var r,i,o=!1;try{for(var s=a(this.adaptor.allAttributes(e)),n=s.next();!n.done;n=s.next()){var l=n.value,h=l.name,d=this.filterAttribute(h,l.value);if(null===d)return;if("data-mjx-"===h.substr(0,9))"data-mjx-alternate"===h?t.setProperty("variantForm",!0):"data-mjx-variant"===h&&(t.attributes.set("mathvariant",d),o=!0);else if("class"!==h){var u=d.toLowerCase();"true"===u||"false"===u?t.attributes.set(h,"true"===u):o&&"mathvariant"===h||t.attributes.set(h,d)}}}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.filterAttribute=function(t,e){return e},t.prototype.filterClassList=function(t){return t},t.prototype.addChildren=function(t,e){var r,i;if(0!==t.arity){var o=this.adaptor;try{for(var s=a(o.childNodes(e)),n=s.next();!n.done;n=s.next()){var l=n.value,h=o.kind(l);if("#comment"!==h)if("#text"===h)this.addText(t,l);else if(t.isKind("annotation-xml"))t.appendChild(this.factory.create("XML").setXML(l,o));else{var d=t.appendChild(this.makeNode(l));0===d.arity&&o.childNodes(l).length&&(this.options.fixMisplacedChildren?this.addChildren(t,l):d.mError("There should not be children for "+d.kind+" nodes",this.options.verify,!0))}}}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}},t.prototype.addText=function(t,e){var r=this.adaptor.value(e);(t.isToken||t.getProperty("isChars"))&&t.arity?(t.isToken&&(r=n.translate(r),r=this.trimSpace(r)),t.appendChild(this.factory.create("text").setText(r))):r.match(/\S/)&&this.error('Unexpected text node "'+r+'"')},t.prototype.checkClass=function(t,e){var r,i,o=[];try{for(var s=a(this.filterClassList(this.adaptor.allClasses(e))),n=s.next();!n.done;n=s.next()){var l=n.value;"MJX-"===l.substr(0,4)?"MJX-variant"===l?t.setProperty("variantForm",!0):"MJX-TeXAtom"!==l.substr(0,11)&&t.attributes.set("mathvariant",this.fixCalligraphic(l.substr(3))):o.push(l)}}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}o.length&&t.attributes.set("class",o.join(" "))},t.prototype.fixCalligraphic=function(t){return t.replace(/caligraphic/,"calligraphic")},t.prototype.texAtom=function(t,e,r){t.texClass=o.TEXCLASS[e],t.setProperty("texClass",t.texClass),"OP"!==e||r||(t.setProperty("movesupsub",!0),t.attributes.setInherited("movablelimits",!0))},t.prototype.markMrows=function(t){if(t.isKind("mrow")&&!t.isInferred&&t.childNodes.length>=2){var e=t.childNodes[0],r=t.childNodes[t.childNodes.length-1];e.isKind("mo")&&e.attributes.get("fence")&&r.isKind("mo")&&r.attributes.get("fence")&&(e.childNodes.length&&t.setProperty("open",e.getText()),r.childNodes.length&&t.setProperty("close",r.getText()))}},t.prototype.trimSpace=function(t){return t.replace(/[\t\n\r]/g," ").replace(/^ +/,"").replace(/ +$/,"").replace(/  +/g," ")},t.prototype.error=function(t){throw new Error(t)},t.OPTIONS={MmlFactory:null,fixMisplacedChildren:!0,verify:i({},o.AbstractMmlNode.verifyDefaults),translateEntities:!0},t}();e.MathMLCompile=l}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9tYXRoamF4LWZ1bGwvanMvaW5wdXQvbWF0aG1sL01hdGhNTENvbXBpbGUuanMiXSwibmFtZXMiOlsiX19hc3NpZ24iLCJ0aGlzIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsIl9fdmFsdWVzIiwibyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibSIsIm5leHQiLCJ2YWx1ZSIsImRvbmUiLCJUeXBlRXJyb3IiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJNYXRoTUxDb21waWxlIiwiTW1sTm9kZV9qc18xIiwiT3B0aW9uc19qc18xIiwiRW50aXRpZXMiLCJvcHRpb25zIiwiQ2xhc3MiLCJjb25zdHJ1Y3RvciIsInVzZXJPcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJPUFRJT05TIiwic2V0TW1sRmFjdG9yeSIsIm1tbEZhY3RvcnkiLCJmYWN0b3J5IiwiY29tcGlsZSIsIm5vZGUiLCJtbWwiLCJtYWtlTm9kZSIsInZlcmlmeVRyZWUiLCJzZXRJbmhlcml0ZWRBdHRyaWJ1dGVzIiwid2Fsa1RyZWUiLCJtYXJrTXJvd3MiLCJlXzEiLCJfYSIsImFkYXB0b3IiLCJsaW1pdHMiLCJraW5kIiwicmVwbGFjZSIsInRleENsYXNzIiwiZ2V0QXR0cmlidXRlIiwiZmlsdGVyQXR0cmlidXRlIiwidHlwZSIsIl9iIiwiZmlsdGVyQ2xhc3NMaXN0IiwiYWxsQ2xhc3NlcyIsIl9jIiwibmFtZV8xIiwibWF0Y2giLCJzdWJzdHIiLCJlXzFfMSIsImVycm9yIiwicmV0dXJuIiwiZ2V0Tm9kZUNsYXNzIiwiY3JlYXRlIiwidGV4QXRvbSIsIlRFWENMQVNTIiwic2V0UHJvcGVydHkiLCJhZGRBdHRyaWJ1dGVzIiwiY2hlY2tDbGFzcyIsImFkZENoaWxkcmVuIiwiZV8yIiwiaWdub3JlVmFyaWFudCIsImFsbEF0dHJpYnV0ZXMiLCJhdHRyIiwibmFtZV8yIiwibmFtZSIsImF0dHJpYnV0ZXMiLCJzZXQiLCJ2YWwiLCJ0b0xvd2VyQ2FzZSIsImVfMl8xIiwiX25hbWUiLCJsaXN0IiwiZV8zIiwiYXJpdHkiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJuYW1lXzMiLCJhZGRUZXh0IiwiaXNLaW5kIiwiYXBwZW5kQ2hpbGQiLCJzZXRYTUwiLCJjaGlsZE1tbCIsIm1FcnJvciIsImVfM18xIiwidGV4dCIsImlzVG9rZW4iLCJnZXRQcm9wZXJ0eSIsInRyYW5zbGF0ZSIsInRyaW1TcGFjZSIsInNldFRleHQiLCJlXzQiLCJjbGFzc0xpc3QiLCJuYW1lXzQiLCJmaXhDYWxsaWdyYXBoaWMiLCJwdXNoIiwiZV80XzEiLCJqb2luIiwidmFyaWFudCIsInNldEluaGVyaXRlZCIsImlzSW5mZXJyZWQiLCJmaXJzdCIsImxhc3QiLCJnZXQiLCJnZXRUZXh0IiwibWVzc2FnZSIsIkVycm9yIiwiTW1sRmFjdG9yeSIsImZpeE1pc3BsYWNlZENoaWxkcmVuIiwidmVyaWZ5IiwiQWJzdHJhY3RNbWxOb2RlIiwidmVyaWZ5RGVmYXVsdHMiLCJ0cmFuc2xhdGVFbnRpdGllcyJdLCJtYXBwaW5ncyI6IitQQUNBLElBQUlBLEVBQVlDLE1BQVFBLEtBQUtELFVBQWEsV0FTdEMsT0FSQUEsRUFBV0UsT0FBT0MsUUFBVSxTQUFTQyxHQUNqQyxJQUFLLElBQUlDLEVBQUdDLEVBQUksRUFBR0MsRUFBSUMsVUFBVUMsT0FBUUgsRUFBSUMsRUFBR0QsSUFFNUMsSUFBSyxJQUFJSSxLQURUTCxFQUFJRyxVQUFVRixHQUNPSixPQUFPUyxVQUFVQyxlQUFlQyxLQUFLUixFQUFHSyxLQUN6RE4sRUFBRU0sR0FBS0wsRUFBRUssSUFFakIsT0FBT04sSUFFS1UsTUFBTWIsS0FBTU8sWUFFNUJPLEVBQVlkLE1BQVFBLEtBQUtjLFVBQWEsU0FBU0MsR0FDL0MsSUFBSVgsRUFBc0IsbUJBQVhZLFFBQXlCQSxPQUFPQyxTQUFVQyxF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LFlBQWMxRSxFQUFJaUQsV0FBV2pGLFFBQVUsRUFBRyxDQUNyRSxJQUFJMkcsRUFBUTNFLEVBQUlpRCxXQUFXLEdBQ3ZCMkIsRUFBTzVFLEVBQUlpRCxXQUFXakQsRUFBSWlELFdBQVdqRixPQUFTLEdBQzlDMkcsRUFBTXRCLE9BQU8sT0FBU3NCLEVBQU1uQyxXQUFXcUMsSUFBSSxVQUMzQ0QsRUFBS3ZCLE9BQU8sT0FBU3VCLEVBQUtwQyxXQUFXcUMsSUFBSSxXQUNyQ0YsRUFBTTFCLFdBQVdqRixRQUNqQmdDLEVBQUk4QixZQUFZLE9BQVE2QyxFQUFNRyxXQUU5QkYsRUFBSzNCLFdBQVdqRixRQUNoQmdDLEVBQUk4QixZQUFZLFFBQVM4QyxFQUFLRSxjQUs5QzdGLEVBQWNmLFVBQVU2RixVQUFZLFNBQVVKLEdBQzFDLE9BQU9BLEVBQUtoRCxRQUFRLFlBQWEsS0FDNUJBLFFBQVEsTUFBTyxJQUNmQSxRQUFRLE1BQU8sSUFDZkEsUUFBUSxPQUFRLE1BRXpCMUIsRUFBY2YsVUFBVXNELE1BQVEsU0FBVXVELEdBQ3RDLE1BQU0sSUFBSUMsTUFBTUQsSUFFcEI5RixFQUFjUyxRQUFVLENBQ3BCdUYsV0FBWSxLQUNaQyxzQkFBc0IsRUFDdEJDLE9BQVE1SCxFQUFTLEdBQUkyQixFQUFha0csZ0JBQWdCQyxnQkFDbERDLG1CQUFtQixHQUVoQnJHLEVBcE9TLEdBc09wQkQsRUFBUUMsY0FBZ0JBIiwiZmlsZSI6ImQ3NWRlMWU5MTQ3MWJjNjNiZjlkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fdmFsdWVzID0gKHRoaXMgJiYgdGhpcy5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykge1xuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5NYXRoTUxDb21waWxlID0gdm9pZCAwO1xudmFyIE1tbE5vZGVfanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb3JlL01tbFRyZWUvTW1sTm9kZS5qc1wiKTtcbnZhciBPcHRpb25zX2pzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbC9PcHRpb25zLmpzXCIpO1xudmFyIEVudGl0aWVzID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvRW50aXRpZXMuanNcIik7XG52YXIgTWF0aE1MQ29tcGlsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWF0aE1MQ29tcGlsZShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBDbGFzcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9wdGlvbnNfanNfMS51c2VyT3B0aW9ucyhPcHRpb25zX2pzXzEuZGVmYXVsdE9wdGlvbnMoe30sIENsYXNzLk9QVElPTlMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgTWF0aE1MQ29tcGlsZS5wcm90b3R5cGUuc2V0TW1sRmFjdG9yeSA9IGZ1bmN0aW9uIChtbWxGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IG1tbEZhY3Rvcnk7XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIG1tbCA9IHRoaXMubWFrZU5vZGUobm9kZSk7XG4gICAgICAgIG1tbC52ZXJpZnlUcmVlKHRoaXMub3B0aW9uc1sndmVyaWZ5J10pO1xuICAgICAgICBtbWwuc2V0SW5oZXJpdGVkQXR0cmlidXRlcyh7fSwgZmFsc2UsIDAsIGZhbHNlKTtcbiAgICAgICAgbW1sLndhbGtUcmVlKHRoaXMubWFya01yb3dzKTtcbiAgICAgICAgcmV0dXJuIG1tbDtcbiAgICB9O1xuICAgIE1hdGhNTENvbXBpbGUucHJvdG90eXBlLm1ha2VOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgIHZhciBhZGFwdG9yID0gdGhpcy5hZGFwdG9yO1xuICAgICAgICB2YXIgbGltaXRzID0gZmFsc2U7XG4gICAgICAgIHZhciBraW5kID0gYWRhcHRvci5raW5kKG5vZGUpLnJlcGxhY2UoL14uKjovLCAnJyk7XG4gICAgICAgIHZhciB0ZXhDbGFzcyA9IGFkYXB0b3IuZ2V0QXR0cmlidXRlKG5vZGUsICdkYXRhLW1qeC10ZXhjbGFzcycpIHx8ICcnO1xuICAgICAgICBpZiAodGV4Q2xhc3MpIHtcbiAgICAgICAgICAgIHRleENsYXNzID0gdGhpcy5maWx0ZXJBdHRyaWJ1dGUoJ2RhdGEtbWp4LXRleGNsYXNzJywgdGV4Q2xhc3MpIHx8ICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gdGV4Q2xhc3MgJiYga2luZCA9PT0gJ21yb3cnID8gJ1RlWEF0b20nIDoga2luZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gX192YWx1ZXModGhpcy5maWx0ZXJDbGFzc0xpc3QoYWRhcHRvci5hbGxDbGFzc2VzKG5vZGUpKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZV8xID0gX2MudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWVfMS5tYXRjaCgvXk1KWC1UZVhBdG9tLS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleENsYXNzID0gbmFtZV8xLnN1YnN0cigxMik7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnVGVYQXRvbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWVfMSA9PT0gJ01KWC1maXhlZGxpbWl0cycpIHtcbiAgICAgICAgICAgICAgICAgICAgbGltaXRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhY3RvcnkuZ2V0Tm9kZUNsYXNzKHR5cGUpIHx8IHRoaXMuZXJyb3IoJ1Vua25vd24gbm9kZSB0eXBlIFwiJyArIHR5cGUgKyAnXCInKTtcbiAgICAgICAgdmFyIG1tbCA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodHlwZSk7XG4gICAgICAgIGlmICh0eXBlID09PSAnVGVYQXRvbScpIHtcbiAgICAgICAgICAgIHRoaXMudGV4QXRvbShtbWwsIHRleENsYXNzLCBsaW1pdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRleENsYXNzKSB7XG4gICAgICAgICAgICBtbWwudGV4Q2xhc3MgPSBNbWxOb2RlX2pzXzEuVEVYQ0xBU1NbdGV4Q2xhc3NdO1xuICAgICAgICAgICAgbW1sLnNldFByb3BlcnR5KCd0ZXhDbGFzcycsIG1tbC50ZXhDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGVzKG1tbCwgbm9kZSk7XG4gICAgICAgIHRoaXMuY2hlY2tDbGFzcyhtbWwsIG5vZGUpO1xuICAgICAgICB0aGlzLmFkZENoaWxkcmVuKG1tbCwgbm9kZSk7XG4gICAgICAgIHJldHVybiBtbWw7XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5hZGRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKG1tbCwgbm9kZSkge1xuICAgICAgICB2YXIgZV8yLCBfYTtcbiAgICAgICAgdmFyIGlnbm9yZVZhcmlhbnQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gX192YWx1ZXModGhpcy5hZGFwdG9yLmFsbEF0dHJpYnV0ZXMobm9kZSkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZV8yID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZmlsdGVyQXR0cmlidXRlKG5hbWVfMiwgYXR0ci52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5hbWVfMi5zdWJzdHIoMCwgOSkgPT09ICdkYXRhLW1qeC0nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lXzIgPT09ICdkYXRhLW1qeC1hbHRlcm5hdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtbWwuc2V0UHJvcGVydHkoJ3ZhcmlhbnRGb3JtJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZV8yID09PSAnZGF0YS1tangtdmFyaWFudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tbC5hdHRyaWJ1dGVzLnNldCgnbWF0aHZhcmlhbnQnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmVWYXJpYW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lXzIgIT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09ICd0cnVlJyB8fCB2YWwgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tbC5hdHRyaWJ1dGVzLnNldChuYW1lXzIsIHZhbCA9PT0gJ3RydWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaWdub3JlVmFyaWFudCB8fCBuYW1lXzIgIT09ICdtYXRodmFyaWFudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tbC5hdHRyaWJ1dGVzLnNldChuYW1lXzIsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzIpIHRocm93IGVfMi5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5maWx0ZXJBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoX25hbWUsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE1hdGhNTENvbXBpbGUucHJvdG90eXBlLmZpbHRlckNsYXNzTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgIH07XG4gICAgTWF0aE1MQ29tcGlsZS5wcm90b3R5cGUuYWRkQ2hpbGRyZW4gPSBmdW5jdGlvbiAobW1sLCBub2RlKSB7XG4gICAgICAgIHZhciBlXzMsIF9hO1xuICAgICAgICBpZiAobW1sLmFyaXR5ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFkYXB0b3IgPSB0aGlzLmFkYXB0b3I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKGFkYXB0b3IuY2hpbGROb2Rlcyhub2RlKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZV8zID0gYWRhcHRvci5raW5kKGNoaWxkKTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZV8zID09PSAnI2NvbW1lbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmFtZV8zID09PSAnI3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVGV4dChtbWwsIGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW1sLmlzS2luZCgnYW5ub3RhdGlvbi14bWwnKSkge1xuICAgICAgICAgICAgICAgICAgICBtbWwuYXBwZW5kQ2hpbGQodGhpcy5mYWN0b3J5LmNyZWF0ZSgnWE1MJykuc2V0WE1MKGNoaWxkLCBhZGFwdG9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRNbWwgPSBtbWwuYXBwZW5kQ2hpbGQodGhpcy5tYWtlTm9kZShjaGlsZCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRNbWwuYXJpdHkgPT09IDAgJiYgYWRhcHRvci5jaGlsZE5vZGVzKGNoaWxkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnNbJ2ZpeE1pc3BsYWNlZENoaWxkcmVuJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENoaWxkcmVuKG1tbCwgY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRNbWwubUVycm9yKCdUaGVyZSBzaG91bGQgbm90IGJlIGNoaWxkcmVuIGZvciAnICsgY2hpbGRNbWwua2luZCArICcgbm9kZXMnLCB0aGlzLm9wdGlvbnNbJ3ZlcmlmeSddLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8zXzEpIHsgZV8zID0geyBlcnJvcjogZV8zXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzMpIHRocm93IGVfMy5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5hZGRUZXh0ID0gZnVuY3Rpb24gKG1tbCwgY2hpbGQpIHtcbiAgICAgICAgdmFyIHRleHQgPSB0aGlzLmFkYXB0b3IudmFsdWUoY2hpbGQpO1xuICAgICAgICBpZiAoKG1tbC5pc1Rva2VuIHx8IG1tbC5nZXRQcm9wZXJ0eSgnaXNDaGFycycpKSAmJiBtbWwuYXJpdHkpIHtcbiAgICAgICAgICAgIGlmIChtbWwuaXNUb2tlbikge1xuICAgICAgICAgICAgICAgIHRleHQgPSBFbnRpdGllcy50cmFuc2xhdGUodGV4dCk7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMudHJpbVNwYWNlKHRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW1sLmFwcGVuZENoaWxkKHRoaXMuZmFjdG9yeS5jcmVhdGUoJ3RleHQnKS5zZXRUZXh0KHRleHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXh0Lm1hdGNoKC9cXFMvKSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvcignVW5leHBlY3RlZCB0ZXh0IG5vZGUgXCInICsgdGV4dCArICdcIicpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5jaGVja0NsYXNzID0gZnVuY3Rpb24gKG1tbCwgbm9kZSkge1xuICAgICAgICB2YXIgZV80LCBfYTtcbiAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLmZpbHRlckNsYXNzTGlzdCh0aGlzLmFkYXB0b3IuYWxsQ2xhc3Nlcyhub2RlKSkpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVfNCA9IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lXzQuc3Vic3RyKDAsIDQpID09PSAnTUpYLScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVfNCA9PT0gJ01KWC12YXJpYW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW1sLnNldFByb3BlcnR5KCd2YXJpYW50Rm9ybScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWVfNC5zdWJzdHIoMCwgMTEpICE9PSAnTUpYLVRlWEF0b20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtbWwuYXR0cmlidXRlcy5zZXQoJ21hdGh2YXJpYW50JywgdGhpcy5maXhDYWxsaWdyYXBoaWMobmFtZV80LnN1YnN0cigzKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc0xpc3QucHVzaChuYW1lXzQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV80XzEpIHsgZV80ID0geyBlcnJvcjogZV80XzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjbGFzc0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBtbWwuYXR0cmlidXRlcy5zZXQoJ2NsYXNzJywgY2xhc3NMaXN0LmpvaW4oJyAnKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1hdGhNTENvbXBpbGUucHJvdG90eXBlLmZpeENhbGxpZ3JhcGhpYyA9IGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICAgIHJldHVybiB2YXJpYW50LnJlcGxhY2UoL2NhbGlncmFwaGljLywgJ2NhbGxpZ3JhcGhpYycpO1xuICAgIH07XG4gICAgTWF0aE1MQ29tcGlsZS5wcm90b3R5cGUudGV4QXRvbSA9IGZ1bmN0aW9uIChtbWwsIHRleENsYXNzLCBsaW1pdHMpIHtcbiAgICAgICAgbW1sLnRleENsYXNzID0gTW1sTm9kZV9qc18xLlRFWENMQVNTW3RleENsYXNzXTtcbiAgICAgICAgbW1sLnNldFByb3BlcnR5KCd0ZXhDbGFzcycsIG1tbC50ZXhDbGFzcyk7XG4gICAgICAgIGlmICh0ZXhDbGFzcyA9PT0gJ09QJyAmJiAhbGltaXRzKSB7XG4gICAgICAgICAgICBtbWwuc2V0UHJvcGVydHkoJ21vdmVzdXBzdWInLCB0cnVlKTtcbiAgICAgICAgICAgIG1tbC5hdHRyaWJ1dGVzLnNldEluaGVyaXRlZCgnbW92YWJsZWxpbWl0cycsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLnByb3RvdHlwZS5tYXJrTXJvd3MgPSBmdW5jdGlvbiAobW1sKSB7XG4gICAgICAgIGlmIChtbWwuaXNLaW5kKCdtcm93JykgJiYgIW1tbC5pc0luZmVycmVkICYmIG1tbC5jaGlsZE5vZGVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSBtbWwuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgICAgIHZhciBsYXN0ID0gbW1sLmNoaWxkTm9kZXNbbW1sLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAoZmlyc3QuaXNLaW5kKCdtbycpICYmIGZpcnN0LmF0dHJpYnV0ZXMuZ2V0KCdmZW5jZScpICYmXG4gICAgICAgICAgICAgICAgbGFzdC5pc0tpbmQoJ21vJykgJiYgbGFzdC5hdHRyaWJ1dGVzLmdldCgnZmVuY2UnKSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtbWwuc2V0UHJvcGVydHkoJ29wZW4nLCBmaXJzdC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGFzdC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtbWwuc2V0UHJvcGVydHkoJ2Nsb3NlJywgbGFzdC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgTWF0aE1MQ29tcGlsZS5wcm90b3R5cGUudHJpbVNwYWNlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvW1xcdFxcblxccl0vZywgJyAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL14gKy8sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyArJC8sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyAgKy9nLCAnICcpO1xuICAgIH07XG4gICAgTWF0aE1MQ29tcGlsZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfTtcbiAgICBNYXRoTUxDb21waWxlLk9QVElPTlMgPSB7XG4gICAgICAgIE1tbEZhY3Rvcnk6IG51bGwsXG4gICAgICAgIGZpeE1pc3BsYWNlZENoaWxkcmVuOiB0cnVlLFxuICAgICAgICB2ZXJpZnk6IF9fYXNzaWduKHt9LCBNbWxOb2RlX2pzXzEuQWJzdHJhY3RNbWxOb2RlLnZlcmlmeURlZmF1bHRzKSxcbiAgICAgICAgdHJhbnNsYXRlRW50aXRpZXM6IHRydWVcbiAgICB9O1xuICAgIHJldHVybiBNYXRoTUxDb21waWxlO1xufSgpKTtcbmV4cG9ydHMuTWF0aE1MQ29tcGlsZSA9IE1hdGhNTENvbXBpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXRoTUxDb21waWxlLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=