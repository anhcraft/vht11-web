(self.webpackChunkvht11=self.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\@pixi\\mixin-cache-as-bitmap\\lib\\mixin-cache-as-bitmap.es"],{"./node_modules/@pixi/mixin-cache-as-bitmap/lib/mixin-cache-as-bitmap.es.js":(t,a,e)=>{"use strict";e.r(a),e.d(a,{CacheData:()=>l});var i=e("./node_modules/@pixi/core/lib/core.es.js"),s=e("./node_modules/@pixi/sprite/lib/sprite.es.js"),r=e("./node_modules/@pixi/display/lib/display.es.js"),n=e("./node_modules/@pixi/math/lib/math.es.js"),h=e("./node_modules/@pixi/utils/lib/utils.es.js"),o=e("./node_modules/@pixi/settings/lib/settings.es.js"),c=new n.Matrix;r.DisplayObject.prototype._cacheAsBitmap=!1,r.DisplayObject.prototype._cacheData=null;var l=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(r.DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var a;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new l),(a=this._cacheData).originalRender=this.render,a.originalRenderCanvas=this.renderCanvas,a.originalUpdateTransform=this.updateTransform,a.originalCalculateBounds=this.calculateBounds,a.originalGetLocalBounds=this.getLocalBounds,a.originalDestroy=this.destroy,a.originalContainsPoint=this.containsPoint,a.originalMask=this._mask,a.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((a=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=a.originalRender,this.renderCanvas=a.originalRenderCanvas,this.calculateBounds=a.originalCalculateBounds,this.getLocalBounds=a.originalGetLocalBounds,this.destroy=a.originalDestroy,this.updateTransform=a.originalUpdateTransform,this.containsPoint=a.originalContainsPoint,this._mask=a.originalMask,this.filterArea=a.originalFilterArea))}}}),r.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},r.DisplayObject.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var a=this.alpha;this.alpha=1,t.batch.flush();var e=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;e.pad(r)}e.ceil(o.settings.RESOLUTION);var n=t.renderTexture.current,l=t.renderTexture.sourceFrame.clone(),d=t.projection.transform,p=i.RenderTexture.create({width:e.width,height:e.height}),u="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=u,i.BaseTexture.addToCache(p.baseTexture,u),i.Texture.addToCache(p,u);var _=this.transform.localTransform.copyTo(c).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,t.render(this,p,!0,_,!1),t.projection.transform=d,t.renderTexture.bind(n,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var m=new s.Sprite(p);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-e.x/e.width,m.anchor.y=-e.y/e.height,m.alpha=a,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)}},r.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},r.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var a=this.getLocalBounds(null,!0),e=this.alpha;this.alpha=1;var r=t.context,n=t._projTransform;a.ceil(o.settings.RESOLUTION);var l=i.RenderTexture.create({width:a.width,height:a.height}),d="cacheAsBitmap_"+(0,h.uid)();this._cacheData.textureCacheId=d,i.BaseTexture.addToCache(l.baseTexture,d),i.Texture.addToCache(l,d);var p=c;this.transform.localTransform.copyTo(p),p.invert(),p.tx-=a.x,p.ty-=a.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,l,!0,p,!1),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new s.Sprite(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-a.x/a.width,u.anchor.y=-a.y/a.height,u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},r.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},r.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},r.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,i.BaseTexture.removeFromCache(this._cacheData.textureCacheId),i.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},r.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9AcGl4aS9taXhpbi1jYWNoZS1hcy1iaXRtYXAvbGliL21peGluLWNhY2hlLWFzLWJpdG1hcC5lcy5qcyJdLCJuYW1lcyI6WyJfdGVtcE1hdHJpeCIsIk1hdHJpeCIsIkRpc3BsYXlPYmplY3QiLCJDYWNoZURhdGEiLCJ0aGlzIiwidGV4dHVyZUNhY2hlSWQiLCJvcmlnaW5hbFJlbmRlciIsIm9yaWdpbmFsUmVuZGVyQ2FudmFzIiwib3JpZ2luYWxDYWxjdWxhdGVCb3VuZHMiLCJvcmlnaW5hbEdldExvY2FsQm91bmRzIiwib3JpZ2luYWxVcGRhdGVUcmFuc2Zvcm0iLCJvcmlnaW5hbERlc3Ryb3kiLCJvcmlnaW5hbE1hc2siLCJvcmlnaW5hbEZpbHRlckFyZWEiLCJvcmlnaW5hbENvbnRhaW5zUG9pbnQiLCJzcHJpdGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiY2FjaGVBc0JpdG1hcCIsImdldCIsIl9jYWNoZUFzQml0bWFwIiwic2V0IiwidmFsdWUiLCJkYXRhIiwiX2NhY2hlRGF0YSIsInJlbmRlciIsInJlbmRlckNhbnZhcyIsInVwZGF0ZVRyYW5zZm9ybSIsImNhbGN1bGF0ZUJvdW5kcyIsImdldExvY2FsQm91bmRzIiwiZGVzdHJveSIsImNvbnRhaW5zUG9pbnQiLCJfbWFzayIsImZpbHRlckFyZWEiLCJfcmVuZGVyQ2FjaGVkIiwiX3JlbmRlckNhY2hlZENhbnZhcyIsIl9jYWNoZUFzQml0bWFwRGVzdHJveSIsIl9kZXN0cm95Q2FjaGVkRGlzcGxheU9iamVjdCIsInJlbmRlcmVyIiwidmlzaWJsZSIsIndvcmxkQWxwaGEiLCJyZW5kZXJhYmxlIiwiX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0IiwidHJhbnNmb3JtIiwiX3dvcmxkSUQiLCJfcmVuZGVyIiwiY2FjaGVBbHBoYSIsImFscGhhIiwiYmF0Y2giLCJmbHVzaCIsImJvdW5kcyIsImNsb25lIiwiZmlsdGVycyIsInBhZGRpbmciLCJwYWQiLCJjZWlsIiwic2V0dGluZ3MiLCJjYWNoZWRSZW5kZXJUZXh0dXJlIiwicmVuZGVyVGV4dHVyZSIsImN1cnJlbnQiLCJjYWNoZWRTb3VyY2VGcmFtZSIsInNvdXJjZUZyYW1lIiwiY2FjaGVkUHJvamVjdGlvblRyYW5zZm9ybSIsInByb2plY3Rpb24iLCJSZW5kZXJUZXh0dXJlIiwid2lkdGgiLCJoZWlnaHQiLCJ1aWQiLCJCYXNlVGV4dHVyZSIsImJhc2VUZXh0dXJlIiwiVGV4dHVyZSIsIm0iLCJsb2NhbFRyYW5zZm9ybSIsImNvcHlUbyIsImludmVydCIsInRyYW5zbGF0ZSIsIngiLCJ5IiwiYmluZCIsImRpc3BsYXlPYmplY3RVcGRhdGVUcmFuc2Zvcm0iLCJfY2FsY3VsYXRlQ2FjaGVkQm91bmRzIiwiX2dldENhY2hlZExvY2FsQm91bmRzIiwiY2FjaGVkU3ByaXRlIiwiU3ByaXRlIiwid29ybGRUcmFuc2Zvcm0iLCJhbmNob3IiLCJfYm91bmRzIiwiX3BhcmVudElEIiwicGFyZW50IiwiZW5hYmxlVGVtcFBhcmVudCIsImRpc2FibGVUZW1wUGFyZW50IiwiX2luaXRDYWNoZWREaXNwbGF5T2JqZWN0Q2FudmFzIiwiX3JlbmRlckNhbnZhcyIsImNhY2hlZFJlbmRlclRhcmdldCIsImNvbnRleHQiLCJfcHJvalRyYW5zZm9ybSIsInR4IiwidHkiLCJfdGVtcERpc3BsYXlPYmplY3RQYXJlbnQiLCJjbGVhciIsIl9jYWxjdWxhdGVCb3VuZHMiLCJ1cGRhdGVJRCIsIl9ib3VuZHNJRCIsIl90ZXh0dXJlIiwib3B0aW9ucyJdLCJtYXBwaW5ncyI6IjRtQkFjSUEsRUFBYyxJQUFJLEVBQUFDLE9BQ3RCLEVBQUFDLGNBQUEsMEJBQXlDLEVBQ3pDLEVBQUFBLGNBQUEscUJBQXFDLEtBUXJDLElBQUlDLEVBQ0EsV0FDSUMsS0FBS0MsZUFBaUIsS0FDdEJELEtBQUtFLGVBQWlCLEtBQ3RCRixLQUFLRyxxQkFBdUIsS0FDNUJILEtBQUtJLHdCQUEwQixLQUMvQkosS0FBS0ssdUJBQXlCLEtBQzlCTCxLQUFLTSx3QkFBMEIsS0FDL0JOLEtBQUtPLGdCQUFrQixLQUN2QlAsS0FBS1EsYUFBZSxLQUNwQlIsS0FBS1MsbUJBQXFCLEtBQzFCVCxLQUFLVSxzQkFBd0IsS0FDN0JWLEtBQUtXLE9BQVMsTUFJdEJDLE9BQU9DLGlCQUFpQixFQUFBZixjQUFBLFVBQXlCLENBYTdDZ0IsY0FBZSxDQUNYQyxJQUFLLFdBQ0QsT0FBT2YsS0FBS2dCLGdCQUVoQkMsSUFBSyxTQUFVQyxHQUtYLElBQUlDLEVBSkFuQixLQUFLZ0IsaUJBQW1CRSxJQUc1QmxCLEtBQUtnQixlQUFpQkUsRUFFbEJBLEdBQ0tsQixLQUFLb0IsYUFDTnBCLEtBQUtvQixXQUFhLElBQUlyQixJQUUxQm9CLEVBQU9uQixLQUFLb0IsWUFDUGxCLGVBQWlCRixLQUFLcUIsT0FDM0JGLEVBQUtoQixxQkFBdUJILEtBQUtzQixhQUNqQ0gsRUFBS2Isd0JBQTBCTixLQUFLdUIsZ0JBQ3BDSixFQUFLZix3QkFBMEJKLEtBQUt3QixnQkFDcENMLEVBQUtkLHVCQUF5QkwsS0FBS3lCLGVBQ25DTixFQUFLWixnQkFBa0JQLEtBQUswQixRQUM1QlAsRUFBS1Qsc0JBQXdCVixLQUFLMkIsY0FDbENSLEVBQUtYLGFBQWVSLEtBQUs0QixNQUN6QlQsRUFBS1YsbUJBQXFCVCxLQUFLNkIsV0FDL0I3QixLQUFLcUIsT0FBU3JCLEtBQUs4QixjQUNuQjlCLEtBQUtzQixhQUFldEIsS0FBSytCLG9CQUN6Qi9CLEtBQUswQixRQUFVMUIsS0FBS2dDLHlCQUdwQmIsRUFBT25CLEtBQUtvQixZQUNIVCxRQUNMWCxLQUFLaUMsOEJBRVRqQyxLQUFLcUIsT0FBU0YsRUFBS2pCLGVBQ25CRixLQUFLc0IsYUFBZUgsRUFBS2hCLHFCQUN6QkgsS0FBS3dCLGdCQUFrQkwsRUFBS2Ysd0JBQzVCSixLQUFLeUIsZUFBaUJOLEVBQUtkLHVCQUMzQkwsS0FBSzBCLFFBQVVQLEVBQUtaLGdCQUNwQlAsS0FBS3VCLGdCQUFrQkosRUFBS2Isd0JBQzVCTixLQUFLMkIsY0FBZ0JSLEVBQUtULHNCQUMxQlYsS0FBSzRCLE1BQVFULEVBQUtYLGFBQ2xCUixLQUFLNkIsV0FBYVYsRUFBS1YseUJBYXZDLEVBQUFYLGNBQUEsd0JBQXdDLFNBQXVCb0MsSUFDdERsQyxLQUFLbUMsU0FBV25DLEtBQUtvQyxZQUFjLElBQU1wQyxLQUFLcUMsYUFHbkRyQyxLQUFLc0MseUJBQXlCSixHQUM5QmxDLEtBQUtvQixXQUFXVCxPQUFPNEIsVUFBVUMsU0FBV3hDLEtBQUt1QyxVQUFVQyxTQUMzRHhDLEtBQUtvQixXQUFXVCxPQUFPeUIsV0FBYXBDLEtBQUtvQyxXQUN6Q3BDLEtBQUtvQixXQUFXVCxPQUFPOEIsUUFBUVAsS0FVbkMsRUFBQXBDLGNBQUEsbUNBQW1ELFNBQWtDb0MsR0FDakYsSUFBSWxDLEtBQUtvQixhQUFjcEIsS0FBS29CLFdBQVdULE9BQXZDLENBSUEsSUFBSStCLEVBQWExQyxLQUFLMkMsTUFDdEIzQyxLQUFLMkMsTUFBUSxFQUViVCxFQUFTVSxNQUFNQyxRQU1mLElBQUlDLEVBQVM5QyxLQUFLeUIsZUFBZSxNQUFNLEdBQU1zQixRQUU3QyxHQUFJL0MsS0FBS2dELFFBQVMsQ0FDZCxJQUFJQyxFQUFVakQsS0FBS2dELFFBQVEsR0FBR0MsUUFDOUJILEVBQU9JLElBQUlELEdBRWZILEVBQU9LLEtBQUssRUFBQUMsU0FBQSxZQUdaLElBQUlDLEVBQXNCbkIsRUFBU29CLGNBQWNDLFFBQzdDQyxFQUFvQnRCLEVBQVNvQixjQUFjRyxZQUFZVixRQUN2RFcsRUFBNEJ4QixFQUFTeUIsV0FBV3BCLFVBSWhEZSxFQUFnQixFQUFBTSxjQUFBLE9BQXFCLENBQUVDLE1BQU9mLEVBQU9lLE1BQU9DLE9BQVFoQixFQUFPZ0IsU0FDM0U3RCxFQUFpQixrQkFBbUIsSUFBQThELE9BQ3hDL0QsS0FBS29CLFdBQVduQixlQUFpQkEsRUFDakMsRUFBQStELFlBQUEsV0FBdUJWLEVBQWNXLFlBQWFoRSxHQUNsRCxFQUFBaUUsUUFBQSxXQUFtQlosRUFBZXJELEdBRWxDLElBQUlrRSxFQUFJbkUsS0FBS3VDLFVBQVU2QixlQUFlQyxPQUFPekUsR0FBYTBFLFNBQVNDLFdBQVd6QixFQUFPMEIsR0FBSTFCLEVBQU8yQixHQUVoR3pFLEtBQUtxQixPQUFTckIsS0FBS29CLFdBQVdsQixlQUM5QmdDLEVBQVNiLE9BQU9yQixLQUFNc0QsR0FBZSxFQUFNYSxHQUFHLEdBRTlDakMsRUFBU3lCLFdBQVdwQixVQUFZbUIsRUFDaEN4QixFQUFTb0IsY0FBY29CLEtBQUtyQixFQUFxQkcsR0FFakR4RCxLQUFLcUIsT0FBU3JCLEtBQUs4QixjQUVuQjlCLEtBQUt1QixnQkFBa0J2QixLQUFLMkUsNkJBQzVCM0UsS0FBS3dCLGdCQUFrQnhCLEtBQUs0RSx1QkFDNUI1RSxLQUFLeUIsZUFBaUJ6QixLQUFLNkUsc0JBQzNCN0UsS0FBSzRCLE1BQVEsS0FDYjVCLEtBQUs2QixXQUFhLEtBRWxCLElBQUlpRCxFQUFlLElBQUksRUFBQUMsT0FBT3pCLEdBQzlCd0IsRUFBYXZDLFVBQVV5QyxlQUFpQmhGLEtBQUt1QyxVQUFVeUMsZUFDdkRGLEVBQWFHLE9BQU9ULEdBQU0xQixFQUFPMEIsRUFBSTFCLEVBQU9lLE1BQzVDaUIsRUFBYUcsT0FBT1IsR0FBTTNCLEVBQU8yQixFQUFJM0IsRUFBT2dCLE9BQzVDZ0IsRUFBYW5DLE1BQVFELEVBQ3JCb0MsRUFBYUksUUFBVWxGLEtBQUtrRixRQUM1QmxGLEtBQUtvQixXQUFXVCxPQUFTbUUsRUFDekI5RSxLQUFLdUMsVUFBVTRDLFdBQWEsRUFFdkJuRixLQUFLb0YsT0FNTnBGLEtBQUt1QixtQkFMTHZCLEtBQUtxRixtQkFDTHJGLEtBQUt1QixrQkFDTHZCLEtBQUtzRixrQkFBa0IsT0FNM0J0RixLQUFLMkIsY0FBZ0JtRCxFQUFhbkQsY0FBYytDLEtBQUtJLEtBVXpELEVBQUFoRixjQUFBLDhCQUE4QyxTQUE2Qm9DLElBQ2xFbEMsS0FBS21DLFNBQVduQyxLQUFLb0MsWUFBYyxJQUFNcEMsS0FBS3FDLGFBR25EckMsS0FBS3VGLCtCQUErQnJELEdBQ3BDbEMsS0FBS29CLFdBQVdULE9BQU95QixXQUFhcEMsS0FBS29DLFdBQ3pDcEMsS0FBS29CLFdBQVdULE9BQU82RSxjQUFjdEQsS0FXekMsRUFBQXBDLGNBQUEseUNBQXlELFNBQXdDb0MsR0FDN0YsSUFBSWxDLEtBQUtvQixhQUFjcEIsS0FBS29CLFdBQVdULE9BQXZDLENBSUEsSUFBSW1DLEVBQVM5QyxLQUFLeUIsZUFBZSxNQUFNLEdBQ25DaUIsRUFBYTFDLEtBQUsyQyxNQUN0QjNDLEtBQUsyQyxNQUFRLEVBQ2IsSUFBSThDLEVBQXFCdkQsRUFBU3dELFFBQzlCaEMsRUFBNEJ4QixFQUFTeUQsZUFDekM3QyxFQUFPSyxLQUFLLEVBQUFDLFNBQUEsWUFDWixJQUFJRSxFQUFnQixFQUFBTSxjQUFBLE9BQXFCLENBQUVDLE1BQU9mLEVBQU9lLE1BQU9DLE9BQVFoQixFQUFPZ0IsU0FDM0U3RCxFQUFpQixrQkFBbUIsSUFBQThELE9BQ3hDL0QsS0FBS29CLFdBQVduQixlQUFpQkEsRUFDakMsRUFBQStELFlBQUEsV0FBdUJWLEVBQWNXLFlBQWFoRSxHQUNsRCxFQUFBaUUsUUFBQSxXQUFtQlosRUFBZXJELEdBRWxDLElBQUlrRSxFQUFJdkUsRUFDUkksS0FBS3VDLFVBQVU2QixlQUFlQyxPQUFPRixHQUNyQ0EsRUFBRUcsU0FDRkgsRUFBRXlCLElBQU05QyxFQUFPMEIsRUFDZkwsRUFBRTBCLElBQU0vQyxFQUFPMkIsRUFHZnpFLEtBQUtzQixhQUFldEIsS0FBS29CLFdBQVdqQixxQkFDcEMrQixFQUFTYixPQUFPckIsS0FBTXNELEdBQWUsRUFBTWEsR0FBRyxHQUU5Q2pDLEVBQVN3RCxRQUFVRCxFQUNuQnZELEVBQVN5RCxlQUFpQmpDLEVBQzFCMUQsS0FBS3NCLGFBQWV0QixLQUFLK0Isb0JBRXpCL0IsS0FBS3VCLGdCQUFrQnZCLEtBQUsyRSw2QkFDNUIzRSxLQUFLd0IsZ0JBQWtCeEIsS0FBSzRFLHVCQUM1QjVFLEtBQUt5QixlQUFpQnpCLEtBQUs2RSxzQkFDM0I3RSxLQUFLNEIsTUFBUSxLQUNiNUIsS0FBSzZCLFdBQWEsS0FFbEIsSUFBSWlELEVBQWUsSUFBSSxFQUFBQyxPQUFPekIsR0FDOUJ3QixFQUFhdkMsVUFBVXlDLGVBQWlCaEYsS0FBS3VDLFVBQVV5QyxlQUN2REYsRUFBYUcsT0FBT1QsR0FBTTFCLEVBQU8wQixFQUFJMUIsRUFBT2UsTUFDNUNpQixFQUFhRyxPQUFPUixHQUFNM0IsRUFBTzJCLEVBQUkzQixFQUFPZ0IsT0FDNUNnQixFQUFhbkMsTUFBUUQsRUFDckJvQyxFQUFhSSxRQUFVbEYsS0FBS2tGLFFBQzVCbEYsS0FBS29CLFdBQVdULE9BQVNtRSxFQUN6QjlFLEtBQUt1QyxVQUFVNEMsV0FBYSxFQUV2Qm5GLEtBQUtvRixPQU1OcEYsS0FBS3VCLG1CQUxMdkIsS0FBS29GLE9BQVNsRCxFQUFTNEQseUJBQ3ZCOUYsS0FBS3VCLGtCQUNMdkIsS0FBS29GLE9BQVMsTUFNbEJwRixLQUFLMkIsY0FBZ0JtRCxFQUFhbkQsY0FBYytDLEtBQUtJLEtBT3pELEVBQUFoRixjQUFBLGlDQUFpRCxXQUM3Q0UsS0FBS2tGLFFBQVFhLFFBQ2IvRixLQUFLb0IsV0FBV1QsT0FBTzRCLFVBQVVDLFNBQVd4QyxLQUFLdUMsVUFBVUMsU0FDM0R4QyxLQUFLb0IsV0FBV1QsT0FBT3FGLG1CQUN2QmhHLEtBQUtrRixRQUFRZSxTQUFXakcsS0FBS2tHLFdBUWpDLEVBQUFwRyxjQUFBLGdDQUFnRCxXQUM1QyxPQUFPRSxLQUFLb0IsV0FBV1QsT0FBT2MsZUFBZSxPQU9qRCxFQUFBM0IsY0FBQSxzQ0FBc0QsV0FDbERFLEtBQUtvQixXQUFXVCxPQUFPd0YsU0FBU3pFLFNBQVEsR0FDeEMxQixLQUFLb0IsV0FBV1QsT0FBUyxLQUN6QixFQUFBcUQsWUFBQSxnQkFBNEJoRSxLQUFLb0IsV0FBV25CLGdCQUM1QyxFQUFBaUUsUUFBQSxnQkFBd0JsRSxLQUFLb0IsV0FBV25CLGdCQUN4Q0QsS0FBS29CLFdBQVduQixlQUFpQixNQVVyQyxFQUFBSCxjQUFBLGdDQUFnRCxTQUErQnNHLEdBQzNFcEcsS0FBS2MsZUFBZ0IsRUFDckJkLEtBQUswQixRQUFRMEUiLCJmaWxlIjoiM2VlMzk1ZThiMDA2MGY3OGI4OGEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBwaXhpL21peGluLWNhY2hlLWFzLWJpdG1hcCAtIHY1LjMuN1xuICogQ29tcGlsZWQgVHVlLCAyOSBEZWMgMjAyMCAxOTozMDoxMSBVVENcbiAqXG4gKiBAcGl4aS9taXhpbi1jYWNoZS1hcy1iaXRtYXAgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICovXG5pbXBvcnQgeyBSZW5kZXJUZXh0dXJlLCBCYXNlVGV4dHVyZSwgVGV4dHVyZSB9IGZyb20gJ0BwaXhpL2NvcmUnO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnQHBpeGkvc3ByaXRlJztcbmltcG9ydCB7IERpc3BsYXlPYmplY3QgfSBmcm9tICdAcGl4aS9kaXNwbGF5JztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJ0BwaXhpL21hdGgnO1xuaW1wb3J0IHsgdWlkIH0gZnJvbSAnQHBpeGkvdXRpbHMnO1xuaW1wb3J0IHsgc2V0dGluZ3MgfSBmcm9tICdAcGl4aS9zZXR0aW5ncyc7XG5cbnZhciBfdGVtcE1hdHJpeCA9IG5ldyBNYXRyaXgoKTtcbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLl9jYWNoZUFzQml0bWFwID0gZmFsc2U7XG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5fY2FjaGVEYXRhID0gbnVsbDtcbi8vIGZpZ3VyZWQgdGhlcmUncyBubyBwb2ludCBhZGRpbmcgQUxMIHRoZSBleHRyYSB2YXJpYWJsZXMgdG8gcHJvdG90eXBlLlxuLy8gdGhpcyBtb2RlbCBjYW4gaG9sZCB0aGUgaW5mb3JtYXRpb24gbmVlZGVkLiBUaGlzIGNhbiBhbHNvIGJlIGdlbmVyYXRlZCBvbiBkZW1hbmQgYXNcbi8vIG1vc3Qgb2JqZWN0cyBhcmUgbm90IGNhY2hlZCBhcyBiaXRtYXBzLlxuLyoqXG4gKiBAY2xhc3NcbiAqIEBpZ25vcmVcbiAqL1xudmFyIENhY2hlRGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWNoZURhdGEoKSB7XG4gICAgICAgIHRoaXMudGV4dHVyZUNhY2hlSWQgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsUmVuZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFJlbmRlckNhbnZhcyA9IG51bGw7XG4gICAgICAgIHRoaXMub3JpZ2luYWxDYWxjdWxhdGVCb3VuZHMgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsR2V0TG9jYWxCb3VuZHMgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsVXBkYXRlVHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbERlc3Ryb3kgPSBudWxsO1xuICAgICAgICB0aGlzLm9yaWdpbmFsTWFzayA9IG51bGw7XG4gICAgICAgIHRoaXMub3JpZ2luYWxGaWx0ZXJBcmVhID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbENvbnRhaW5zUG9pbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnNwcml0ZSA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBDYWNoZURhdGE7XG59KCkpO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRGlzcGxheU9iamVjdC5wcm90b3R5cGUsIHtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhpcyB0byB0cnVlIGlmIHlvdSB3YW50IHRoaXMgZGlzcGxheSBvYmplY3QgdG8gYmUgY2FjaGVkIGFzIGEgYml0bWFwLlxuICAgICAqIFRoaXMgYmFzaWNhbGx5IHRha2VzIGEgc25hcCBzaG90IG9mIHRoZSBkaXNwbGF5IG9iamVjdCBhcyBpdCBpcyBhdCB0aGF0IG1vbWVudC4gSXQgY2FuXG4gICAgICogcHJvdmlkZSBhIHBlcmZvcm1hbmNlIGJlbmVmaXQgZm9yIGNvbXBsZXggc3RhdGljIGRpc3BsYXlPYmplY3RzLlxuICAgICAqIFRvIHJlbW92ZSBzaW1wbHkgc2V0IHRoaXMgcHJvcGVydHkgdG8gYGZhbHNlYFxuICAgICAqXG4gICAgICogSU1QT1JUQU5UIEdPVENIQSAtIE1ha2Ugc3VyZSB0aGF0IGFsbCB5b3VyIHRleHR1cmVzIGFyZSBwcmVsb2FkZWQgQkVGT1JFIHNldHRpbmcgdGhpcyBwcm9wZXJ0eSB0byB0cnVlXG4gICAgICogYXMgaXQgd2lsbCB0YWtlIGEgc25hcHNob3Qgb2Ygd2hhdCBpcyBjdXJyZW50bHkgdGhlcmUuIElmIHRoZSB0ZXh0dXJlcyBoYXZlIG5vdCBsb2FkZWQgdGhlbiB0aGV5IHdpbGwgbm90IGFwcGVhci5cbiAgICAgKlxuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFBJWEkuRGlzcGxheU9iamVjdCNcbiAgICAgKi9cbiAgICBjYWNoZUFzQml0bWFwOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlQXNCaXRtYXA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2FjaGVBc0JpdG1hcCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jYWNoZUFzQml0bWFwID0gdmFsdWU7XG4gICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2FjaGVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlRGF0YSA9IG5ldyBDYWNoZURhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2NhY2hlRGF0YTtcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsUmVuZGVyID0gdGhpcy5yZW5kZXI7XG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbFJlbmRlckNhbnZhcyA9IHRoaXMucmVuZGVyQ2FudmFzO1xuICAgICAgICAgICAgICAgIGRhdGEub3JpZ2luYWxVcGRhdGVUcmFuc2Zvcm0gPSB0aGlzLnVwZGF0ZVRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsQ2FsY3VsYXRlQm91bmRzID0gdGhpcy5jYWxjdWxhdGVCb3VuZHM7XG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbEdldExvY2FsQm91bmRzID0gdGhpcy5nZXRMb2NhbEJvdW5kcztcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsRGVzdHJveSA9IHRoaXMuZGVzdHJveTtcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsQ29udGFpbnNQb2ludCA9IHRoaXMuY29udGFpbnNQb2ludDtcbiAgICAgICAgICAgICAgICBkYXRhLm9yaWdpbmFsTWFzayA9IHRoaXMuX21hc2s7XG4gICAgICAgICAgICAgICAgZGF0YS5vcmlnaW5hbEZpbHRlckFyZWEgPSB0aGlzLmZpbHRlckFyZWE7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIgPSB0aGlzLl9yZW5kZXJDYWNoZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYW52YXMgPSB0aGlzLl9yZW5kZXJDYWNoZWRDYW52YXM7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95ID0gdGhpcy5fY2FjaGVBc0JpdG1hcERlc3Ryb3k7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5fY2FjaGVEYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnNwcml0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZXN0cm95Q2FjaGVkRGlzcGxheU9iamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlciA9IGRhdGEub3JpZ2luYWxSZW5kZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYW52YXMgPSBkYXRhLm9yaWdpbmFsUmVuZGVyQ2FudmFzO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzID0gZGF0YS5vcmlnaW5hbENhbGN1bGF0ZUJvdW5kcztcbiAgICAgICAgICAgICAgICB0aGlzLmdldExvY2FsQm91bmRzID0gZGF0YS5vcmlnaW5hbEdldExvY2FsQm91bmRzO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSA9IGRhdGEub3JpZ2luYWxEZXN0cm95O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtID0gZGF0YS5vcmlnaW5hbFVwZGF0ZVRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5zUG9pbnQgPSBkYXRhLm9yaWdpbmFsQ29udGFpbnNQb2ludDtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXNrID0gZGF0YS5vcmlnaW5hbE1hc2s7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJBcmVhID0gZGF0YS5vcmlnaW5hbEZpbHRlckFyZWE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSxcbn0pO1xuLyoqXG4gKiBSZW5kZXJzIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlIHNwcml0ZSB3aXRoIFdlYkdMXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfcmVuZGVyQ2FjaGVkXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLlJlbmRlcmVyfSByZW5kZXJlciAtIHRoZSBXZWJHTCByZW5kZXJlclxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5fcmVuZGVyQ2FjaGVkID0gZnVuY3Rpb24gX3JlbmRlckNhY2hlZChyZW5kZXJlcikge1xuICAgIGlmICghdGhpcy52aXNpYmxlIHx8IHRoaXMud29ybGRBbHBoYSA8PSAwIHx8ICF0aGlzLnJlbmRlcmFibGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pbml0Q2FjaGVkRGlzcGxheU9iamVjdChyZW5kZXJlcik7XG4gICAgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS50cmFuc2Zvcm0uX3dvcmxkSUQgPSB0aGlzLnRyYW5zZm9ybS5fd29ybGRJRDtcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLndvcmxkQWxwaGEgPSB0aGlzLndvcmxkQWxwaGE7XG4gICAgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS5fcmVuZGVyKHJlbmRlcmVyKTtcbn07XG4vKipcbiAqIFByZXBhcmVzIHRoZSBXZWJHTCByZW5kZXJlciB0byBjYWNoZSB0aGUgc3ByaXRlXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfaW5pdENhY2hlZERpc3BsYXlPYmplY3RcbiAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gKiBAcGFyYW0ge1BJWEkuUmVuZGVyZXJ9IHJlbmRlcmVyIC0gdGhlIFdlYkdMIHJlbmRlcmVyXG4gKi9cbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLl9pbml0Q2FjaGVkRGlzcGxheU9iamVjdCA9IGZ1bmN0aW9uIF9pbml0Q2FjaGVkRGlzcGxheU9iamVjdChyZW5kZXJlcikge1xuICAgIGlmICh0aGlzLl9jYWNoZURhdGEgJiYgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSBhbHBoYSBpcyBzZXQgdG8gMSBvdGhlcndpc2UgaXQgd2lsbCBnZXQgcmVuZGVyZWQgYXMgaW52aXNpYmxlIVxuICAgIHZhciBjYWNoZUFscGhhID0gdGhpcy5hbHBoYTtcbiAgICB0aGlzLmFscGhhID0gMTtcbiAgICAvLyBmaXJzdCB3ZSBmbHVzaCBhbnl0aGluZyBsZWZ0IGluIHRoZSByZW5kZXJlciAob3RoZXJ3aXNlIGl0IHdvdWxkIGdldCByZW5kZXJlZCB0byB0aGUgY2FjaGVkIHRleHR1cmUpXG4gICAgcmVuZGVyZXIuYmF0Y2guZmx1c2goKTtcbiAgICAvLyB0aGlzLmZpbHRlcnM9IFtdO1xuICAgIC8vIG5leHQgd2UgZmluZCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdW50cmFuc2Zvcm1lZCBvYmplY3RcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGFsc28gY2FsbHMgdXBkYXRldHJhbnNmb3JtIG9uIGFsbCBpdHMgY2hpbGRyZW4gYXMgcGFydCBvZiB0aGUgbWVhc3VyaW5nLlxuICAgIC8vIFRoaXMgbWVhbnMgd2UgZG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIHRyYW5zZm9ybSBhZ2FpbiBpbiB0aGlzIGZ1bmN0aW9uXG4gICAgLy8gVE9ETyBwYXNzIGFuIG9iamVjdCB0byBjbG9uZSB0b28/IHNhdmVzIGhhdmluZyB0byBjcmVhdGUgYSBuZXcgb25lIGVhY2ggdGltZSFcbiAgICB2YXIgYm91bmRzID0gdGhpcy5nZXRMb2NhbEJvdW5kcyhudWxsLCB0cnVlKS5jbG9uZSgpO1xuICAgIC8vIGFkZCBzb21lIHBhZGRpbmchXG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMuZmlsdGVyc1swXS5wYWRkaW5nO1xuICAgICAgICBib3VuZHMucGFkKHBhZGRpbmcpO1xuICAgIH1cbiAgICBib3VuZHMuY2VpbChzZXR0aW5ncy5SRVNPTFVUSU9OKTtcbiAgICAvLyBmb3Igbm93IHdlIGNhY2hlIHRoZSBjdXJyZW50IHJlbmRlclRhcmdldCB0aGF0IHRoZSBXZWJHTCByZW5kZXJlciBpcyBjdXJyZW50bHkgdXNpbmcuXG4gICAgLy8gdGhpcyBjb3VsZCBiZSBtb3JlIGVsZWdhbnQuLlxuICAgIHZhciBjYWNoZWRSZW5kZXJUZXh0dXJlID0gcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5jdXJyZW50O1xuICAgIHZhciBjYWNoZWRTb3VyY2VGcmFtZSA9IHJlbmRlcmVyLnJlbmRlclRleHR1cmUuc291cmNlRnJhbWUuY2xvbmUoKTtcbiAgICB2YXIgY2FjaGVkUHJvamVjdGlvblRyYW5zZm9ybSA9IHJlbmRlcmVyLnByb2plY3Rpb24udHJhbnNmb3JtO1xuICAgIC8vIFdlIGFsc28gc3RvcmUgdGhlIGZpbHRlciBzdGFjayAtIEkgd2lsbCBkZWZpbml0ZWx5IGxvb2sgdG8gY2hhbmdlIGhvdyB0aGlzIHdvcmtzIGEgbGl0dGxlIGxhdGVyIGRvd24gdGhlIGxpbmUuXG4gICAgLy8gY29uc3Qgc3RhY2sgPSByZW5kZXJlci5maWx0ZXJNYW5hZ2VyLmZpbHRlclN0YWNrO1xuICAgIC8vIHRoaXMgcmVuZGVyVGV4dHVyZSB3aWxsIGJlIHVzZWQgdG8gc3RvcmUgdGhlIGNhY2hlZCBEaXNwbGF5T2JqZWN0XG4gICAgdmFyIHJlbmRlclRleHR1cmUgPSBSZW5kZXJUZXh0dXJlLmNyZWF0ZSh7IHdpZHRoOiBib3VuZHMud2lkdGgsIGhlaWdodDogYm91bmRzLmhlaWdodCB9KTtcbiAgICB2YXIgdGV4dHVyZUNhY2hlSWQgPSBcImNhY2hlQXNCaXRtYXBfXCIgKyB1aWQoKTtcbiAgICB0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQgPSB0ZXh0dXJlQ2FjaGVJZDtcbiAgICBCYXNlVGV4dHVyZS5hZGRUb0NhY2hlKHJlbmRlclRleHR1cmUuYmFzZVRleHR1cmUsIHRleHR1cmVDYWNoZUlkKTtcbiAgICBUZXh0dXJlLmFkZFRvQ2FjaGUocmVuZGVyVGV4dHVyZSwgdGV4dHVyZUNhY2hlSWQpO1xuICAgIC8vIG5lZWQgdG8gc2V0IC8vXG4gICAgdmFyIG0gPSB0aGlzLnRyYW5zZm9ybS5sb2NhbFRyYW5zZm9ybS5jb3B5VG8oX3RlbXBNYXRyaXgpLmludmVydCgpLnRyYW5zbGF0ZSgtYm91bmRzLngsIC1ib3VuZHMueSk7XG4gICAgLy8gc2V0IGFsbCBwcm9wZXJ0aWVzIHRvIHRoZXJlIG9yaWdpbmFsIHNvIHdlIGNhbiByZW5kZXIgdG8gYSB0ZXh0dXJlXG4gICAgdGhpcy5yZW5kZXIgPSB0aGlzLl9jYWNoZURhdGEub3JpZ2luYWxSZW5kZXI7XG4gICAgcmVuZGVyZXIucmVuZGVyKHRoaXMsIHJlbmRlclRleHR1cmUsIHRydWUsIG0sIGZhbHNlKTtcbiAgICAvLyBub3cgcmVzdG9yZSB0aGUgc3RhdGUgYmUgc2V0dGluZyB0aGUgbmV3IHByb3BlcnRpZXNcbiAgICByZW5kZXJlci5wcm9qZWN0aW9uLnRyYW5zZm9ybSA9IGNhY2hlZFByb2plY3Rpb25UcmFuc2Zvcm07XG4gICAgcmVuZGVyZXIucmVuZGVyVGV4dHVyZS5iaW5kKGNhY2hlZFJlbmRlclRleHR1cmUsIGNhY2hlZFNvdXJjZUZyYW1lKTtcbiAgICAvLyByZW5kZXJlci5maWx0ZXJNYW5hZ2VyLmZpbHRlclN0YWNrID0gc3RhY2s7XG4gICAgdGhpcy5yZW5kZXIgPSB0aGlzLl9yZW5kZXJDYWNoZWQ7XG4gICAgLy8gdGhlIHJlc3QgaXMgdGhlIHNhbWUgYXMgZm9yIENhbnZhc1xuICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtID0gdGhpcy5kaXNwbGF5T2JqZWN0VXBkYXRlVHJhbnNmb3JtO1xuICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzID0gdGhpcy5fY2FsY3VsYXRlQ2FjaGVkQm91bmRzO1xuICAgIHRoaXMuZ2V0TG9jYWxCb3VuZHMgPSB0aGlzLl9nZXRDYWNoZWRMb2NhbEJvdW5kcztcbiAgICB0aGlzLl9tYXNrID0gbnVsbDtcbiAgICB0aGlzLmZpbHRlckFyZWEgPSBudWxsO1xuICAgIC8vIGNyZWF0ZSBvdXIgY2FjaGVkIHNwcml0ZVxuICAgIHZhciBjYWNoZWRTcHJpdGUgPSBuZXcgU3ByaXRlKHJlbmRlclRleHR1cmUpO1xuICAgIGNhY2hlZFNwcml0ZS50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybTtcbiAgICBjYWNoZWRTcHJpdGUuYW5jaG9yLnggPSAtKGJvdW5kcy54IC8gYm91bmRzLndpZHRoKTtcbiAgICBjYWNoZWRTcHJpdGUuYW5jaG9yLnkgPSAtKGJvdW5kcy55IC8gYm91bmRzLmhlaWdodCk7XG4gICAgY2FjaGVkU3ByaXRlLmFscGhhID0gY2FjaGVBbHBoYTtcbiAgICBjYWNoZWRTcHJpdGUuX2JvdW5kcyA9IHRoaXMuX2JvdW5kcztcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlID0gY2FjaGVkU3ByaXRlO1xuICAgIHRoaXMudHJhbnNmb3JtLl9wYXJlbnRJRCA9IC0xO1xuICAgIC8vIHJlc3RvcmUgdGhlIHRyYW5zZm9ybSBvZiB0aGUgY2FjaGVkIHNwcml0ZSB0byBhdm9pZCB0aGUgbmFzdHkgZmxpY2tlci4uXG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgICB0aGlzLmVuYWJsZVRlbXBQYXJlbnQoKTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlVGVtcFBhcmVudChudWxsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIC8vIG1hcCB0aGUgaGl0IHRlc3QuLlxuICAgIHRoaXMuY29udGFpbnNQb2ludCA9IGNhY2hlZFNwcml0ZS5jb250YWluc1BvaW50LmJpbmQoY2FjaGVkU3ByaXRlKTtcbn07XG4vKipcbiAqIFJlbmRlcnMgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGUgc3ByaXRlIHdpdGggY2FudmFzXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfcmVuZGVyQ2FjaGVkQ2FudmFzXG4gKiBAbWVtYmVyb2YgUElYSS5EaXNwbGF5T2JqZWN0I1xuICogQHBhcmFtIHtQSVhJLkNhbnZhc1JlbmRlcmVyfSByZW5kZXJlciAtIFRoZSBjYW52YXMgcmVuZGVyZXJcbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX3JlbmRlckNhY2hlZENhbnZhcyA9IGZ1bmN0aW9uIF9yZW5kZXJDYWNoZWRDYW52YXMocmVuZGVyZXIpIHtcbiAgICBpZiAoIXRoaXMudmlzaWJsZSB8fCB0aGlzLndvcmxkQWxwaGEgPD0gMCB8fCAhdGhpcy5yZW5kZXJhYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXMocmVuZGVyZXIpO1xuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUud29ybGRBbHBoYSA9IHRoaXMud29ybGRBbHBoYTtcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLl9yZW5kZXJDYW52YXMocmVuZGVyZXIpO1xufTtcbi8vIFRPRE8gdGhpcyBjYW4gYmUgdGhlIHNhbWUgYXMgdGhlIFdlYkdMIHZlcnNpb24uLiB3aWxsIG5lZWQgdG8gZG8gYSBsaXR0bGUgdHdlYWtpbmcgZmlyc3QgdGhvdWdoLi5cbi8qKlxuICogUHJlcGFyZXMgdGhlIENhbnZhcyByZW5kZXJlciB0byBjYWNoZSB0aGUgc3ByaXRlXG4gKlxuICogQHByaXZhdGVcbiAqIEBmdW5jdGlvbiBfaW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXNcbiAqIEBtZW1iZXJvZiBQSVhJLkRpc3BsYXlPYmplY3QjXG4gKiBAcGFyYW0ge1BJWEkuQ2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyIC0gVGhlIGNhbnZhcyByZW5kZXJlclxuICovXG5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5faW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXMgPSBmdW5jdGlvbiBfaW5pdENhY2hlZERpc3BsYXlPYmplY3RDYW52YXMocmVuZGVyZXIpIHtcbiAgICBpZiAodGhpcy5fY2FjaGVEYXRhICYmIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBnZXQgYm91bmRzIGFjdHVhbGx5IHRyYW5zZm9ybXMgdGhlIG9iamVjdCBmb3IgdXMgYWxyZWFkeSFcbiAgICB2YXIgYm91bmRzID0gdGhpcy5nZXRMb2NhbEJvdW5kcyhudWxsLCB0cnVlKTtcbiAgICB2YXIgY2FjaGVBbHBoYSA9IHRoaXMuYWxwaGE7XG4gICAgdGhpcy5hbHBoYSA9IDE7XG4gICAgdmFyIGNhY2hlZFJlbmRlclRhcmdldCA9IHJlbmRlcmVyLmNvbnRleHQ7XG4gICAgdmFyIGNhY2hlZFByb2plY3Rpb25UcmFuc2Zvcm0gPSByZW5kZXJlci5fcHJvalRyYW5zZm9ybTtcbiAgICBib3VuZHMuY2VpbChzZXR0aW5ncy5SRVNPTFVUSU9OKTtcbiAgICB2YXIgcmVuZGVyVGV4dHVyZSA9IFJlbmRlclRleHR1cmUuY3JlYXRlKHsgd2lkdGg6IGJvdW5kcy53aWR0aCwgaGVpZ2h0OiBib3VuZHMuaGVpZ2h0IH0pO1xuICAgIHZhciB0ZXh0dXJlQ2FjaGVJZCA9IFwiY2FjaGVBc0JpdG1hcF9cIiArIHVpZCgpO1xuICAgIHRoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZCA9IHRleHR1cmVDYWNoZUlkO1xuICAgIEJhc2VUZXh0dXJlLmFkZFRvQ2FjaGUocmVuZGVyVGV4dHVyZS5iYXNlVGV4dHVyZSwgdGV4dHVyZUNhY2hlSWQpO1xuICAgIFRleHR1cmUuYWRkVG9DYWNoZShyZW5kZXJUZXh0dXJlLCB0ZXh0dXJlQ2FjaGVJZCk7XG4gICAgLy8gbmVlZCB0byBzZXQgLy9cbiAgICB2YXIgbSA9IF90ZW1wTWF0cml4O1xuICAgIHRoaXMudHJhbnNmb3JtLmxvY2FsVHJhbnNmb3JtLmNvcHlUbyhtKTtcbiAgICBtLmludmVydCgpO1xuICAgIG0udHggLT0gYm91bmRzLng7XG4gICAgbS50eSAtPSBib3VuZHMueTtcbiAgICAvLyBtLmFwcGVuZCh0aGlzLnRyYW5zZm9ybS53b3JsZFRyYW5zZm9ybS4pXG4gICAgLy8gc2V0IGFsbCBwcm9wZXJ0aWVzIHRvIHRoZXJlIG9yaWdpbmFsIHNvIHdlIGNhbiByZW5kZXIgdG8gYSB0ZXh0dXJlXG4gICAgdGhpcy5yZW5kZXJDYW52YXMgPSB0aGlzLl9jYWNoZURhdGEub3JpZ2luYWxSZW5kZXJDYW52YXM7XG4gICAgcmVuZGVyZXIucmVuZGVyKHRoaXMsIHJlbmRlclRleHR1cmUsIHRydWUsIG0sIGZhbHNlKTtcbiAgICAvLyBub3cgcmVzdG9yZSB0aGUgc3RhdGUgYmUgc2V0dGluZyB0aGUgbmV3IHByb3BlcnRpZXNcbiAgICByZW5kZXJlci5jb250ZXh0ID0gY2FjaGVkUmVuZGVyVGFyZ2V0O1xuICAgIHJlbmRlcmVyLl9wcm9qVHJhbnNmb3JtID0gY2FjaGVkUHJvamVjdGlvblRyYW5zZm9ybTtcbiAgICB0aGlzLnJlbmRlckNhbnZhcyA9IHRoaXMuX3JlbmRlckNhY2hlZENhbnZhcztcbiAgICAvLyB0aGUgcmVzdCBpcyB0aGUgc2FtZSBhcyBmb3IgV2ViR0xcbiAgICB0aGlzLnVwZGF0ZVRyYW5zZm9ybSA9IHRoaXMuZGlzcGxheU9iamVjdFVwZGF0ZVRyYW5zZm9ybTtcbiAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kcyA9IHRoaXMuX2NhbGN1bGF0ZUNhY2hlZEJvdW5kcztcbiAgICB0aGlzLmdldExvY2FsQm91bmRzID0gdGhpcy5fZ2V0Q2FjaGVkTG9jYWxCb3VuZHM7XG4gICAgdGhpcy5fbWFzayA9IG51bGw7XG4gICAgdGhpcy5maWx0ZXJBcmVhID0gbnVsbDtcbiAgICAvLyBjcmVhdGUgb3VyIGNhY2hlZCBzcHJpdGVcbiAgICB2YXIgY2FjaGVkU3ByaXRlID0gbmV3IFNwcml0ZShyZW5kZXJUZXh0dXJlKTtcbiAgICBjYWNoZWRTcHJpdGUudHJhbnNmb3JtLndvcmxkVHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0ud29ybGRUcmFuc2Zvcm07XG4gICAgY2FjaGVkU3ByaXRlLmFuY2hvci54ID0gLShib3VuZHMueCAvIGJvdW5kcy53aWR0aCk7XG4gICAgY2FjaGVkU3ByaXRlLmFuY2hvci55ID0gLShib3VuZHMueSAvIGJvdW5kcy5oZWlnaHQpO1xuICAgIGNhY2hlZFNwcml0ZS5hbHBoYSA9IGNhY2hlQWxwaGE7XG4gICAgY2FjaGVkU3ByaXRlLl9ib3VuZHMgPSB0aGlzLl9ib3VuZHM7XG4gICAgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZSA9IGNhY2hlZFNwcml0ZTtcbiAgICB0aGlzLnRyYW5zZm9ybS5fcGFyZW50SUQgPSAtMTtcbiAgICAvLyByZXN0b3JlIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGNhY2hlZCBzcHJpdGUgdG8gYXZvaWQgdGhlIG5hc3R5IGZsaWNrZXIuLlxuICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSByZW5kZXJlci5fdGVtcERpc3BsYXlPYmplY3RQYXJlbnQ7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIC8vIG1hcCB0aGUgaGl0IHRlc3QuLlxuICAgIHRoaXMuY29udGFpbnNQb2ludCA9IGNhY2hlZFNwcml0ZS5jb250YWluc1BvaW50LmJpbmQoY2FjaGVkU3ByaXRlKTtcbn07XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGJvdW5kcyBvZiB0aGUgY2FjaGVkIHNwcml0ZVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkRpc3BsYXlPYmplY3QucHJvdG90eXBlLl9jYWxjdWxhdGVDYWNoZWRCb3VuZHMgPSBmdW5jdGlvbiBfY2FsY3VsYXRlQ2FjaGVkQm91bmRzKCkge1xuICAgIHRoaXMuX2JvdW5kcy5jbGVhcigpO1xuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUudHJhbnNmb3JtLl93b3JsZElEID0gdGhpcy50cmFuc2Zvcm0uX3dvcmxkSUQ7XG4gICAgdGhpcy5fY2FjaGVEYXRhLnNwcml0ZS5fY2FsY3VsYXRlQm91bmRzKCk7XG4gICAgdGhpcy5fYm91bmRzLnVwZGF0ZUlEID0gdGhpcy5fYm91bmRzSUQ7XG59O1xuLyoqXG4gKiBHZXRzIHRoZSBib3VuZHMgb2YgdGhlIGNhY2hlZCBzcHJpdGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge1JlY3RhbmdsZX0gVGhlIGxvY2FsIGJvdW5kcy5cbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2dldENhY2hlZExvY2FsQm91bmRzID0gZnVuY3Rpb24gX2dldENhY2hlZExvY2FsQm91bmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZURhdGEuc3ByaXRlLmdldExvY2FsQm91bmRzKG51bGwpO1xufTtcbi8qKlxuICogRGVzdHJveXMgdGhlIGNhY2hlZCBzcHJpdGUuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2Rlc3Ryb3lDYWNoZWREaXNwbGF5T2JqZWN0ID0gZnVuY3Rpb24gX2Rlc3Ryb3lDYWNoZWREaXNwbGF5T2JqZWN0KCkge1xuICAgIHRoaXMuX2NhY2hlRGF0YS5zcHJpdGUuX3RleHR1cmUuZGVzdHJveSh0cnVlKTtcbiAgICB0aGlzLl9jYWNoZURhdGEuc3ByaXRlID0gbnVsbDtcbiAgICBCYXNlVGV4dHVyZS5yZW1vdmVGcm9tQ2FjaGUodGhpcy5fY2FjaGVEYXRhLnRleHR1cmVDYWNoZUlkKTtcbiAgICBUZXh0dXJlLnJlbW92ZUZyb21DYWNoZSh0aGlzLl9jYWNoZURhdGEudGV4dHVyZUNhY2hlSWQpO1xuICAgIHRoaXMuX2NhY2hlRGF0YS50ZXh0dXJlQ2FjaGVJZCA9IG51bGw7XG59O1xuLyoqXG4gKiBEZXN0cm95cyB0aGUgY2FjaGVkIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R8Ym9vbGVhbn0gW29wdGlvbnNdIC0gT3B0aW9ucyBwYXJhbWV0ZXIuIEEgYm9vbGVhbiB3aWxsIGFjdCBhcyBpZiBhbGwgb3B0aW9uc1xuICogIGhhdmUgYmVlbiBzZXQgdG8gdGhhdCB2YWx1ZS5cbiAqICBVc2VkIHdoZW4gZGVzdHJveWluZyBjb250YWluZXJzLCBzZWUgdGhlIENvbnRhaW5lci5kZXN0cm95IG1ldGhvZC5cbiAqL1xuRGlzcGxheU9iamVjdC5wcm90b3R5cGUuX2NhY2hlQXNCaXRtYXBEZXN0cm95ID0gZnVuY3Rpb24gX2NhY2hlQXNCaXRtYXBEZXN0cm95KG9wdGlvbnMpIHtcbiAgICB0aGlzLmNhY2hlQXNCaXRtYXAgPSBmYWxzZTtcbiAgICB0aGlzLmRlc3Ryb3kob3B0aW9ucyk7XG59O1xuXG5leHBvcnQgeyBDYWNoZURhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1peGluLWNhY2hlLWFzLWJpdG1hcC5lcy5qcy5tYXBcbiJdLCJzb3VyY2VSb290IjoiIn0=