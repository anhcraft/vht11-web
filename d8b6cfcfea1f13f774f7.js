(self.webpackChunkvht11=self.webpackChunkvht11||[]).push([["C:\\Users\\huynh\\IdeaProjects\\vht11\\node_modules\\mathjax-full\\js\\handlers\\html\\HTMLDocument"],{"./node_modules/mathjax-full/js/handlers/html/HTMLDocument.js":function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLDocument=void 0;var l=r("./node_modules/mathjax-full/js/core/MathDocument.js"),h=r("./node_modules/mathjax-full/js/util/Options.js"),u=r("./node_modules/mathjax-full/js/handlers/html/HTMLMathItem.js"),d=r("./node_modules/mathjax-full/js/handlers/html/HTMLMathList.js"),c=r("./node_modules/mathjax-full/js/handlers/html/HTMLDomStrings.js"),p=r("./node_modules/mathjax-full/js/core/MathItem.js"),f=function(t){function e(e,r,n){var o=this,a=i(h.separateOptions(n,c.HTMLDomStrings.OPTIONS),2),s=a[0],l=a[1];return(o=t.call(this,e,r,s)||this).domStrings=o.options.DomStrings||new c.HTMLDomStrings(l),o.domStrings.adaptor=r,o.styles=[],o}return o(e,t),e.prototype.findPosition=function(t,e,r,n){var o,a,l=this.adaptor;try{for(var h=s(n[t]),u=h.next();!u.done;u=h.next()){var d=u.value,c=i(d,2),p=c[0],f=c[1];if(e<=f&&"#text"===l.kind(p))return{node:p,n:Math.max(e,0),delim:r};e-=f}}catch(t){o={error:t}}finally{try{u&&!u.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return{node:null,n:0,delim:r}},e.prototype.mathItem=function(t,e,r){var n=t.math,o=this.findPosition(t.n,t.start.n,t.open,r),a=this.findPosition(t.n,t.end.n,t.close,r);return new this.options.MathItem(n,e,t.display,o,a)},e.prototype.findMath=function(t){var e,r,n,o,a,l,u,d,c;if(!this.processed.isSet("findMath")){this.adaptor.document=this.document,t=h.userOptions({elements:this.options.elements||[this.adaptor.body(this.document)]},t);try{for(var p=s(this.adaptor.getElements(t.elements,this.document)),f=p.next();!f.done;f=p.next()){var m=f.value,y=i([null,null],2),v=y[0],S=y[1];try{for(var M=(n=void 0,s(this.inputJax)),x=M.next();!x.done;x=M.next()){var j=x.value,T=new this.options.MathList;if(j.processStrings){null===v&&(v=(a=i(this.domStrings.find(m),2))[0],S=a[1]);try{for(var _=(l=void 0,s(j.findMath(v))),g=_.next();!g.done;g=_.next()){var b=g.value;T.push(this.mathItem(b,j,S))}}catch(t){l={error:t}}finally{try{g&&!g.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}}else try{for(var D=(d=void 0,s(j.findMath(m))),O=D.next();!O.done;O=D.next()){b=O.value;var w=new this.options.MathItem(b.math,j,b.display,b.start,b.end);T.push(w)}}catch(t){d={error:t}}finally{try{O&&!O.done&&(c=D.return)&&c.call(D)}finally{if(d)throw d.error}}this.math.merge(T)}}catch(t){n={error:t}}finally{try{x&&!x.done&&(o=M.return)&&o.call(M)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}this.processed.set("findMath")}return this},e.prototype.updateDocument=function(){return this.processed.isSet("updateDocument")||(this.addPageElements(),this.addStyleSheet(),t.prototype.updateDocument.call(this),this.processed.set("updateDocument")),this},e.prototype.addPageElements=function(){var t=this.adaptor.body(this.document),e=this.documentPageElements();e&&this.adaptor.append(t,e)},e.prototype.addStyleSheet=function(){var t=this.documentStyleSheet();if(t){var e=this.adaptor.head(this.document),r=this.findSheet(e,this.adaptor.getAttribute(t,"id"));r?this.adaptor.replace(t,r):this.adaptor.append(e,t)}},e.prototype.findSheet=function(t,e){var r,n;if(e)try{for(var o=s(this.adaptor.tags(t,"style")),a=o.next();!a.done;a=o.next()){var i=a.value;if(this.adaptor.getAttribute(i,"id")===e)return i}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null},e.prototype.removeFromDocument=function(t){var e,r;if(void 0===t&&(t=!1),this.processed.isSet("updateDocument"))try{for(var n=s(this.math),o=n.next();!o.done;o=n.next()){var a=o.value;a.state()>=p.STATE.INSERTED&&a.state(p.STATE.TYPESET,t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this.processed.clear("updateDocument"),this},e.prototype.documentStyleSheet=function(){return this.outputJax.styleSheet(this)},e.prototype.documentPageElements=function(){return this.outputJax.pageElements(this)},e.prototype.addStyles=function(t){this.styles.push(t)},e.prototype.getStyles=function(){return this.styles},e.KIND="HTML",e.OPTIONS=a(a({},l.AbstractMathDocument.OPTIONS),{renderActions:h.expandable(a(a({},l.AbstractMathDocument.OPTIONS.renderActions),{styles:[p.STATE.INSERTED+1,"","updateStyleSheet",!1]})),MathList:d.HTMLMathList,MathItem:u.HTMLMathItem,DomStrings:null}),e}(l.AbstractMathDocument);e.HTMLDocument=f}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aHQxMS8uL25vZGVfbW9kdWxlcy9tYXRoamF4LWZ1bGwvanMvaGFuZGxlcnMvaHRtbC9IVE1MRG9jdW1lbnQuanMiXSwibmFtZXMiOlsiZXh0ZW5kU3RhdGljcyIsIl9fZXh0ZW5kcyIsInRoaXMiLCJkIiwiYiIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiY3JlYXRlIiwiX19hc3NpZ24iLCJhc3NpZ24iLCJ0IiwicyIsImkiLCJuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2FsbCIsImFwcGx5IiwiX19yZWFkIiwibyIsIm0iLCJTeW1ib2wiLCJpdGVyYXRvciIsInIiLCJlIiwiYXIiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJ2YWx1ZSIsImVycm9yIiwiX192YWx1ZXMiLCJUeXBlRXJyb3IiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJIVE1MRG9jdW1lbnQiLCJNYXRoRG9jdW1lbnRfanNfMSIsIk9wdGlvbnNfanNfMSIsIkhUTUxNYXRoSXRlbV9qc18xIiwiSFRNTE1hdGhMaXN0X2pzXzEiLCJIVE1MRG9tU3RyaW5nc19qc18xIiwiTWF0aEl0ZW1fanNfMSIsIl9zdXBlciIsImRvY3VtZW50IiwiYWRhcHRvciIsIm9wdGlvbnMiLCJfdGhpcyIsIl9hIiwic2VwYXJhdGVPcHRpb25zIiwiSFRNTERvbVN0cmluZ3MiLCJPUFRJT05TIiwiaHRtbCIsImRvbSIsImRvbVN0cmluZ3MiLCJzdHlsZXMiLCJmaW5kUG9zaXRpb24iLCJOIiwiaW5kZXgiLCJkZWxpbSIsIm5vZGVzIiwiZV8xIiwiX2IiLCJfYyIsImxpc3QiLCJfZCIsIm5vZGUiLCJraW5kIiwiTWF0aCIsIm1heCIsImVfMV8xIiwicmV0dXJuIiwibWF0aEl0ZW0iLCJpdGVtIiwiamF4IiwibWF0aCIsInN0YXJ0Iiwib3BlbiIsImVuZCIsImNsb3NlIiwiTWF0aEl0ZW0iLCJkaXNwbGF5IiwiZmluZE1hdGgiLCJlXzIiLCJlXzMiLCJlXzQiLCJlXzUiLCJfZSIsInByb2Nlc3NlZCIsImlzU2V0IiwidXNlck9wdGlvbnMiLCJlbGVtZW50cyIsImJvZHkiLCJfZiIsImdldEVsZW1lbnRzIiwiX2ciLCJjb250YWluZXIiLCJfaCIsInN0cmluZ3MiLCJfaiIsImlucHV0SmF4IiwiX2siLCJwcm9jZXNzU3RyaW5ncyIsImZpbmQiLCJfbCIsIl9tIiwiZV80XzEiLCJfbyIsIl9wIiwiZV81XzEiLCJtZXJnZSIsImVfM18xIiwiZV8yXzEiLCJzZXQiLCJ1cGRhdGVEb2N1bWVudCIsImFkZFBhZ2VFbGVtZW50cyIsImFkZFN0eWxlU2hlZXQiLCJkb2N1bWVudFBhZ2VFbGVtZW50cyIsImFwcGVuZCIsInNoZWV0IiwiZG9jdW1lbnRTdHlsZVNoZWV0IiwiaGVhZCIsImZpbmRTaGVldCIsImdldEF0dHJpYnV0ZSIsInJlcGxhY2UiLCJpZCIsImVfNiIsInRhZ3MiLCJlXzZfMSIsInJlbW92ZUZyb21Eb2N1bWVudCIsInJlc3RvcmUiLCJlXzciLCJzdGF0ZSIsIlNUQVRFIiwiSU5TRVJURUQiLCJUWVBFU0VUIiwiZV83XzEiLCJjbGVhciIsIm91dHB1dEpheCIsInN0eWxlU2hlZXQiLCJwYWdlRWxlbWVudHMiLCJhZGRTdHlsZXMiLCJnZXRTdHlsZXMiLCJLSU5EIiwiQWJzdHJhY3RNYXRoRG9jdW1lbnQiLCJyZW5kZXJBY3Rpb25zIiwiZXhwYW5kYWJsZSIsIk1hdGhMaXN0IiwiSFRNTE1hdGhMaXN0IiwiSFRNTE1hdGhJdGVtIiwiRG9tU3RyaW5ncyJdLCJtYXBwaW5ncyI6IitQQUNBLElBQ1FBLEVBREpDLEVBQWFDLE1BQVFBLEtBQUtELFlBQ3RCRCxFQUFnQixTQUFVRyxFQUFHQyxHQUk3QixPQUhBSixFQUFnQkssT0FBT0MsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUwsRUFBR0MsR0FBS0QsRUFBRUksVUFBWUgsSUFDdkUsU0FB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QWE0RyxXQUFXekksRUFBU0EsRUFBUyxHQUFJNEIsRUFBa0IyRyxxQkFBcUI3RixRQUFROEYsZUFBZ0IsQ0FBRTFGLE9BQVEsQ0FBQ2IsRUFBYzJGLE1BQU1DLFNBQVcsRUFBRyxHQUFJLG9CQUFvQixNQUFZYSxTQUFVM0csRUFBa0I0RyxhQUFjcEUsU0FBVXpDLEVBQWtCOEcsYUFBY0MsV0FBWSxPQUN0WWxILEVBcE1RLENBcU1qQkMsRUFBa0IyRyxzQkFDcEI3RyxFQUFRQyxhQUFlQSIsImZpbGUiOiJkOGI2Y2ZjZmVhMWYxM2Y3NzRmNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgICBpZiAoIW0pIHJldHVybiBvO1xuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICAgIH1cbiAgICByZXR1cm4gYXI7XG59O1xudmFyIF9fdmFsdWVzID0gKHRoaXMgJiYgdGhpcy5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykge1xuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IVE1MRG9jdW1lbnQgPSB2b2lkIDA7XG52YXIgTWF0aERvY3VtZW50X2pzXzEgPSByZXF1aXJlKFwiLi4vLi4vY29yZS9NYXRoRG9jdW1lbnQuanNcIik7XG52YXIgT3B0aW9uc19qc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWwvT3B0aW9ucy5qc1wiKTtcbnZhciBIVE1MTWF0aEl0ZW1fanNfMSA9IHJlcXVpcmUoXCIuL0hUTUxNYXRoSXRlbS5qc1wiKTtcbnZhciBIVE1MTWF0aExpc3RfanNfMSA9IHJlcXVpcmUoXCIuL0hUTUxNYXRoTGlzdC5qc1wiKTtcbnZhciBIVE1MRG9tU3RyaW5nc19qc18xID0gcmVxdWlyZShcIi4vSFRNTERvbVN0cmluZ3MuanNcIik7XG52YXIgTWF0aEl0ZW1fanNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb3JlL01hdGhJdGVtLmpzXCIpO1xudmFyIEhUTUxEb2N1bWVudCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEhUTUxEb2N1bWVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBIVE1MRG9jdW1lbnQoZG9jdW1lbnQsIGFkYXB0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gX19yZWFkKE9wdGlvbnNfanNfMS5zZXBhcmF0ZU9wdGlvbnMob3B0aW9ucywgSFRNTERvbVN0cmluZ3NfanNfMS5IVE1MRG9tU3RyaW5ncy5PUFRJT05TKSwgMiksIGh0bWwgPSBfYVswXSwgZG9tID0gX2FbMV07XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZG9jdW1lbnQsIGFkYXB0b3IsIGh0bWwpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRvbVN0cmluZ3MgPSBfdGhpcy5vcHRpb25zWydEb21TdHJpbmdzJ10gfHwgbmV3IEhUTUxEb21TdHJpbmdzX2pzXzEuSFRNTERvbVN0cmluZ3MoZG9tKTtcbiAgICAgICAgX3RoaXMuZG9tU3RyaW5ncy5hZGFwdG9yID0gYWRhcHRvcjtcbiAgICAgICAgX3RoaXMuc3R5bGVzID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5maW5kUG9zaXRpb24gPSBmdW5jdGlvbiAoTiwgaW5kZXgsIGRlbGltLCBub2Rlcykge1xuICAgICAgICB2YXIgZV8xLCBfYTtcbiAgICAgICAgdmFyIGFkYXB0b3IgPSB0aGlzLmFkYXB0b3I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKG5vZGVzW05dKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gX2MudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIF9kID0gX19yZWFkKGxpc3QsIDIpLCBub2RlID0gX2RbMF0sIG4gPSBfZFsxXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPD0gbiAmJiBhZGFwdG9yLmtpbmQobm9kZSkgPT09ICcjdGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogbm9kZSwgbjogTWF0aC5tYXgoaW5kZXgsIDApLCBkZWxpbTogZGVsaW0gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXggLT0gbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG5vZGU6IG51bGwsIG46IDAsIGRlbGltOiBkZWxpbSB9O1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5tYXRoSXRlbSA9IGZ1bmN0aW9uIChpdGVtLCBqYXgsIG5vZGVzKSB7XG4gICAgICAgIHZhciBtYXRoID0gaXRlbS5tYXRoO1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmZpbmRQb3NpdGlvbihpdGVtLm4sIGl0ZW0uc3RhcnQubiwgaXRlbS5vcGVuLCBub2Rlcyk7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLmZpbmRQb3NpdGlvbihpdGVtLm4sIGl0ZW0uZW5kLm4sIGl0ZW0uY2xvc2UsIG5vZGVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLm9wdGlvbnMuTWF0aEl0ZW0obWF0aCwgamF4LCBpdGVtLmRpc3BsYXksIHN0YXJ0LCBlbmQpO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5maW5kTWF0aCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBlXzIsIF9hLCBlXzMsIF9iLCBfYywgZV80LCBfZCwgZV81LCBfZTtcbiAgICAgICAgaWYgKCF0aGlzLnByb2Nlc3NlZC5pc1NldCgnZmluZE1hdGgnKSkge1xuICAgICAgICAgICAgdGhpcy5hZGFwdG9yLmRvY3VtZW50ID0gdGhpcy5kb2N1bWVudDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBPcHRpb25zX2pzXzEudXNlck9wdGlvbnMoeyBlbGVtZW50czogdGhpcy5vcHRpb25zLmVsZW1lbnRzIHx8IFt0aGlzLmFkYXB0b3IuYm9keSh0aGlzLmRvY3VtZW50KV0gfSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9mID0gX192YWx1ZXModGhpcy5hZGFwdG9yLmdldEVsZW1lbnRzKG9wdGlvbnNbJ2VsZW1lbnRzJ10sIHRoaXMuZG9jdW1lbnQpKSwgX2cgPSBfZi5uZXh0KCk7ICFfZy5kb25lOyBfZyA9IF9mLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gX2cudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaCA9IF9fcmVhZChbbnVsbCwgbnVsbF0sIDIpLCBzdHJpbmdzID0gX2hbMF0sIG5vZGVzID0gX2hbMV07XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaiA9IChlXzMgPSB2b2lkIDAsIF9fdmFsdWVzKHRoaXMuaW5wdXRKYXgpKSwgX2sgPSBfai5uZXh0KCk7ICFfay5kb25lOyBfayA9IF9qLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqYXggPSBfay52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyAodGhpcy5vcHRpb25zWydNYXRoTGlzdCddKSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqYXgucHJvY2Vzc1N0cmluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gX19yZWFkKHRoaXMuZG9tU3RyaW5ncy5maW5kKGNvbnRhaW5lciksIDIpLCBzdHJpbmdzID0gX2NbMF0sIG5vZGVzID0gX2NbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9sID0gKGVfNCA9IHZvaWQgMCwgX192YWx1ZXMoamF4LmZpbmRNYXRoKHN0cmluZ3MpKSksIF9tID0gX2wubmV4dCgpOyAhX20uZG9uZTsgX20gPSBfbC5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0aCA9IF9tLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh0aGlzLm1hdGhJdGVtKG1hdGgsIGpheCwgbm9kZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV80XzEpIHsgZV80ID0geyBlcnJvcjogZV80XzEgfTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tICYmICFfbS5kb25lICYmIChfZCA9IF9sLnJldHVybikpIF9kLmNhbGwoX2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX28gPSAoZV81ID0gdm9pZCAwLCBfX3ZhbHVlcyhqYXguZmluZE1hdGgoY29udGFpbmVyKSkpLCBfcCA9IF9vLm5leHQoKTsgIV9wLmRvbmU7IF9wID0gX28ubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGggPSBfcC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IG5ldyB0aGlzLm9wdGlvbnMuTWF0aEl0ZW0obWF0aC5tYXRoLCBqYXgsIG1hdGguZGlzcGxheSwgbWF0aC5zdGFydCwgbWF0aC5lbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV81XzEpIHsgZV81ID0geyBlcnJvcjogZV81XzEgfTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wICYmICFfcC5kb25lICYmIChfZSA9IF9vLnJldHVybikpIF9lLmNhbGwoX28pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzUpIHRocm93IGVfNS5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0aC5tZXJnZShsaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZV8zXzEpIHsgZV8zID0geyBlcnJvcjogZV8zXzEgfTsgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9rICYmICFfay5kb25lICYmIChfYiA9IF9qLnJldHVybikpIF9iLmNhbGwoX2opO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzMpIHRocm93IGVfMy5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZyAmJiAhX2cuZG9uZSAmJiAoX2EgPSBfZi5yZXR1cm4pKSBfYS5jYWxsKF9mKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzIpIHRocm93IGVfMi5lcnJvcjsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZWQuc2V0KCdmaW5kTWF0aCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS51cGRhdGVEb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb2Nlc3NlZC5pc1NldCgndXBkYXRlRG9jdW1lbnQnKSkge1xuICAgICAgICAgICAgdGhpcy5hZGRQYWdlRWxlbWVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkU3R5bGVTaGVldCgpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGVEb2N1bWVudC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzZWQuc2V0KCd1cGRhdGVEb2N1bWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5hZGRQYWdlRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBib2R5ID0gdGhpcy5hZGFwdG9yLmJvZHkodGhpcy5kb2N1bWVudCk7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5kb2N1bWVudFBhZ2VFbGVtZW50cygpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgdGhpcy5hZGFwdG9yLmFwcGVuZChib2R5LCBub2RlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5hZGRTdHlsZVNoZWV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2hlZXQgPSB0aGlzLmRvY3VtZW50U3R5bGVTaGVldCgpO1xuICAgICAgICBpZiAoc2hlZXQpIHtcbiAgICAgICAgICAgIHZhciBoZWFkID0gdGhpcy5hZGFwdG9yLmhlYWQodGhpcy5kb2N1bWVudCk7XG4gICAgICAgICAgICB2YXIgc3R5bGVzID0gdGhpcy5maW5kU2hlZXQoaGVhZCwgdGhpcy5hZGFwdG9yLmdldEF0dHJpYnV0ZShzaGVldCwgJ2lkJykpO1xuICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRhcHRvci5yZXBsYWNlKHNoZWV0LCBzdHlsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGFwdG9yLmFwcGVuZChoZWFkLCBzaGVldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhUTUxEb2N1bWVudC5wcm90b3R5cGUuZmluZFNoZWV0ID0gZnVuY3Rpb24gKGhlYWQsIGlkKSB7XG4gICAgICAgIHZhciBlXzYsIF9hO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLmFkYXB0b3IudGFncyhoZWFkLCAnc3R5bGUnKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoZWV0ID0gX2MudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkYXB0b3IuZ2V0QXR0cmlidXRlKHNoZWV0LCAnaWQnKSA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGVldDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzZfMSkgeyBlXzYgPSB7IGVycm9yOiBlXzZfMSB9OyB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV82KSB0aHJvdyBlXzYuZXJyb3I7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIEhUTUxEb2N1bWVudC5wcm90b3R5cGUucmVtb3ZlRnJvbURvY3VtZW50ID0gZnVuY3Rpb24gKHJlc3RvcmUpIHtcbiAgICAgICAgdmFyIGVfNywgX2E7XG4gICAgICAgIGlmIChyZXN0b3JlID09PSB2b2lkIDApIHsgcmVzdG9yZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NlZC5pc1NldCgndXBkYXRlRG9jdW1lbnQnKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKHRoaXMubWF0aCksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGggPSBfYy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGguc3RhdGUoKSA+PSBNYXRoSXRlbV9qc18xLlNUQVRFLklOU0VSVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRoLnN0YXRlKE1hdGhJdGVtX2pzXzEuU1RBVEUuVFlQRVNFVCwgcmVzdG9yZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZV83XzEpIHsgZV83ID0geyBlcnJvcjogZV83XzEgfTsgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNykgdGhyb3cgZV83LmVycm9yOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9jZXNzZWQuY2xlYXIoJ3VwZGF0ZURvY3VtZW50Jyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5kb2N1bWVudFN0eWxlU2hlZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dHB1dEpheC5zdHlsZVNoZWV0KHRoaXMpO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5kb2N1bWVudFBhZ2VFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0SmF4LnBhZ2VFbGVtZW50cyh0aGlzKTtcbiAgICB9O1xuICAgIEhUTUxEb2N1bWVudC5wcm90b3R5cGUuYWRkU3R5bGVzID0gZnVuY3Rpb24gKHN0eWxlcykge1xuICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHN0eWxlcyk7XG4gICAgfTtcbiAgICBIVE1MRG9jdW1lbnQucHJvdG90eXBlLmdldFN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzO1xuICAgIH07XG4gICAgSFRNTERvY3VtZW50LktJTkQgPSAnSFRNTCc7XG4gICAgSFRNTERvY3VtZW50Lk9QVElPTlMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgTWF0aERvY3VtZW50X2pzXzEuQWJzdHJhY3RNYXRoRG9jdW1lbnQuT1BUSU9OUyksIHsgcmVuZGVyQWN0aW9uczogT3B0aW9uc19qc18xLmV4cGFuZGFibGUoX19hc3NpZ24oX19hc3NpZ24oe30sIE1hdGhEb2N1bWVudF9qc18xLkFic3RyYWN0TWF0aERvY3VtZW50Lk9QVElPTlMucmVuZGVyQWN0aW9ucyksIHsgc3R5bGVzOiBbTWF0aEl0ZW1fanNfMS5TVEFURS5JTlNFUlRFRCArIDEsICcnLCAndXBkYXRlU3R5bGVTaGVldCcsIGZhbHNlXSB9KSksIE1hdGhMaXN0OiBIVE1MTWF0aExpc3RfanNfMS5IVE1MTWF0aExpc3QsIE1hdGhJdGVtOiBIVE1MTWF0aEl0ZW1fanNfMS5IVE1MTWF0aEl0ZW0sIERvbVN0cmluZ3M6IG51bGwgfSk7XG4gICAgcmV0dXJuIEhUTUxEb2N1bWVudDtcbn0oTWF0aERvY3VtZW50X2pzXzEuQWJzdHJhY3RNYXRoRG9jdW1lbnQpKTtcbmV4cG9ydHMuSFRNTERvY3VtZW50ID0gSFRNTERvY3VtZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SFRNTERvY3VtZW50LmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=